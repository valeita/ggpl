(function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/ajax",["jquery","external/underscore","modules/clean/devtools/perf_hub_actions","modules/clean/stormcrow/stormcrow_panel_actions","modules/clean/job_progress","modules/clean/storage","modules/clean/undo","modules/constants/debug","modules/constants/request","modules/constants/page_load","modules/constants/viewer","modules/core/browser","modules/core/cookies","modules/core/exception","modules/core/html","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,r,i,o,s,a,l,u,c,_,h,d,p,f,m,g,v,w){var y,b,E,x,S,k,C,T,R,O,L,A,I,N,P,M,$,D,U,q,F,j,B,H,G,W,V,J,Y,X,z,K,Q,Z,tt,et,nt,rt,it,ot,st,at,lt,ut,ct,_t,ht;return ct=g._,W="err:",V="htmlerr:",G="async_task_started:",H="async_task_err:",B="done:",U="oref",J=function(t,n){var r,i,o,s,a;return null==t&&(t={}),null==n&&(n=[]),null==t.type&&(null!=t.method?(f.raiseAndReport("Use of method property within modules/clean/ajax's Request",{tags:["module:ajax"]}),s=t.method):s="POST",t.type=s),r=new x(t),i=_t(r,n),a=e.ajax({url:i.url(),type:t.type,data:i.data(),dataType:t.dataType||"text",headers:i.headers(),traditional:!0,xhrFields:i.xhrFields(),success:function(t,e,n){return i.success(t,e,n)},error:function(t,e,n){return i.error(t,e,n)},complete:function(t,e){return i.complete(t,e)},async:null!=(o=t.async)?o:!0,timeout:t.timeout}),i.request(a)},_t=function(t,e){var n,i,o,s,a,l,u,c;for(i=[t],c=r(e.slice(0)).reverse(),o=0,l=c.length;l>o;o++)n=c[o],i.push(new n);for(a=null,s=0,u=i.length;u>s;s++)n=i[s],a&&(n.next=a),a=n;return a},x=function(){function t(t){null==t&&(t={}),this.options=function(){return t},this.url=function(){return String(t.url||"")},this.data=function(){return t.data||{}},this.headers=function(){return t.headers||{}},this.xhrFields=function(){return t.xhrFields||{}},this.success=t.success||this.identity,this.error=t.error||this.identity,this.complete=t.complete||this.identity,this.request=this.identity}return t.prototype.identity=function(t){return t},t}(),T=function(){function t(){}return t.prototype.options=function(){return this.next.options()},t.prototype.url=function(){return this.next.url()},t.prototype.data=function(){return this.next.data()},t.prototype.headers=function(){return this.next.headers()},t.prototype.xhrFields=function(){return this.next.xhrFields()},t.prototype.success=function(t,e,n){return this.next.success(t,e,n)},t.prototype.error=function(t,e,n){return this.next.error(t,e,n)},t.prototype.complete=function(t,e){return this.next.complete(t,e)},t.prototype.request=function(t){return this.next.request(t)},t}(),k=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.SUPPORTED_TLDS=["dropbox.com"],r.prototype.data=function(){var t;return f.assert(this._is_db_domain(),"injecting CSRF token into request to non-dropbox domain"),t={is_xhr:!0},"get"!==(this.options().type||"post").toLowerCase()&&(t.t=p.read(c.JS_CSRF_COOKIE)||""),e.extend(t,this.next.data())},r.prototype._is_db_domain=function(){var t,e;return(t=w.parse(String(this.url())).authority)?(e=t.split("."),this.SUPPORTED_TLDS.reduce(function(t,n){var r,i;return i=n.split("."),r=e.slice(-1*i.length).join("."),t||n===r},!1)):!0},r}(T),tt=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.data=function(){var t,e;return t=this.next.data(),e=this.options(),e.subject_user&&!t[h.UID_PARAM_NAME]&&(t[h.UID_PARAM_NAME]=String(e.subject_user)),t},n.prototype.headers=function(){var t,e;return t=this.next.headers(),e=this.options(),e.subject_user&&(t["X-DROPBOX-UID"]=String(e.subject_user)),t},n}(T),S=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.error=function(t,e,n){var r,i;return 403===t.status&&(r=a.SessionStorage.get("reload-timestamp"),i=(new Date).getTime(),(!r||i-r>3e4)&&(a.SessionStorage.set("reload-timestamp",i),window.location.reload(!0))),this.next.error(t,e,n)},n}(T),N=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t;return t=this.next.data(),null!=e.ajaxSettings.restrict&&(t.restrict=e.ajaxSettings.restrict),t},r}(T),Y=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=this.next.data(),c.REQUEST_TRACING_ENABLED&&"post"===this.options().type.toLowerCase()?(n={parent_request_id:c.REQUEST_ID},e.extend(n,t)):t},r}(T),j=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=this.next.data(),n={},_.PUBLIC_MODE_OVERRIDE&&(n.public_mode_override=1),_.COUNTRY_OVERRIDE&&(n.country_override=_.COUNTRY_OVERRIDE),e.extend(n,t)},r}(T),L=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url=function(){var t;return t=this.next.url(),u.CPROFILE_ENABLED?w.parse(t).updateQuery({cProfile:u.CPROFILE_PARAMETER}).toString():t},n.prototype.success=function(t,e,n){return i.add_ajax_profile({xhr:n,url:this.url()}),this.next.success(t,e,n)},n}(T),A=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t;return t=this.next.data(),u.STORMCROW_PANEL?e.extend({stormcrow_panel:1},t):t},r.prototype.complete=function(t,e){var n,r;return u.STORMCROW_PANEL&&(r=this.url(),n=t.getResponseHeader("X-Dropbox-Request-Id"),w.parse(r).getPath()!==o.FEATURES_USED_URL&&E({url:o.FEATURES_USED_URL,data:{request_id:n},success:function(t,e,i){return o.add_request_info({url:r,request_id:n,features_used:JSON.parse(t)})}})),this.next.complete(t,e)},r}(T),O=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.error=function(t,e,n){return this._notify_dev(t,e,n),this.next.error(t,e,n)},r.prototype._notify_dev=function(t,n,r){var i,o,s;return!_.IS_PROD&&500===t.status&&t.getResponseHeader("X-Debug-Url")?(s=t.getResponseHeader("X-Debug-Url"),i=e("<span />"),i.text(v.DEFAULT_ERROR),o=e("<a/>",{href:s,target:"_blank"}).text(ct("View debug")),i.append("&nbsp;").append(o),v.error(new m(i.html()))):void 0},r}(T),et=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.success=function(t,e,n){var r,i,o,s,a;if(!n.responseText.length)return this.next.error(n,e,"");if(o=!0,i=!1,0===n.responseText.indexOf(W))r=n.responseText.substr(W.length),"{"!==(s=r[0])&&"["!==s||(o=!1);else{if(0!==n.responseText.indexOf(V))return this.next.success(t,e,n);r=n.responseText.substr(V.length),i=!0}return a=this.next.error(n,e,r),o&&(i&&(r=new m(r)),v.error(r)),a},n.prototype.error=function(t,e,n){return"abort"!==e&&v.error(v.DEFAULT_ERROR),this.next.error(t,e,n)},n}(T),P=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.success=function(t,e,n){var r;if(!this.options().skipErrorHandling){if(!n.responseText.length)return this.next.error(n,e,"");if(0===n.responseText.indexOf(W))return r=n.responseText.substr(W.length),this.next.error(n,e,r)}return this.next.success(t,e,n)},n}(T),nt=function(e){function r(){return this._clear_working_msg=n(this._clear_working_msg,this),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.request=function(t){return this.xhr=t,setTimeout(function(t){return function(){return t._request_finished()?void 0:t._should_show_working_msg()?(t._show_working_msg(),t.xhr.done(t._clear_working_msg)):void 0}}(this),4e3),this.next.request(this.xhr)},r.prototype._request_finished=function(){return 4===this.xhr.readyState},r.prototype._should_show_working_msg=function(){return v.isShown()&&v.current()!==l.undo_notification},r.prototype._show_working_msg=function(){return this.notification=v.success(ct("Still working..."))},r.prototype._clear_working_msg=function(){return v.isShown()&&this.notification===v.current()?v.clear():void 0},r}(T),F=function(r){function i(){return this._watch=n(this._watch,this),i.__super__.constructor.apply(this,arguments)}return t(i,r),i.prototype.data=function(){var t,n;return this.job_id=i.generate_job_id(),t=this.next.data(),this.uid=t[h.UID_PARAM_NAME],n=this.options().subject_user,!this.uid&&n&&(this.uid=String(n)),e.extend({job_id:this.job_id},t)},i.prototype.request=function(t){return this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval),this.next.request(t)},i.prototype.success=function(t,e,n){return this.next.success(t,e,n)},i.prototype.error=function(t,e,n){return this.next.error(t,e,n)},i.prototype.complete=function(t,e){return this._stop(),s.Job.handled(this.job_id),this.next.complete(t,e)},i.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},i.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},i.prototype._show_progress_modal=function(){return this._modal_shown?void 0:(this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text))},i.prototype._fetch_progress=function(){var t;return t={},this.uid&&(t[h.UID_PARAM_NAME]=this.uid),E({url:"/job_status/"+this.job_id,data:t,success:function(t,e,n){var r;return r=0===n.responseText.indexOf("done")?"1/1":n.responseText,s.ModalProgress.update(r)},error:function(t){return function(e,n,r){return t._failures++,t._failures<3?void 0:(t._stop(),t.next.error(e,n,r))}}(this)})},i.generate_job_id=function(){var t,e,n;return t=new Date,n=t.getTime().toString(),e=Math.floor(1e6*Math.random()).toString(),e=("000000"+e).substring(e.length),n+e},i}(T),b=function(e){function r(){return this._watch=n(this._watch,this),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.data=function(){var t,e;return t=this.next.data(),this.uid=t[h.UID_PARAM_NAME],e=this.options().subject_user,!this.uid&&e&&(this.uid=String(e)),t},r.prototype.success=function(t,e,n){return this._is_async_job_response(n)?(this.job_id=n.responseText.split(":")[1],this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval)):this.next.success(t,e,n)},r.prototype.complete=function(t,e){return this._is_async_job_response(t)?void 0:this.next.complete(t,e)},r.prototype._is_async_job_response=function(t){var e,n;return 0!==(null!=(n=t.responseText)?n.indexOf(G):void 0)?!1:(e=t.responseText.split(":")[1],e.match(/^[A-Za-z0-9_\-=]*$/))},r.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},r.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},r.prototype._show_progress_modal=function(){return this._modal_shown?void 0:(this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text))},r.prototype._fetch_progress=function(){var t;return t={},this.uid&&(t[h.UID_PARAM_NAME]=this.uid),Q({url:"/async_task_status/"+this.job_id,data:t,success:function(t){return function(e,n,r){var i,o,a;return a=r.responseText,0===a.indexOf(B)?(s.Job.handled(t.job_id),t._stop(),a=a.substr(B.length),r.responseText=a,t.next.success(a,n,r),t.next.complete(r,n)):0===a.indexOf(W)?(s.Job.handled(t.job_id),t._stop(),i=a.substr(W.length),v.error(i),t.next.error(r,n,i),t.next.complete(r,n)):0===a.indexOf(H)?(s.Job.handled(t.job_id),t._stop(),o=a.substr(H.length),v.error(new m(o)),t.next.complete(r,n)):s.ModalProgress.update(a)}}(this),error:function(t){return function(e,n,r){return t._failures++,t._failures<3?void 0:(t._stop(),t.next.error(e,n,r),t.next.complete(e,n))}}(this)})},r}(T),q=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=d.get_uri().getQuery()[U],!(null!=(n=this.next.data())?n.oref:void 0)&&t?e.extend({oref:t},this.next.data()):this.next.data()},r}(T),C=function(r){function i(){this.browser_unload_handler=n(this.browser_unload_handler,this),i.__super__.constructor.apply(this,arguments),this.is_browser_unloading=!1}return t(i,r),i.prototype.browser_unload_handler=function(){this.is_browser_unloading=!0},i.prototype.request=function(t){var n;return e(window).on("beforeunload",this.browser_unload_handler),(n=this.next).request.apply(n,arguments)},i.prototype.error=function(t,e,n){var r,i,o;return r=0===t.status&&0===t.readyState&&"error"===e&&!n,i=r&&this.is_browser_unloading,i?this.next.error(t,"abort","unload"):(o=this.next).error.apply(o,arguments)},i.prototype.complete=function(){var t;return e(window).off("beforeunload",this.browser_unload_handler),(t=this.next).complete.apply(t,arguments)},i}(T),ut=[C],y=[tt,k,S,N],D=[nt],R=[O,L,A,Y,j],$=[b],it=[].concat(ut,D,et,R,y,$),at=function(t){return null==t&&(t={}),J(t,it)},lt=function(t){return null==t&&(t={}),J(t,[].concat(q,it))},I=[].concat(ut,D,P,R,y,$),M=function(t){return null==t&&(t={}),J(t,I)},ot=[].concat(ut,D,et,R,y,F,$),st=function(t){return null==t&&(t={}),J(t,ot)},E=function(t){return null==t&&(t={}),J(t,[].concat(ut,R,y))},X=[tt,k,N],z=[].concat(ut,R,X),Q=function(t){return null==t&&(t={}),J(t,z)},Z=function(t){return null==t&&(t={}),J(t,[].concat(q,z))},rt=function(t){var n,r,i;return null==t&&(t={}),n=new x(t),r=_t(n,y),i=e.ajax({url:r.url(),type:"OPTIONS",data:r.data(),success:function(t,e,n){return r.success(t,e,n)},error:function(t,e,n){return r.error(t,e,n)},complete:function(t,e){return r.complete(t,e)}}),r.request(i)},K=function(t){var e,n,r,i,o,s,a,l;if(null==t&&(t={}),delete t.success,delete t.error,delete t.complete,null==navigator.sendBeacon)return Q(t);null==t.type&&(t.type="POST"),e=new x(t),n=_t(e,[].concat(X,Y)),a=n.url(),r=new FormData,o=n.data();for(i in o)l=o[i],null!=l&&""!==l&&r.append(i,l);return s=navigator.sendBeacon(a,r),s?void 0:console.warn("Beacon request failed: "+a)},ht={Request:J,BackgroundRequest:E,SilentBackgroundRequest:Q,SilentBackgroundRequestOref:Z,WebRequest:at,WebRequestOref:lt,FormWebRequest:M,WebProgressRequest:st,ValidationSchemaRequest:rt,SilentBackgroundBeaconRequest:K}})}).call(this),function(){define("modules/clean/analytics",["jquery","modules/clean/viewer","modules/clean/ajax","modules/clean/web_timing_logger"],function(t,e,n,r){var i,o,s,a,l,u,c,_,h,d,p,f,m,g,v,w,y,b,E,x,S,k,C,T;return T=function(t){var n,r,i;return i=e.get_viewer(),n=t?[t]:function(){var t,e,n,o;for(n=i.get_users(),o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push(r.id);return o}()},i={log:function(t,e){var r,i,o,s,a;for(o=0,s=0,a=t.length;a>s;s++)r=t[s],r.dir&&o++;return i=t.length-o,n.SilentBackgroundRequest({url:"/browse_actions_context_menu_logger",data:{file_count:i,folder_count:o,action:e}})}},a={log:function(t,e){return n.SilentBackgroundRequest({url:"/content_manager_actions_logger",data:{ns_id:t,action:e}})}},E={log:function(t,e){return n.SilentBackgroundRequest({url:"/log/ux_analytics",data:{event_type:t,extra_params:JSON.stringify(e)}})}},p={log:function(t,e){return n.SilentBackgroundRequest({url:"/log/pro_events",data:{event:t,extra:JSON.stringify(e)}})}},l={start_time:0,start:function(t){return null==t&&(t=null),this.start_time?void 0:this.start_time=t||Date.now()},stop:function(t){return this.start_time?t.extra.time_taken=Date.now()-this.start_time:t.extra.time_taken=0,this.log(t),this.start_time=0},log:function(t){return n.SilentBackgroundRequest({url:"/log/file_view",data:{viewing_user_ids:JSON.stringify(T(t.user_id)),target:t.target,platform:t.platform,origin:t.origin||null,action:t.action||null,ns_id:t.ns_id,sjid:t.sjid,ns_path:t.ns_path,shared_link_url:t.shared_link_url||null,extra:JSON.stringify(t.extra)}})}},c={log:function(t,e,r,i,o,s){return null==s&&(s={}),n.SilentBackgroundRequest({url:"/linkfile_activity_log",data:{event_name:t,file_ext:e,link_domain:r,success:i,source:o,extra:JSON.stringify(s)}})}},h={start_times:{},start:function(t,e){return null==e&&(e=null),this.start_times[t]=e||Date.now()},stop:function(t,e){return null!=this.start_times[t]?(e.total_time=Date.now()-this.start_times[t],this.log(t,e),delete this.start_times[t]):void 0},log:function(t,e){return null==e&&(e={}),n.SilentBackgroundRequest({url:"/preview_activity_log",data:{event_name:t,input_method:e.input_method,file_ext:e.file_ext,extra:e.extra}})}},_={log:function(t,e,r,i,o,s){return null==s&&(s={}),n.SilentBackgroundRequest({url:"/log/mobile_file_preview",data:{client_time:+new Date,event_name:t,file_viewer_session_id:e,file_preview_session_id:r,file_ns_id:i,file_sjid:o,extra:JSON.stringify(s)}})}},d={log:function(t,e,r,i,o,s){return n.SilentBackgroundRequest({url:"/preview_quality_popup_logger",subject_user:e,data:{event_name:t,file_nsid:r,file_sjid:i,extension:o,feedback_text:s}})}},f={create_completion_log_dict:function(t,e,n,r,i,o,s,a,l,u){return null==t&&(t=null),null==e&&(e=null),null==n&&(n=null),null==r&&(r=null),null==i&&(i=null),null==o&&(o=null),null==s&&(s=null),null==a&&(a=null),null==l&&(l=null),null!=t?(null!=e&&(t.used_spellcorrect=e),null!=n&&(t.request_id=n),null!=r&&(t.latency=(new Date).getTime()-r),null!=i&&(t.query_string=i),null!=o&&(t.displayed=o),null!=s&&(t.result_count=s),null!=a&&200!==a&&(t.failure_type=a),null!=l&&(t.file_nsid=l.ns_id,t.file_sjid=l.sjid),t):void 0},log:function(t,e,r){return null==r&&(r={}),n.SilentBackgroundRequest({url:"/searchclientlogger",subject_user:e,data:{event_name:t,action_type:r.action_type,displayed:r.displayed,failure_type:r.failure_type,file_nsid:r.file_nsid,file_sjid:r.file_sjid,firefly:r.firefly,infinite_scroll:r.infinite_scroll,latency:r.latency,match_type:r.match_type,path_scoped:r.path_scoped,position:r.position,query_string:r.query_string,request_id:r.request_id,result_count:r.result_count,search_type:r.search_type,used_spellcorrect:r.used_spellcorrect,viewport:r.viewport}})}},g={flow_id:null,log:function(t,e,r,i,o){var s;return null==r&&(r=null),null==i&&(i={}),null==o&&(o=!1),(o||null===this.flow_id)&&(s=new Date,this.flow_id=s.getTime().toString()+Math.random().toString(),this.flow_id=this.flow_id.replace(".","")),n.SilentBackgroundRequest({url:"/sflogger",data:{platform:t,event_name:e,extra:JSON.stringify(i),active_uid:null!=r?r.id:null,flow_id:this.flow_id}})}},m={log:function(t,e,r,i){return null==i&&(i={}),n.SilentBackgroundRequest({url:"/share_tib_log",data:{event:e,origin:r,extra:JSON.stringify(i)},subject_user:t})},log_unauth:function(t,e,r){return null==r&&(r={}),n.SilentBackgroundRequest({url:"/share_tib_log_unauth",data:{event:t,origin:e,extra:JSON.stringify(r)}})}},v={log:function(t,e,r){return null==r&&(r={}),n.SilentBackgroundRequest({url:"/log/sharing_experiments",data:{action_type:e,action_extras:JSON.stringify(r)},subject_user:t})}},w={TARGET_ITEMS:{FOLDER_IS_SF:"folder-is-sf",FOLDER_CAN_SF:"folder-can-sf",FOLDER_NO_SF:"folder-no-sf",FILE:"file"},log:function(t,e,r){return new n.SilentBackgroundRequest({url:"/shmuilog",data:{evt:t,origin:e,target_item:r}})},log_with_target_file:function(t,e,n){return this.log(t,e,this.get_target_item(n))},get_target_item:function(t){var e;return e=w.TARGET_ITEMS,t.dir?t.is_shared_folder()?e.FOLDER_IS_SF:t.could_be_shared_folder()?e.FOLDER_CAN_SF:e.FOLDER_NO_SF:e.FILE}},b={LOG_CATEGORY:{PROMO_TEAMS:"promo_teams",TEAM_INFO:"team_info",UPGRADE:"upgrade_to_dfb",USAGE_INFO:"usage_info",LIMITED_TEAM_INFO_DETAILED:"limited_team_info_detailed"},log:function(t,e,r,i,o,s){var a;return null==i&&(i=null),null==o&&(o=!1),a=T(i),n.SilentBackgroundRequest({url:"/teamswalogger",data:{event_name:t,extra:JSON.stringify(e),for_uids:JSON.stringify(a),log_category:s,restricted:o?"1":void 0},success:r?r:void 0,error:r?r:void 0})},log_for_category:function(t,e,n){return this.log(t,n,null,null,null,!1,e)},registerToLogClickEvent:function(e,n,r){return t(e).click(function(t){return function(){return t.log(n,null,null,null,!1,r)}}(this))}},x={start_times:{},start:function(t,e,n){return null==n&&(n=null),this.start_times[e]=n||Date.now()},stop:function(t,e,n,r){return null==r&&(r=null),null!=this.start_times[e]?(n.total_time=Date.now()-this.start_times[e],this.log(t,e,n,r),delete this.start_times[e]):void 0},log:function(t,e,r,i){var o;return null==i&&(i=null),r=r||{},o=T(i),n.SilentBackgroundRequest({url:"/ualogger",data:{platform:t,event_name:e,extra:JSON.stringify(r),for_uids:JSON.stringify(o)}})}},S={log:function(t,e,r,i){return n.SilentBackgroundRequest({url:"/virallogger",data:{user_ids:JSON.stringify(t),viral_type:e,action:r,extra:JSON.stringify(i||{})}})}},k={log:function(t,e,r){var i;return null==r&&(r=null),i=T(r),n.SilentBackgroundRequest({url:"/misclogger",data:{event_name:t,extra:JSON.stringify(e),for_uids:JSON.stringify(i)}})}},y={_log:function(t,e){return null==e&&(e={}),n.SilentBackgroundRequest({url:"/support_experiments_log",data:{event_name:t,extra:JSON.stringify(e)}})},log_file_restore:function(t){return this._log("file_restore",{ref:t})}},s=s=function(){function t(t,e){this.context=null!=t?t:null,this.search_mode=null!=e?e:null,this._clear_buffers()}return t.prototype._clear_buffers=function(){return this.selection_buffer=[],this.timing_buffer=[],this.total_searches=0,this.slow_searches=0,this.downloading_time=null,this.downloaded_contacts=null},t.prototype.add_record=function(t){return t.deleted=!1,this.selection_buffer.push(t)},t.prototype.flag_record_as_removed=function(t){var e,n,r,i;for(i=this.selection_buffer,n=0,r=i.length;r>n;n++)if(e=i[n],e.contact_id===t&&!e.deleted)return void(e.deleted=!0)},t.prototype.add_timing_record=function(t){return this.timing_buffer.push(t)},t.prototype.count_search=function(t){return this.total_searches+=1,t?this.slow_searches+=1:void 0},t.prototype.add_downloading_stats=function(t){return t?(this.downloading_time=t.downloading_time,this.downloaded_contacts=t.num_contacts):void 0},t.prototype.log_records=function(t,e,r){var i,o;return null==r&&(r=0),i={events:JSON.stringify(this.selection_buffer),canceled:e},(this.total_searches||this.timing_buffer.length)&&(o={context:this.context,search_mode:this.search_mode,total_searches:this.total_searches,slow_searches:this.slow_searches,downloading_time:this.downloading_time,downloaded_contacts:this.downloaded_contacts},i.total_contacts=r,i.timing_events=JSON.stringify(this.timing_buffer),i.session_summary=JSON.stringify(o)),n.SilentBackgroundRequest({url:"/contact_search_log",subject_user:t,data:i}),this._clear_buffers()},t}(),o={log:function(t){return n.SilentBackgroundRequest({url:"/comments_vortex_log",data:{event_name:t}})}},u={log:function(t){return n.SilentBackgroundRequest({url:"/legacy_sharing_vortex_log",data:{event_name:t}})}},C={BrowseActionsContextMenuLogger:i,CommentsVortexLogger:o,LegacySharingVortexLogger:u,ContactSearchLogger:s,UXAnalyticsLogger:E,ContentManagerActionsLogger:a,ProEventsLogger:p,FileViewLogger:l,LinkfileActivityLogger:c,MobileFilePreviewLogger:_,PreviewQualityPopupLogger:d,PreviewActivityLogger:h,SearchClientActivityLogger:f,SharedFolderActivityLogger:g,ShareTibEventLogger:m,SharingExperimentsLogger:v,ShmodelUILogger:w,SupportExperimentsWebLogger:y,TeamsWebActionsLogger:b,UserActivityLogger:x,ViralLogger:S,WebMiscActivityLogger:k},INLINE_JS.ShmodelUILogger=w,C})}.call(this),function(){define("modules/clean/base64",[],function(){var t,e,n,r;return r=function(t){var e,n,r,i,o,s;for(s=[],o=0,e=0,n=0,r=0,i=0,t+="";o<t.length;)n=t.charCodeAt(o),128>n?(s[e++]=String.fromCharCode(n),o++):n>191&&224>n?(r=t.charCodeAt(o+1),s[e++]=String.fromCharCode((31&n)<<6|63&r),o+=2):(r=t.charCodeAt(o+1),i=t.charCodeAt(o+2),s[e++]=String.fromCharCode((15&n)<<12|(63&r)<<6|63&i),o+=3);return s.join("")},e=function(t){var e,n,r,i,o,s,a,l,u,c,_,h,d,p;if(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=void 0,_=void 0,h=void 0,o=void 0,s=void 0,a=void 0,l=void 0,r=void 0,u=0,e=0,i="",p=[],!t)return t;for(;;)if(c=t.charCodeAt(u++),_=t.charCodeAt(u++),h=t.charCodeAt(u++),r=c<<16|_<<8|h,o=r>>18&63,s=r>>12&63,a=r>>6&63,l=63&r,p[e++]=n.charAt(o)+n.charAt(s)+n.charAt(a)+n.charAt(l),!(u<t.length))break;return i=p.join(""),d=t.length%3,(d?i.slice(0,d-3):i)+"===".slice(d||3)},t=function(t,e){var n,i,o,s,a,l,u,c,_,h,d,p,f,m,g;if(d=function(t){return t},a=e?d:r,"function"==typeof window.atob)return a(window.atob(t));if(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,n=0,g=[],!t)return t;for(t+="";;)if(l=i.indexOf(t.charAt(h++)),u=i.indexOf(t.charAt(h++)),c=i.indexOf(t.charAt(h++)),_=i.indexOf(t.charAt(h++)),o=l<<18|u<<12|c<<6|_,p=o>>16&255,f=o>>8&255,m=255&o,64===c?g[n++]=String.fromCharCode(p):64===_?g[n++]=String.fromCharCode(p,f):g[n++]=String.fromCharCode(p,f,m),!(h<t.length))break;return s=g.join(""),s=a(s)},n={encode:e,decode:t}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/captcha",["jquery","external/react","external/react-dom","modules/clean/ajax","modules/clean/react/recaptcha_challenge","modules/core/notify"],function(e,n,r,i,o,s){var a,l;return l=n.createElement,a=function(){function n(e,n,r,i,o,s,a){var l;this.parent_form=e,this.captcha_div=n,this.other_recaptcha_div=r,this.endpoint=i,this.email_name=o,this.variant=s,this.is_v2=a,this.captcha_display_handler=t(this.captcha_display_handler,this),this._hide_other_captcha=t(this._hide_other_captcha,this),this._hide_captcha_v2=t(this._hide_captcha_v2,this),this._hide_captcha=t(this._hide_captcha,this),this._show_captcha_v2=t(this._show_captcha_v2,this),this._show_captcha=t(this._show_captcha,this),this.$recaptcha_container=null!=(l=this.parent_form.find(this.captcha_div))?l[0]:void 0,this.$recaptcha_react_component=null}return n.prototype._show_captcha=function(t,e){var n,i;return null==(null!=(i=this.$recaptcha_container)?i.children:void 0)&&(this.$recaptcha_react_component=null),null==this.$recaptcha_react_component?(n=l(o,{public_key:t,variant:this.variant,error:e}),this.$recaptcha_react_component=r.render(n,this.$recaptcha_container)):this.$recaptcha_react_component.reload(e)},n.prototype._show_captcha_v2=function(t,n){return e("#"+this.captcha_div).parent().show(),e("#"+this.captcha_div).children().length?"undefined"!=typeof grecaptcha&&null!==grecaptcha?grecaptcha.reset():void 0:"undefined"!=typeof grecaptcha&&null!==grecaptcha?grecaptcha.render(this.captcha_div,{sitekey:t}):void 0},n.prototype._hide_captcha=function(){var t;return null==(null!=(t=this.$recaptcha_container)?t.children:void 0)&&(this.$recaptcha_react_component=null),null!=this.$recaptcha_react_component?(r.unmountComponentAtNode(this.$recaptcha_container),this.$recaptcha_react_component=null):void 0},n.prototype._hide_captcha_v2=function(){return e("#"+this.captcha_div).parent().hide()},n.prototype._hide_other_captcha=function(){var t;return t=e(this.other_recaptcha_div)[0],null!=(null!=t?t.children:void 0)?r.unmountComponentAtNode(t):void 0},n.prototype.captcha_display_handler=function(t){return i.WebRequest({url:this.endpoint,data:{email:this.parent_form.find("input[name='"+this.email_name+"']").val()},success:function(e){return function(n){var r,i,o;try{return o=JSON.parse(n),o.needs_captcha?(e._hide_other_captcha(),e.is_v2?e._show_captcha_v2(o.recaptcha_v2_public_key,t):e._show_captcha(o.recaptcha_public_key,t)):e.is_v2?e._hide_captcha_v2():e._hide_captcha()}catch(t){return r=t,s.error(s.DEFAULT_ERROR)}}}(this)})},n}()})}.call(this),function(){define("modules/clean/cookie_check",["jquery","modules/core/cookies","modules/core/notify","modules/core/i18n"],function(t,e,n,r){var i;return i=r._,{initialize_module:function(r){return e.are_enabled()?void 0:t(function(){return n.error(i("Please enable browser-cookies to use the Dropbox website."))})}}})}.call(this),function(){define("modules/clean/crypto",["external/sjcl"],function(t){var e;return e={},e.getRandomValues=function(e){var n,r,i,o;for(o=t.random.randomWords(e.length),n=r=0,i=e.length;i>=0?i>r:r>i;n=i>=0?++r:--r)e[n]=o[n];return e},e})}.call(this),function(){define("modules/clean/css",["jquery","external/rsvp","modules/clean/static_urls","modules/constants/page_load","modules/core/exception","modules/core/uri"],function(t,e,n,r,i,o){var s,a,l,u,assert,c,_,h,d,p,f,m,g,v,w,y,b;s=e.Promise,b=n.static_url,assert=i.assert,c={"/static/css/packaged/components-vflTUmOFV.css":["/static/css/components/bubble_dropdown-vflTPbDJ3.css","/static/css/components/bubble_picker-vflN49sh3.css","/static/css/components/button-vflQd_sRP.css","/static/css/components/checkbox-vfl89WPlN.css","/static/css/components/column-headers-vflwQf9xT.css","/static/css/components/input-vflu6Lzih.css","/static/css/components/input_helpers-vfl1B2M2Y.css","/static/css/components/list_menu-vfltM8jWK.css","/static/css/components/loading_indicator-vflbadB1S.css","/static/css/components/locale_selector-vflRu24eh.css","/static/css/components/login_form-vflDBiG6V.css","/static/css/components/login_or_register-vflCHQ77B.css","/static/css/components/phone_number-vfl7fjF60.css","/static/css/components/select_input-vfl2lF1w1.css","/static/css/components/slider-vflbeTc0k.css","/static/css/components/sprite-div-vflfVxe3h.css","/static/css/components/tabs-vflVBuar6.css","/static/css/components/tooltip-vflnF5ZlX.css"]},u={};for(v in c)for(h=c[v],d=0,f=h.length;f>d;d++)_=h[d],u[_]=v;for(l={},a={},y=t('link[rel="stylesheet"]'),p=0,m=y.length;m>p;p++)g=y[p],w=o.parse(t(g).attr("href")).path,r.IS_PROD||(w=w.replace(/-vfl[\w-]*/,"")),l[w]=s.resolve(),a[w]=!0;return{css_url:function(t){return'url("'+String(t).replace("\\","\\\\").replace('"','\\"')+'")'},require_css:function(t,e,n){var r,i;return assert(0===t.indexOf("/static/css/"),"invalid static css path: "+t),r=u[t],null!=r&&(t=r),i=l[t],i||(i=l[t]=new s(function(e,n){var r;return r=document.createElement("link"),r.href=b(t),r.rel="stylesheet",r.type="text/css",r.crossorigin="anonymous",r.onload=function(){return a[t]=!0,e()},r.onerror=n,document.head.appendChild(r)})),i.then(e,n)},require_css_multi:function(t,e,n){var r;return r=t.map(function(t){return function(e){return t.require_css(e)}}(this)),s.all(r).then(e,n)},is_loaded:function(t){return t.every(function(t){return assert(0===t.indexOf("/static/css/"),"invalid static css path: "+t),t in a})}}})}.call(this),function(){define("modules/clean/datetime",["modules/constants/viewer","modules/core/exception","modules/core/i18n"],function(t,e,n){var r,i,o,s,a,l,u,c,_,assert,h,d,p,f,m,g,v,w,y,b,E,x,S,k;return assert=e.assert,u=n._,k=n.ungettext,s=1e3,o=60*s,i=60*o,r=24*i,a=7*r,l=365*r,E=[u("January"),u("February"),u("March"),u("April"),u("May"),u("June"),u("July"),u("August"),u("September"),u("October"),u("November"),u("December")],c=[u("Jan"),u("Feb"),u("Mar"),u("Apr"),u("May"),u("Jun"),u("Jul"),u("Aug"),u("Sep"),u("Oct"),u("Nov"),u("Dec")],b=function(t,e){return e?c[t]:E[t]},f=function(t,e){var n;return n=[u("AM"),u("PM")],e.replace(/'[^']*'|y+|M+|d+|h+|k+|K+|H+|m+|s+|S+|a+/g,function(e){var r;switch(e[0]){case"'":return 2===e.length?"'":e.slice(1,-1);case"y":if("yy"===e)return t.getYear()%100;r=t.getFullYear();break;case"M":if(e.length>=3)return b(t.getMonth(),3===e.length);r=t.getMonth()+1;break;case"d":r=t.getDate();break;case"h":r=t.getHours()%12||12;break;case"k":r=t.getHours()%12+1;break;case"K":r=t.getHours()%12;break;case"H":r=t.getHours();break;case"m":r=t.getMinutes();break;case"s":r=t.getSeconds();break;case"S":r=t.getMilliseconds();break;case"a":return n[1*(t.getHours()>=12)]}return r=""+r,r.length<e.length&&(r=("00000000"+r).slice(-1*e.length)),r})},m=function(t,e){var n;return n=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),
f(n,e)},g=function(t){var e,n,r,i,o,s,a;for(s=[86400,3600,60,1],t=isNaN(t)?0:t,e=n=0,r=s.length;r>n;e=++n)if(o=s[e],t>=o){a=parseInt(t/o,10)||0;break}return 1>t&&(a=0),e>=3?i=k("%d sec","%d secs",a).format(a):2===e?i=k("%d min","%d mins",a).format(a):1===e?i=k("%d hour","%d hours",a).format(a):0===e?i=k("%d day","%d days",a).format(a):assert(!1,"Invalid time"),i},p=function(t){var e,n,r;return n=Math.floor(t),0>n&&(n=0),e=function(t){return 10>t?"0"+t:t.toString()},r=":"+e(n%60),n=Math.floor(n/60),r=e(n%60)+r,n=Math.floor(n/60),n>0&&(r=""+n.toString()+":"+r),r},y=function(t,e){return u("%(month)s %(year)s",{comment:"Like Jun 2012"}).format({month:b(t,!0),year:e})},x=function(t,e,n,r){var i,o,s,a;return null==n&&(n=!1),null==r&&(r=!1),n?(i=t.getUTCDate(),o=t.getUTCMonth(),a=t.getUTCFullYear()):(i=t.getDate(),o=t.getMonth(),a=t.getFullYear()),s=b(o,!r),e?u("%(month)s %(date)s, %(year)s",{comment:"Like Jan 15, 2014"}).format({month:s,date:i,year:a}):u("%(month)s %(date)s",{comment:"Like Jan 15"}).format({month:s,date:i})},_=function(t,e){var n,s,c,_,h,d,p;return null==e&&(e=!0),s=Date.now()-Number(t),o>s?u(e?"Just now":"just now"):i>s?(_=Math.floor(s/o),k("%d min ago","%d mins ago",_).format(_)):r>s?(c=Math.floor(s/i),k("%d hour ago","%d hours ago",c).format(c)):30*r>s?(n=Math.floor(s/r),k("%d day ago","%d days ago",n).format(n)):56*r>s?(d=Math.floor(s/a),k("%d week ago","%d weeks ago",d).format(d)):l>s?(h=Math.floor(s/(30*r)),h=Math.max(2,h),h=Math.min(11,h),k("%d month ago","%d months ago",h).format(h)):(p=Math.floor(s/l),k("%d year ago","%d years ago",p).format(p))},v=function(t){var e,n,r,i,s,a;return r=Date.now(),n=r-Number(t),e=new Date(t),r=new Date(r),s=new Date(r.getFullYear(),r.getMonth(),r.getDate()),a=new Date(r.getFullYear(),r.getMonth(),r.getDate()-1),i=f(e,"h:mm a"),o>n?u("just now",{comment:"Like 'You edited just now'"}):t>Number(s)?u("today at %(time)s",{comment:"Like 'You edited today at 3:00 PM'"}).format({time:i}):t>Number(a)?u("yesterday at %(time)s",{comment:"Like 'You edited yesterday at 3:00 PM'"}).format({time:i}):(e=e.getFullYear()===r.getFullYear()?x(e,!1,!1,!0):x(e,!0,!1,!0),u("on %(date)s",{comment:"Like 'You edited on August 20, 2015"}).format({date:e}))},w=function(t,e,n,r,i,o){return null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),null==i&&(i=0),null==o&&(o=0),t.setFullYear(t.getFullYear()+e),t.setMonth(t.getMonth()+n),t.setDate(t.getDate()+r),t.setHours(t.getHours()+i),t.setMinutes(t.getMinutes()+o),t},S=function(){return(new Date).getTime()},h=function(t){var e,n,r,i;return e=new Date,e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),w(e,i=0,r=0,n=t)},d={abbr_month_names:c,ago:_,daysAfterToday:h,format_date:f,format_date_utc:m,format_time:g,formatAudioTime:p,getActingTime:v,increment_date:w,localized_date_format:t.date_format,localized_datetime_format:t.datetime_format,localized_time_format:t.time_format,month_abbr_with_year:y,month_name:b,month_names:E,nice_date_with_month_name:x,time:S}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};define("modules/clean/dbmodal",["jquery","external/jquery_ui","external/keymaster","modules/core/browser","modules/core/controller_helpers","modules/core/dom","modules/core/exception","modules/clean/viewer","modules/constants/viewer"],function(r,i,o,s,a,l,u,c,_){var h,d,p,assert;return assert=u.assert,d=function(){function t(){}return t.__stack=[],t.CLEAR="dbmodal:clear",t.pop=function(e){var n;return null==e&&(e=null),null!=e?t.remove(e):e=t.__stack.pop(),null!=e&&e._hide(),n=t.top(),null!=n?n._show():r(document).trigger(t.CLEAR)},t.push=function(e){var n;return assert(e instanceof h,"must pass in valid DBModal"),t.remove(e),n=t.top(),(null!=n?n.visible:void 0)&&n._hide(),t.__stack.push(e),e._show()},t.top=function(){var e;return e=t.__stack.length,e?t.__stack[e-1]:null},t.remove=function(e){var n,r,i,o,s;for(o=[],s=t.__stack,n=0,r=s.length;r>n;n++)i=s[n],i!==e&&o.push(i);t.__stack=o},t.clear=function(){var e,n,i,o;for(e=n=o=t.__stack.length-1;n>=0;e=n+=-1)i=t.__stack[e],i.visible&&i._hide();return r(document).trigger(t.CLEAR),t.__stack=[]},t.register=function(e,n){return r(document).on(e,n),r(document).on(t.CLEAR,function(){return r(document).off(e,n)})},t.unregister=function(t,e){return r(document).off(t,e)},t.trigger=function(t,e){return r(document).trigger(t,e)},t}(),h=function(){function n(e){var r;this.options=e,this.set_title=t(this.set_title,this),this._hide=t(this._hide,this),this._show=t(this._show,this),this.hide=t(this.hide,this),this.show=t(this.show,this),this.__prefill=t(this.__prefill,this),this.__focus=t(this.__focus,this),this.__unlisten=t(this.__unlisten,this),this.__listen_buttons=t(this.__listen_buttons,this),this.__listen=t(this.__listen,this),this.__overlay_click_handler=t(this.__overlay_click_handler,this),this.__keydown_handler=t(this.__keydown_handler,this),this.__x_click_handler=t(this.__x_click_handler,this),this.__show_modal=t(this.__show_modal,this),this.__clone_modal=t(this.__clone_modal,this),this.format=t(this.format,this),this.on_cancel_button_click=t(this.on_cancel_button_click,this),this.on_confirm_button_click=t(this.on_confirm_button_click,this),this.before_show=t(this.before_show,this),this.element_id=n.add_role_to_id(this.options.element_id,this.options.role),this.$template=n.get_template(this.options.element_id),r=this.$template.find(".db-modal"),0===this.$template.length&&(window.DB_FRAME_BUST?assert(!1,"Missing DBModal element '"+this.element_id+"', probably because this page is being framed by "+window.top.location.host+" and our frame protection has kicked in."):assert(!1,"Missing DBModal pyxl element for '"+this.element_id+"'")),this.options.focus&&("confirm"===this.options.focus?assert(r.find(".confirm-button").length,"DBModal pyxl element is missing a confirm button to focus"):"cancel"===this.options.focus?assert(r.find(".cancel-button").length,"DBModal pyxl element is missing a cancel button to focus"):assert(r.find(this.options.focus).length,"DBModal pyxl element is missing focus element with selector '"+this.options.focus+"'")),null!=this.on_show&&assert("function"==typeof this.on_show,"'on_show' must be a function"),null!=this.before_show&&assert("function"==typeof this.before_show,"'before_show' must be a function"),null!=this.on_hide&&assert("function"==typeof this.on_hide,"'on_hide' must be a function"),null!=this.on_confirm_button_click&&assert("function"==typeof this.on_confirm_button_click,"'on_confirm_button_click' must be a function"),null!=this.on_cancel_button_click&&assert("function"==typeof this.on_cancel_button_click,"'on_cancel_button_click' must be a function"),this.options.vars&&(this.vars=this.options.vars),this.click_out_to_close=!0,this.options.click_out_to_close===!1&&(this.click_out_to_close=!1),this.prev_key_scope=null}return n.KEY_SCOPE="dbmodal",n.__stack=[],n.__DOUBLE_CLICK_MAX_TIME=300,n.get_containing_modal=function(t){var e,r;return r=t.closest(".db-modal-wrapper"),e=a.get_controller(r),e&&assert(e instanceof n,"controller of .db-modal-wrapper must be a DBModal object"),e},n.prototype.before_show=function(t){return null!=this.options.title?this.set_title(this.options.title):void 0},n.prototype.on_confirm_button_click=function(t){return t.preventDefault(),d.pop()},n.prototype.on_cancel_button_click=function(t){return t.preventDefault(),d.pop()},n.prototype.on_show=null,n.prototype.on_hide=null,n.prototype.format=function(t){var n,r;for(n in t)e.call(t,n)&&(r=t[n],this.$modal_window.find(n).text(r));return this},n.prototype.__clone_modal=function(){return this.$modal_window||(this.options.preloaded?(this.$modal_window=r("#"+this.element_id),this.$modal_window.removeClass("db-modal-wrapper--preloaded")):this.$modal_window=a.clone_element(this.$template).attr("id",this.element_id),this.$overlay=this.$modal_window.find(".db-modal-overlay")),a.deprecated_set_controller(this.$modal_window,this),a.bind_controllers(this.$modal_window),this.options.preloaded?void 0:r("body").prepend(this.$modal_window)},n.prototype.__show_modal=function(){return this.$modal_window.show()},n.prototype.__x_click_handler=function(t){return t.preventDefault(),d.clear()},n.prototype.__keydown_handler=function(t){return(27===t.keyCode||8===t.keyCode&&!l.focus_in_input())&&(t.preventDefault(),"function"==typeof this.logger_keydown_close_handler&&this.logger_keydown_close_handler(),d.clear()),l.keepFocusIn(this.$modal_window.find(".db-modal"),t)},n.prototype.__overlay_click_handler=function(t){return t.preventDefault(),this.__last_show_time&&Date.now()<this.__last_show_time+this.constructor.__DOUBLE_CLICK_MAX_TIME?void 0:d.clear()},n.prototype.__listen=function(){return this.click_out_to_close!==!1&&this.$overlay.on("click",this.__overlay_click_handler),this.$db_modal_x=this.$modal_window.find(".db-modal-x"),this.$db_modal_x.on("click",this.__x_click_handler),r(document).on("keydown",this.__keydown_handler),this.__listen_buttons()},n.prototype.__listen_buttons=function(){return null!=this.on_confirm_button_click&&(this.$confirm_button=this.$modal_window.find(".confirm-button"),this.$confirm_button.on("click",this.on_confirm_button_click)),null!=this.on_cancel_button_click?(this.$cancel_button=this.$modal_window.find(".cancel-button"),this.$cancel_button.on("click",this.on_cancel_button_click)):void 0},n.prototype.__unlisten=function(){return this.click_out_to_close!==!1&&this.$overlay.off("click"),this.$db_modal_x.off("click"),r(document).off("keydown",this.__keydown_handler),null!=this.on_confirm_button_click&&this.$confirm_button.off("click"),null!=this.on_cancel_button_click?this.$cancel_button.off("click"):void 0},n.prototype.__focus=function(){var t,e;return t=this.$modal_window.find(".db-modal"),"confirm"===this.options.focus?this.focus_element=t.find(".confirm-button").first():"cancel"===this.options.focus?this.focus_element=t.find(".cancel-button").first():this.options.focus?this.focus_element=t.find(this.options.focus).first():(this.focus_element=t,e=l.getTabbableElementsIn(t),e.length&&(e.length>1&&r(e[0]).is(".db-modal-x")?this.focus_element=e[1]:this.focus_element=e[0])),this.focus_element.focus()},n.prototype.__prefill=function(){var t,e,n,r,i;if(null!=this.options.prefill){e=this.$modal_window.find(".db-modal"),r=this.options.prefill;for(n in r)i=r[n],t=e.find(n).val(i),assert(t,"Element with name '"+n+"' not found")}},n.add_role_to_id=function(t,e){return e?t+"-"+e:t},n.get_template=function(t,e){var i;return i=n.add_role_to_id(t,e),r("#db-modal-"+i)},n.prototype.show=function(t,e){return null==t&&(t=null),null==e&&(e=null),null!=t&&(this.options.focus=t),null!=e&&(this.options.prefill=e),d.push(this)},n.prototype.hide=function(){return this!==d.top()?(d.remove(this),this._hide()):d.pop()},n.prototype._show=function(){return this.visible?void 0:(this.__last_show_time=Date.now(),this.__clone_modal(),"function"==typeof this.before_show&&this.before_show(this.$modal_window),this.__show_modal(),this.__listen(),this.visible=!0,window.key.getScope()!==this.constructor.KEY_SCOPE&&(this.prev_key_scope=window.key.getScope()),window.key.setScope(this.constructor.KEY_SCOPE),r(document).trigger("modalOpened",[1]),l.scroll_lock_document(),"function"==typeof this.on_show&&this.on_show(),this.__prefill(),this.__focus(),this)},n.prototype._hide=function(){return this.visible?(this.__unlisten(),window.key.setScope(this.prev_key_scope),this.$modal_window.remove(),this.visible=!1,this.prev_key_scope=null,r(document).trigger("modalClosed",[1]),l.scroll_unlock_document(),"function"==typeof this.on_hide&&this.on_hide(),this):void 0},n.prototype.set_title=function(t){return this.$modal_window.find(".db-modal-title-text").text(t),this},n}(),p=function(e){function i(e,n){this.user=e,this.__inject_basic_user_properties=t(this.__inject_basic_user_properties,this),this.before_show=t(this.before_show,this),i.__super__.constructor.call(this,n)}return n(i,e),i.prototype.before_show=function(t){return i.__super__.before_show.call(this,t),this.__inject_basic_user_properties(t)},i.prototype.__inject_basic_user_properties=function(t){var e,n;return e=t.find("form"),e.find("input[name='"+_.UID_PARAM_NAME+"']").remove(),n=r('<input type="hidden">').attr({name:_.UID_PARAM_NAME,value:this.user.id}),e.append(n),t.find(".dbmodal-email-placeholder").text(this.user.email)},i}(h),__CONDITIONAL_JS__.DBModalStack=INLINE_JS.DBModalStack=d,{DBModalStack:d,DBModal:h,DBUserModal:p}})}.call(this),function(){define("modules/clean/devtools/perf_hub_action_types",[],function(){var t;return t={},t.ActionTypes={PROFILED_AJAX_LOAD_FINISHED:"PROFILED_AJAX_LOAD_FINISHED",WEB_TIMING_FETCHED:"WEB_TIMING_FETCHED"},t})}.call(this),function(){define("modules/clean/devtools/perf_hub_actions",["modules/clean/flux/dispatcher","modules/clean/devtools/perf_hub_action_types"],function(t,e){var n,r;return n=e.ActionTypes,new(r=function(){function e(){}return e.prototype.add_ajax_profile=function(e){var r,i;return i=e.xhr,r=e.url,t.dispatch({type:n.PROFILED_AJAX_LOAD_FINISHED,data:{xhr:i,url:r}})},e.prototype.add_web_timing_details=function(e){var r;return r=e.details,t.dispatch({type:n.WEB_TIMING_FETCHED,data:{details:r}})},e}())})}.call(this),function(){define("modules/clean/em_string",[],function(){var t;return t=function(){function t(e){return this instanceof t?(this.s=e,this.info=this.widthInfo(),void(this.length=e.length?this.info[this.s.length-1]:0)):new t(e)}return t.em_snippet=function(e,n,r){return null==n&&(n=50),null==r&&(r=.75),new t(e.toString()).snippet(n,r).toString()},t.prototype.widthInfo=function(){var t,e,n,r;for(n={},n[-1]=0,t=e=0,r=this.s.length;r>=0?r>e:e>r;t=r>=0?++e:--e)n[t]=n[t-1]+this.ems(this.s.charAt(t));return n},t.prototype.findSpot=function(t){var e,n,r,i;if(!t)return 0;for(i=0,n=this.s.length;n>=i;)if(r=Math.floor(i/2+n/2),e=this.info[r-1],e>t)n=r-1;else{if(!(t>e))return r;i=r+1}return i>r?i:r},t.prototype.ems=function(e){var n,r,i,o,s;return r=.65,n=1.08,i=.58,o=e.charCodeAt(0),s=t.CODEPOINT_TO_WIDTH[o],s?s/Math.pow(10,t.ACCURACY):o>=768&&879>=o?0:o>=65377&&65500>=o?i:o>=11904&&40911>=o||o>=44032&&55215>=o||o>=4352&&4607>=o||o>=63744&&64255>=o||o>=65280&&65535>=o||o>=131072&&196607>=o?n:r},t.prototype.substr=function(e,n){var r,i;return i=this.findSpot(e),null!=n?(r=this.findSpot(e+n),new t(this.s.substr(i,r-i))):new t(this.s.substr(i))},t.prototype.toString=function(){return this.s},t.prototype.snippet=function(e,n){var r,i,o,s,a;return null==e&&(e=50),null==n&&(n=.75),this.length<=e?this:(e-=t._ELLIPSIS_LENGTH,r=e*n,s=e-r,a=this.length-s,o=this.substr(0,r),i=this.substr(a),new t(o.toString()+"…"+i.toString()))},t.ACCURACY=2,t.CODEPOINT_TO_WIDTH={32:38,33:25,34:42,35:67,36:58,37:92,38:75,39:25,40:33,41:33,42:58,43:58,44:25,45:33,46:25,47:42,48:58,49:58,50:58,51:58,52:58,53:58,54:58,55:58,56:58,57:58,58:25,59:25,60:58,61:58,62:58,63:50,64:100,65:67,66:67,67:67,68:75,69:58,70:58,71:75,72:83,73:33,74:25,75:67,76:58,77:100,78:83,79:83,80:67,81:83,82:67,83:58,84:58,85:75,86:67,87:100,88:67,89:58,90:58,91:33,92:42,93:33,94:58,95:50,96:67,97:58,98:67,99:50,100:67,101:58,102:33,103:58,104:67,105:25,106:25,107:58,108:25,109:100,110:67,111:67,112:67,113:67,114:42,115:50,116:42,117:67,118:58,119:83,120:58,121:58,122:50,123:42,124:58,125:42,126:58,161:25,162:58,163:58,164:58,165:58,166:58,167:58,168:67,169:92,170:42,171:50,172:58,174:92,175:58,176:50,177:58,178:42,179:42,180:67,181:67,182:75,183:25,184:25,185:42,186:42,187:50,188:83,189:83,190:83,191:50,192:67,193:67,194:67,195:67,196:67,197:67,198:92,199:67,200:58,201:58,202:58,203:58,204:33,205:33,206:33,207:33,208:75,209:83,210:83,211:83,212:83,213:83,214:83,215:58,216:83,217:75,218:75,219:75,220:75,221:58,222:67,223:67,224:58,225:58,226:58,227:58,228:58,229:58,230:92,231:50,232:58,233:58,234:58,235:58,236:25,237:25,238:25,239:25,240:67,241:67,242:67,243:67,244:67,245:67,246:67,247:58,248:67,249:67,250:67,251:67,252:67,253:58,254:67,255:58,256:75,257:67,258:75,259:67,260:75,261:67,262:75,263:58,264:75,265:58,266:75,267:58,268:75,269:58,270:83,271:83,272:83,273:75,274:67,275:67,276:67,277:67,278:67,279:67,280:67,281:67,282:67,283:67,284:83,285:75,286:83,287:75,288:83,289:75,290:83,291:75,292:83,293:75,294:92,295:75,296:33,297:33,298:33,299:33,300:33,301:33,302:33,303:33,304:33,305:25,306:67,307:67,308:42,309:33,310:75,311:67,312:67,313:58,314:33,315:58,316:33,317:58,318:42,319:58,320:50,321:67,322:42,323:83,324:75,325:83,326:75,327:83,328:75,329:83,330:83,331:75,332:92,333:67,334:92,335:67,336:92,337:67,338:100,339:100,340:75,341:50,342:75,343:50,344:75,345:50,346:67,347:58,348:67,349:58,350:67,351:58,352:67,353:58,354:75,355:42,356:75,357:42,358:75,359:42,360:83,361:75,362:83,363:75,364:83,365:75,366:83,367:75,368:83,369:75,370:83,371:75,372:100,373:92,374:75,375:58,376:75,377:67,378:67,379:67,380:67,381:67,382:67,383:42,384:75,385:83,386:67,387:75,388:75,389:67,390:75,391:83,392:58,393:83,394:100,395:67,396:75,397:67,398:67,399:75,400:58,401:58,402:75,403:83,404:75,405:100,406:50,407:50,408:75,409:67,410:50,411:67,412:117,413:83,414:75,415:92,416:92,417:75,418:117,419:100,420:75,421:75,422:75,423:67,424:58,425:67,426:58,427:42,428:75,429:42,430:75,431:83,432:75,433:92,434:83,435:75,436:75,437:67,438:67,439:67,440:67,441:58,442:58,443:75,444:75,445:58,446:50,447:67,448:33,449:50,450:50,451:33,452:142,453:142,454:133,455:100,456:92,457:67,458:117,459:117,460:100,461:75,462:67,463:33,464:33,465:92,466:67,467:83,468:75,469:83,470:75,471:83,472:75,473:83,474:75,475:83,476:75,477:67,478:75,479:67,480:75,481:67,482:100,483:100,484:92,485:75,486:83,487:75,488:75,489:67,490:92,491:67,492:92,493:67,494:67,495:58,496:33,497:142,498:142,499:133,500:83,501:75,502:117,503:67,504:83,505:75,506:75,507:67,508:100,509:100,510:92,511:67,512:75,513:67,514:75,515:67,516:67,517:67,518:67,519:67,520:33,521:33,522:33,523:33,524:92,525:67,526:92,527:67,528:75,529:50,530:75,531:50,532:83,533:75,534:83,535:75,536:67,537:58,538:75,539:42,540:58,541:58,542:83,543:75,544:83,545:100,546:92,547:67,548:67,549:67,550:75,551:67,552:67,553:67,554:92,555:67,556:92,557:67,558:92,559:67,560:92,561:67,562:75,563:58,564:67,565:100,566:67,567:33,568:100,569:100,570:75,571:75,572:58,573:58,574:67,575:58,576:58,577:67,578:50,579:75,580:75,581:75,582:75,583:58,584:58,585:25,586:83,587:58,588:75,589:33,590:75,591:58,880:67,881:50,882:67,883:50,884:33,885:33,886:75,887:67,888:108,889:108,890:67,891:58,892:58,893:58,894:42,895:108,896:108,897:108,898:108,899:108,900:67,901:67,902:75,903:42,904:83,905:100,906:58,907:108,908:100,909:108,910:100,911:100,912:42,913:75,914:67,915:58,916:83,917:67,918:67,919:83,920:92,921:33,922:75,923:75,924:100,925:83,926:75,927:92,928:83,929:67,930:108,931:67,932:75,933:75,934:83,935:75,936:83,937:92,938:33,939:75,940:83,941:58,942:75,943:42,944:67,945:83,946:67,947:67,948:67,949:58,950:75,951:75,952:67,953:42,954:67,955:67,956:75,957:67,958:67,959:67,960:92,961:67,962:67,963:75,964:67,965:67,966:92,967:67,968:92,969:100,970:42,971:67,972:67,973:67,974:100,975:108,976:58,977:75,978:75,979:100,980:75,981:92,982:100,983:67,984:92,985:67,986:75,987:58,988:58,989:58,990:67,991:58,992:75,993:92,994:100,995:92,996:75,997:58,998:75,999:58,1e3:75,1001:75,1002:67,1003:67,1004:83,1005:58,1006:50,1007:42,1008:67,1009:67,1010:58,1011:33,1012:92,1013:58,1014:58,1015:67,1016:67,1017:75,1018:100,1019:83,1020:58,1021:75,1022:75,1023:75,1024:67,1025:67,1026:92,1027:58,1028:75,1029:67,1030:33,1031:33,1032:42,1033:108,1034:108,1035:83,1036:75,1037:83,1038:75,1039:83,1040:75,1041:67,1042:67,1043:58,1044:83,1045:67,1046:92,1047:67,1048:83,1049:83,1050:75,1051:83,1052:100,1053:83,1054:92,1055:83,1056:67,1057:75,1058:75,1059:75,1060:83,1061:75,1062:83,1063:75,1064:108,1065:108,1066:75,1067:92,1068:67,1069:75,1070:108,1071:75,1072:67,1073:67,1074:58,1075:58,1076:75,1077:67,1078:83,1079:58,1080:75,1081:75,1082:67,1083:67,1084:83,1085:75,1086:67,1087:75,1088:75,1089:58,1090:58,1091:58,1092:92,1093:67,1094:75,1095:58,1096:92,1097:100,1098:67,1099:83,1100:58,1101:58,1102:92,1103:58,1104:67,1105:67,1106:75,1107:58,1108:58,1109:58,1110:33,1111:33,1112:42,1113:92,1114:92,1115:75,1116:67,1117:75,1118:58,1119:75,1120:100,1121:75,1122:75,1123:67,1124:83,1125:83,1126:75,1127:67,1128:100,1129:92,1130:92,1131:83,1132:117,1133:108,1134:67,1135:67,1136:83,1137:83,1138:92,1139:67,1140:83,1141:67,1142:83,1143:67,1144:133,1145:125,1146:92,1147:67,1148:100,1149:75,1150:100,1151:75,1152:75,1153:58,1154:75,1155:0,1156:0,1157:0,1158:0,1159:108,1160:0,1161:0,1162:83,1163:75,1164:67,1165:58,1166:67,1167:75,1168:58,1169:58,1170:67,1171:58,1172:75,1173:67,1174:100,1175:92,1176:67,1177:58,1178:75,1179:67,1180:83,1181:75,1182:75,1183:67,1184:83,1185:75,1186:83,1187:75,1188:100,1189:83,1190:117,1191:100,1192:92,1193:75,1194:75,1195:58,1196:75,1197:58,1198:75,1199:58,1200:75,1201:58,1202:75,1203:75,1204:100,1205:83,1206:75,1207:67,1208:75,1209:67,1210:75,1211:58,1212:92,1213:75,1214:92,1215:75,1216:33,1217:92,1218:83,1219:75,1220:67,1221:83,1222:67,1223:83,1224:75,1225:83,1226:75,1227:75,1228:58,1229:100,1230:83,1231:25,1232:75,1233:67,1234:75,1235:67,1236:100,1237:100,1238:67,1239:67,1240:75,1241:67,1242:75,1243:67,1244:92,1245:83,1246:67,1247:58,1248:67,1249:58,1250:83,1251:75,1252:83,1253:75,1254:92,1255:67,1256:92,1257:67,1258:92,1259:67,1260:75,1261:58,1262:75,1263:58,1264:75,1265:58,1266:75,1267:58,1268:75,1269:58,1270:58,1271:42,1272:92,1273:83,1274:58,1275:42,1276:75,1277:58,1278:75,1279:58,2026:67,19977:108,65403:58},t._ELLIPSIS_LENGTH=new t("…").length,t}()})}.call(this),function(){define("modules/clean/event_load",[],function(){var t,e,n;return t=function(t){return window.setTimeout(function(){return t.apply(t)},0)},n=function(e){return"complete"===document.readyState?t(e):null!=window.attachEvent?window.attachEvent("onload",e):null!=window.addEventListener?window.addEventListener("load",e,!1):void 0},e={window_load:n}})}.call(this),define("modules/clean/filepath",["require","exports","modules/core/i18n"],function(t,e,n){"use strict";function r(t){return t?("/"!==t.charAt(0)&&(t="/"+t),"/"===t.charAt(t.length-1)?t.substr(0,t.length-1):t):""}function i(t,e){return r(t).toLowerCase()===r(e).toLowerCase()}function o(t,e){t=r(t);var i=t.split("/"),o=i.pop();return o?o:e||n._("Dropbox")}function s(t){return-1===t.indexOf(".")?t:t.split(".").slice(0,-1).join(".")}function a(t){var e=t.split("."),n=t.length>0&&"."===t[0],r=t.indexOf(".")<0;n&&(r=e.length<=2);var i=e.pop();return i&&!r?i.toLowerCase():""}function l(t){return-1===t.indexOf(".")?"":a(t).toLowerCase()}function u(t,n){switch(void 0===n&&(n=e.ICON_SIZES.SMALL),n){case e.ICON_SIZES.LARGE:return t+"_32";default:return t}}function c(t,e){var n=(void 0===e?{}:e).size,r=f[t]||"page_white";return u(r,n)}function _(t,e){var n=(void 0===e?{}:e).size,r=a(t).toLowerCase();return c(r,{size:n})}function h(t){var e=t.split("/").slice(0,-1).join("/");return e||"/"}function d(t,e){var n=p({isInTeamFolderTree:t,hasGoldenGateIconography:e});return"s_web_"+n}function p(t){var n=void 0===t?{}:t,r=n.isShared,i=void 0===r?!1:r,o=n.isDeleted,s=void 0===o?!1:o,a=n.isTeamFolder,l=void 0===a?!1:a,c=n.isInTeamFolderTree,_=void 0===c?!1:c,h=n.isViewOnly,d=void 0===h?!1:h,p=n.hasGoldenGateIconography,f=void 0===p?!1:p,m=n.size,g=void 0===m?e.ICON_SIZES.LARGE:m,v="";l?v="_team":(i||_&&f)&&(v="_user");var w="";d&&""!==v&&(w="_locked");var y="";return s&&(y="_gray"),u("folder"+v+w+y,g)}e.normalize=r,e.paths_are_equal=i,e.filename=o,e.filename_without_extension=s,e.file_extension=a,e.file_extension_for_logging=l;var f={_other:"page_white",log:"page_white",msg:"page_white",sln:"page_white",vcproj:"page_white",txt:"page_white_text",wps:"page_white_text",doc:"page_white_word",docx:"page_white_word",docm:"page_white_word",rtf:"page_white_word",pages:"page_white_word",wpd:"page_white_word",odt:"page_white_word",pdf:"page_white_acrobat",eps:"page_white_acrobat",xls:"page_white_excel",xlsm:"page_white_excel",xlsx:"page_white_excel",xlsb:"page_white_excel",ods:"page_white_excel",csv:"page_white_excel",ppt:"page_white_powerpoint",pptx:"page_white_powerpoint",pptm:"page_white_powerpoint",pps:"page_white_powerpoint",ppsx:"page_white_powerpoint",ppsm:"page_white_powerpoint",odp:"page_white_powerpoint",key:"page_white_keynote",css:"page_white_code",html:"page_white_code",htm:"page_white_code",xml:"page_white_code",php:"page_white_code",c:"page_white_code",h:"page_white_code",rb:"page_white_code",cpp:"page_white_code",java:"page_white_code",js:"page_white_code",json:"page_white_code",cs:"page_white_code",py:"page_white_code",pl:"page_white_code",exe:"page_white_gear",dll:"page_white_gear",app:"page_white_gear",mp3:"page_white_sound",m3u:"page_white_sound",wav:"page_white_sound",m4a:"page_white_sound",wma:"page_white_sound",aif:"page_white_sound",iff:"page_white_sound",mid:"page_white_sound",mpa:"page_white_sound",ra:"page_white_sound",aiff:"page_white_sound",amr:"page_white_sound",ogg:"page_white_sound","3ga":"page_white_sound",aac:"page_white_sound",oga:"page_white_sound",gif:"page_white_picture",png:"page_white_picture",jpg:"page_white_picture",jpeg:"page_white_picture",tiff:"page_white_picture",tif:"page_white_picture",bmp:"page_white_picture",odg:"page_white_picture","3fr":"page_white_picture",ari:"page_white_picture",arw:"page_white_picture",srf:"page_white_picture",sr2:"page_white_picture",bay:"page_white_picture",crw:"page_white_picture",cr2:"page_white_picture",cap:"page_white_picture",eip:"page_white_picture",dcs:"page_white_picture",dcr:"page_white_picture",drf:"page_white_picture",k25:"page_white_picture",kdc:"page_white_picture",dng:"page_white_picture",erf:"page_white_picture",fff:"page_white_picture",iiq:"page_white_picture",mef:"page_white_picture",mos:"page_white_picture",mrw:"page_white_picture",nef:"page_white_picture",nrw:"page_white_picture",orf:"page_white_picture",pef:"page_white_picture",ptx:"page_white_picture",pxn:"page_white_picture",r3d:"page_white_picture",raf:"page_white_picture",rw2:"page_white_picture",raw:"page_white_picture",rwl:"page_white_picture",rwz:"page_white_picture",obm:"page_white_picture",srw:"page_white_picture",x3f:"page_white_picture",svg:"page_white_picture",asf:"page_white_film",avi:"page_white_film",flv:"page_white_film",mov:"page_white_film",mp4:"page_white_film",mkv:"page_white_film",wmv:"page_white_film",mpg:"page_white_film","3gp":"page_white_film","3gpp":"page_white_film",m4v:"page_white_film",vob:"page_white_film",ogv:"page_white_film",gz:"page_white_compressed",tar:"page_white_compressed",rar:"page_white_compressed",zip:"page_white_compressed",tgz:"page_white_compressed",bz2:"page_white_compressed",iso:"page_white_dvd",dmg:"page_white_dvd",ai:"page_white_vector",psd:"page_white_paint",au:"page_white_sound",fla:"page_white_flash",swf:"page_white_flash",url:"page_white_linkfile",webloc:"page_white_linkfile",website:"page_white_linkfile"};e.ICON_SIZES={SMALL:"SMALL",LARGE:"LARGE"},e.extension_icon=c,e.file_icon=_,e.parent_dir=h,e.new_folder_icon=d,e.folder_icon=p}),function(){"use strict";var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("modules/clean/flux/dispatcher",["external/flux","modules/core/exception"],function(e,n){var r,i;return i=!1,new(r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.dispatch=function(t){var e,o;n.assert(!i,"Invariant error: cannot dispatch during dispatch."),n.assert(null!=t.type,"Invariant error: cannot dispatch action without 'type' property."),i=!0;try{"function"==typeof this.dispatch_begin&&this.dispatch_begin();try{return r.__super__.dispatch.call(this,{action:t})}catch(t){return e=t,n.reportException({err:e}),console.error(e)}finally{"function"==typeof this.dispatch_end&&this.dispatch_end()}}finally{i=!1}},r}(e.Dispatcher))})}.call(this),function(){define("modules/clean/form_util/name_parser",[],function(){var t;return t=function(){function t(){}return t.splitFullName=function(t){var e,n,r;return r=t.split(" "),e=r[0],n=r.slice(1).join(" "),[e,n]},t}()})}.call(this),function(){define("modules/clean/gandalf_util",["modules/constants/gandalf"],function(t){var e;return new(e=function(){function e(){}return e.prototype.getGandalfRule=function(e){return t.gandalf[e]},e.prototype.isGandalfInVariant=function(t,e){return null==e&&(e="CONTROL"),this.getGandalfRule(t)===e},e}())})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/header_bubble",[],function(){var e;return e=function(){function e(e,n){this.$element=e,this.options=n,this.hide=t(this.hide,this),this.$element.parent().addClass("active"),this.$element.find(".confirm-button").on("click",this.hide),this.$element.find(".dismiss-button").on("click",this.hide)}return e.prototype.hide=function(t){return"#"===t.target.getAttribute("href")&&t.preventDefault(),this.$element.parent().removeClass("active")},e}()})}.call(this),function(){define("modules/clean/hi_res",["jquery"],function(t){var e;return e=function(){function e(t){var e;this.constructor._show_hi_res()&&(e=t.attr("data-hi-res-no-resize"),this.constructor.set_src(t,t.attr("data-hi-res"),e),this.constructor.set_bg(t,t.attr("data-hi-res-background"),e))}return e.set_src=function(t,e,n){return this._show_hi_res()&&e&&e!==t.attr("src")?this._replace(t,e,!n,this._replace_img):void 0},e.set_bg=function(t,e,n){return this._show_hi_res()?this._replace(t,e,!n,this._replace_background):void 0},e._show_hi_res=function(){return"devicePixelRatio"in window&&window.devicePixelRatio>1},e._replace=function(e,n,r,i){var o;if(n)return o=new Image,o.src=n,t(o).on("load",function(){return i(e,n,r,o.width,o.height)})},e._replace_img=function(t,e,n,r,i){return t.attr("src",e),n?(t.width(r/2),t.height(i/2)):void 0},e._replace_background=function(t,e,n,r,i){var o;return o="url('%(src)s')".format({src:e}),t.css("backgroundImage",o),n?t.css("backgroundSize",r/2+"px "+i/2+"px"):void 0},e}()})}.call(this),function(){define("modules/clean/image_size",[],function(){var t;return t=function(t,e){var n,r,i,o,s,a,l;for(o=[["480x320",480,320],["640x480",640,480],["800x600",800,600],["1024x768",1024,768],["1280x960",1280,960],["1600x1200",1600,1200],["2048x1536",2048,1536]],r=0,s=o.length;s>r;r++)if(a=o[r],i=a[0],l=a[1],n=a[2],l>=t||n>=e)return i;return o[o.length-1][0]},{image_best_fit_size:t}})}.call(this),function(){define("modules/clean/index_2015",["jquery","external/underscore","modules/clean/dbmodal","modules/clean/analytics","modules/clean/register_form"],function(t,e,n,r,i){var o,s;return s=r.UserActivityLogger,o=function(){function r(){var r,o,a;this._onScrollHandler(),t(window).scroll(e.throttle(this._onScrollHandler,33,{leading:!0,trailing:!0})),a=new n.DBModal({element_id:"sign-up-modal"}),t("#sign-up, .sign-up").on("click",function(t){return t.preventDefault(),s.log("","web_register"),a.show()}),o=new n.DBModal({element_id:"index-sign-in-modal",focus:"input[name='login_email']"}),t("#sign-in").on("click",function(t){return t.preventDefault(),o.show(),s.log("","web_login")}),t(document).on(i.USER_EXISTS,function(t){return o.show(t.focus,t.prefill)}),t(".scroll-link").click(function(e){var n,r;return e.preventDefault(),n=t("header").outerHeight(!0)+16,r=t(e.target).data("scroll-target"),t("html, body").animate({scrollTop:t(r).offset().top-n},500)}),t(".get-dropbox-cta-v2__show-modal").length>0&&(r=new n.DBModal({element_id:"pro-plan-modal"}),t(".get-dropbox-cta-v2__show-modal").on("click",function(t){return r.show()}))}return r.prototype._onScrollHandler=function(){return t(window).scrollTop()>350?(t("#dropbox-logo").addClass("fade-out"),t(".button-toggler").addClass("show-sign-up")):(t("#dropbox-logo").removeClass("fade-out"),t(".button-toggler").removeClass("show-sign-up"));
},r}()})}.call(this),define("modules/clean/init_react",["require","exports","modules/core/exception","external/react","external/react-dom"],function(t,e,n,r,i){"use strict";function o(e){for(var o=function(e){t([e.module_name],function(t){var o;o=null!=e.component_name?t[e.component_name]:t;var s=document.getElementById(e.elem_id);try{i.render(r.createElement(o,e.props),s),e.install_hot_reloading_attrs&&(s.isReactRootComponent=!0,s.moduleId=e.module_name,s.reloadModule=function(t,n){var r=t;null!=e.component_name&&(r=t[e.component_name]),n(s,r,e.props)})}catch(t){console.error(t),n.reportException({err:t,exc_extra:{componentDesc:Object.assign({},e,{props:"redacted"}),domElementExists:!!s}})}})},s=0,a=e.components;s<a.length;s++){var l=a[s];o(l)}}e.initialize_module=o}),function(){define("modules/clean/job_progress",["jquery","modules/core/dom"],function(t,e){var n,r,i;return i={make:function(e,n){var r,i,o,s,a,l,u;return null==n&&(n=300),u=n.toString()+"px",o=t("<div />",{class:"outer-progress-bar"}).css({width:u}),r=t("<div />",{class:"inner-progress-bar",id:"pb_"+e}).css({width:u}),a=t("<div />",{class:"under-pb progress-bar"}).css({width:u}),s=t("<div />",{class:"over-pb progress-bar",id:"pb_"+e+"_over"}).css({display:"none"}),l=t("<div />",{class:"pb-percentage",id:"pb_"+e+"_upct"}).css({width:u}),i=t("<div />",{class:"pb-percentage",id:"pb_"+e+"_opct"}).css({width:u}),a.append(l),s.append(i),r.append(a),r.append(s),o.append(r),s.data("progress-width",n),o},set:function(e,n){var r,i,o,s;return(r=t("#pb_"+e+"_over"))?(i=n.split("/").map(Number),n=i.length>1?i[0]/i[1]:i[0],n=isNaN(n)?0:n,o=100*Math.min(n,1),s=String(o)+"%",r.show(),r.css({backgroundColor:"#348DD3",overflow:"hidden",width:s})):void 0}},n={complete:{},handled:function(t){var e;return t?(e=!!n.complete[t],n.complete[t]=!0,e):!1},peek:function(t){return t?!!n.complete[t]:!1}},r={show:function(n){var r,o,s,a,l,u,c,_;if(n&&(null!=(c=__CONDITIONAL_JS__.DBModalStack)&&null!=(_=c.top())&&_.hide(),r=t("body"),o=t("<div />",{id:"modal-progress-overlay"}),o.hide(),o.appendTo(r),t("#browse-box").length?e.clone_position(o,t("#browse-box")):t("#gallery-view-media").length?e.clone_position(o,t("#gallery-view-media")):o.css({position:"fixed",width:"100%",height:"100%"}),o.width()))return l=t("<div />",{id:"modal-progress-content"}),a=t("<div />",{id:"modal-progress-container"}),s=t("<div />",{id:"modal-progress-bar",opacity:1,html:i.make("modal-progress",150,"")}),u=t("<div />",{id:"modal-progress-text",text:n}),l.hide(),a.append(s,u),l.append(a),r.append(l),o.fadeTo(250,.7),l.fadeIn(250)},update:function(t){var e;return e="progress",t.indexOf(e)>-1&&(t=t.substring(e.length),isNaN(t))?void 0:i.set("modal-progress",t)},hide:function(){return t("#modal-progress-overlay").fadeOut(250,function(){return t("#modal-progress-overlay").remove()}),t("#modal-progress-content").fadeOut(250,function(){return t("#modal-progress-content").remove()})}},{ModalProgress:r,Job:n}})}.call(this),function(){define("modules/clean/js_basic_stopwatch",["modules/core/exception","modules/clean/uuid"],function(t,e){var n,r,i;return i=null!=window.performance&&null!=window.performance.now,n=function(){function n(t,e,n){this.stopwatch_name=t,this.strict_assert=e,this.report_span_fn=null!=n?n:null,this._active_spans={}}return n.prototype.reset=function(){return this._active_spans={}},n.prototype.start=function(t,n){var o,s,a,l,u,c;if(s=null!=n?n:{},o=s.parent_name,l=s.start_time,null!=o&&!(o in this._active_spans))return this._report_sw_misuse("parent "+o+" for span "+t+" has not been defined yet"),null;if("number"!=typeof l){if(!i)return null;l=window.performance.now()}return l=Math.round(l),a=e.v4({allowInsecure:!0}),c={name:t,span_id:a,start_time:l,parent_name:null!=o?o:null},u=new r(c),t in this._active_spans||(this._active_spans[t]=[]),this._active_spans[t].push(u),a},n.prototype.end=function(t,e){var n,r,o,s,a,l;if(r=null!=e?e:{},o=r.span_id,n=r.end_time,s=this._find_timer_data_index(t,o),-1===s)return null;if(l=this._active_spans[t],a=l[s],l.splice(s,1),"number"!=typeof n){if(!i)return null;n=window.performance.now()}return n=Math.round(n),n<a.start_time?(this._report_sw_misuse("span "+t+" has set an end_time earlier than start_time"),null):(a.end_time=n,this.report_span_fn&&this.report_span_fn(this.stopwatch_name,a),a.span_id)},n.prototype.timer=function(t,e,n,r){var i,o,s,a;return o=n.parent_name,a=n.start_time,i=n.end_time,s=this.start(t,{parent_name:o,start_time:a}),r.call(e),this.end(t,{span_id:s,end_time:i}),s},n.prototype.add_span_annotation=function(t,e,n,r){var i,o;return null==r&&(r=null),i=this._find_timer_data_index(t,r),-1!==i?(o=this._active_spans[t][i],o.annotations[e]=n):void 0},n.prototype.add_time_annotation=function(t,e,n){var r,o,s;return null==n&&(n=null),o=this._find_timer_data_index(t,n),-1!==o&&(s=this._active_spans[t][o],i)?(r=(Math.round(window.performance.now())-s.start_time).toString(),s.annotations[e]=r):void 0},n.prototype._find_timer_data_index=function(t,e){var n,r,i,o,s;if(!(t in this._active_spans)||0===this._active_spans[t].length)return this._report_sw_misuse("tried to find "+t+" but that span doesn't exist"),-1;if(o=-1,s=this._active_spans[t],e){for(n=r=0,i=s.length-1;i>=0?i>=r:r>=i;n=i>=0?++r:--r)if(s[n].span_id===e){o=n;break}}else o=0;return-1===o&&this._report_sw_misuse("tried to find "+t+" with id "+e+" but that span doesn't exist"),o},n.prototype._report_sw_misuse=function(e){return e="JSBasicStopwatch "+this.stopwatch_name+": "+e,this.strict_assert?t.assert(!1,e):t.raiseAndReport(e,{severity:t.SEVERITY.NONCRITICAL,tags:["log_js_stopwatch"]})},n}(),r=function(){function t(t){var e;e=null!=t?t:{},this.name=e.name,this.span_id=e.span_id,this.start_time=e.start_time,this.end_time=e.end_time,this.parent_name=e.parent_name,this.annotations={}}return t}(),n})}.call(this),function(){define("modules/clean/js_client_stopwatch",["modules/clean/ajax","modules/clean/js_basic_stopwatch","modules/constants/request","modules/constants/page_load","modules/core/exception","modules/core/browser"],function(t,e,n,r,i,o){var s,a;return s=function(){function s(){this.global_sw_name="GLOBAL_STOPWATCH",this.flush_interval=6e4,this._strict_assert=!r.IS_PROD,this._interval_id=null,this.reset()}return s.prototype.reset=function(){return this._stopwatches={},this._log_immediately=!1,this.create_stopwatch(this.global_sw_name),this._stored_aggregates={},this._interval_id&&clearInterval(this._interval_id),this._interval_id=null},s.prototype.reset_individual_stopwatch=function(t){return this.stopwatch_exists(t)?this._stopwatches[t].reset():void this._report_sw_misuse("tried to reset the stopwatch "+t+" but it does not exist")},s.prototype.stopwatch_exists=function(t){return t in this._stopwatches},s.prototype.create_stopwatch=function(t){return this.stopwatch_exists(t)?void this._report_sw_misuse("tried to create a new stopwatch "+t+" but it already exists"):this._stopwatches[t]=new e(t,this._strict_assert,this._report_span_fn.bind(this))},s.prototype.create_stopwatch_if_not_exist=function(t){return this.stopwatch_exists(t)?void 0:this.create_stopwatch(t)},s.prototype.start_span=function(t,e){var n,r,i,o;return r=null!=e?e:{},o=r.stopwatch_name,n=r.parent_name,i=r.start_time,o=o?o:this.global_sw_name,this.stopwatch_exists(o)||this._report_sw_misuse("tried start stopwatch "+o+" but it doesn't exist"),this._stopwatches[o].start(t,{parent_name:n,start_time:i})},s.prototype.end_span=function(t,e){var n,r,i,o;return r=null!=e?e:{},o=r.stopwatch_name,i=r.span_id,n=r.end_time,o=o?o:this.global_sw_name,this.stopwatch_exists(o)||this._report_sw_misuse("tried end stopwatch "+o+" but it doesn't exist"),this._stopwatches[o].end(t,{span_id:i,end_time:n})},s.prototype.timer=function(t,e,n,r){var i,o,s,a;return a=n.stopwatch_name,o=n.parent_name,s=n.start_time,i=n.end_time,a=a?a:this.global_sw_name,this.stopwatch_exists(a)||this._report_sw_misuse("tried time stopwatch "+a+" but it doesn't exist"),this._stopwatches[a].timer(t,e,{parent_name:o,start_time:s,end_time:i},r)},s.prototype.add_span_annotation=function(t,e,n,r){var i,o,s;return i=null!=r?r:{},o=i.span_id,s=i.stopwatch_name,s=s?s:this.global_sw_name,this.stopwatch_exists(s)||this._report_sw_misuse("tried add a span annotation to "+s+" but it doesn't exist"),this._stopwatches[s].add_span_annotation(t,e,n,o)},s.prototype.add_time_annotation=function(t,e,n){var r,i,o;return r=null!=n?n:{},i=r.span_id,o=r.stopwatch_name,o=o?o:this.global_sw_name,this.stopwatch_exists(o)||this._report_sw_misuse("tried add a time annotation to "+o+" but it doesn't exist"),this._stopwatches[o].add_time_annotation(t,e,i)},s.prototype.log_stored_results=function(){return this._log_immediately?(this._report_sw_misuse("ClientStopwatch tried to log stored results, but the stopwatch is set to log immediately"),null):(this._log(),this._log_immediately=!0,this._interval_id=setInterval(this._log.bind(this),this.flush_interval))},s.prototype._report_span_fn=function(t,e){var n,r,i,o,s,a;t in this._stored_aggregates||(this._stored_aggregates[t]={}),a=this._stored_aggregates[t],o=e.parent_name?e.parent_name:"",i=o+"#"+e.name,i in a||(a[i]={name:e.name,start_time:e.start_time,parent:e.parent_name,total_time:0,num_calls:0,annotations:{}}),n=a[i],n.total_time+=e.end_time-e.start_time,n.num_calls+=1,s=[];for(r in e.annotations)s.push(n.annotations[r]=e.annotations[r]);return s},s.prototype._report_sw_misuse=function(t){return t="ClientStopwatch: "+t,this._strict_assert?i.assert(!1,t):i.raiseAndReport(t,{severity:i.SEVERITY.NONCRITICAL,tags:["log_js_stopwatch"]})},s.prototype._log=function(){var e,r;return Object.keys(this._stored_aggregates).length>0?(e=JSON.stringify(this._stored_aggregates),this._stored_aggregates={},r={request_id:n.REQUEST_ID,url:o.get_href(),aggregated_sw_data:e},t.SilentBackgroundRequest({url:"/log_js_sw_data",type:"POST",data:r})):void 0},s}(),a=new s})}.call(this),function(){define("modules/clean/js_environment",[],function(){return{isBrowser:function(){return"undefined"!=typeof window&&null!==window},isTest:function(){return"undefined"!=typeof jasmine&&null!==jasmine}}})}.call(this),function(){define("modules/clean/keycode",[],function(){var t;return t=function(){function t(){}return t.A=65,t.BACKSPACE=8,t.TAB=9,t.ENTER=13,t.SHIFT=16,t.CONTROL=17,t.ALT=18,t.ESC=27,t.SPACE=32,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.INSERT=45,t.DELETE=46,t.TWO_KEY=50,t.EQUALS=61,t.COMMAND=91,t.PLUS_EQUALS_FF=107,t.MINUS_FF=109,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.PLUS_EQUALS_FF_GERMAN=171,t.MINUS_FF_MAC=173,t.PLUS_CHROME=187,t.MINUS_CHROME=189,t.FORWARD_SLASH=191,t.AT_SIGN=64,t.PROCESSING=229,t}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/legacy_pyxl_controllers/ajax_form",["jquery","modules/core/controller_helpers","modules/core/exception","modules/core/html","modules/core/notify","modules/clean/ajax","modules/clean/validators/validators"],function(e,n,r,i,o,s,a){var l,assert;return assert=r.assert,l=function(){function r(e,r,i){this.$container=e,this.do_before_submitting=r,this._clear_pending=t(this._clear_pending,this),this._clear_errors=t(this._clear_errors,this),this._handle_errors=t(this._handle_errors,this),this._on_error=t(this._on_error,this),this._on_success=t(this._on_success,this),this._submit_form=t(this._submit_form,this),this._install_schema=t(this._install_schema,this),this.add_additional_data=t(this.add_additional_data,this),this.additional_data={},i=i||{},"FORM"===this.$container.prop("tagName")?this.$form=this.$container:this.$form=this.$container.find("form"),this.$form.submit(this._submit_form),this.$submit_button=this.$form.find("[type='submit']"),n.deprecated_set_controller(this.$form,this),this.schema={},this.should_validate=i.client_side_validation,this.should_submit_once=i.should_submit_once,this.error_handler="function"==typeof i.error_handler?i.error_handler:!1,this.should_validate&&this._fetch_schema()}return r.SUCCESS_EVENT="db:ajaxform:success",r.ERROR_EVENT="db:ajaxform:error",r.extract_errors=function(t){var e,n,r;if(0!==t.indexOf("err:"))return!1;t=t.substr(4);try{return r=JSON.parse(t)}catch(n){return e=n,"string"==typeof t?t:o.DEFAULT_ERROR}},r.clear_errors=function(t){return t.find(".input-error").removeClass("input-error"),t.find(".error-message").remove()},r.clear_error=function(t,e){var n;return n=t.find("input[name='"+e+"'], input[data-encrypted-name='"+e+"']"),n.removeClass("input-error"),t.find("[data-error-field-name='"+e+"']").prev(".error-message").remove()},r.fill_errors=function(t,n){var r,i,o,s;t.find(".c-card").addClass("u-l-dn"),o=[];for(i in n)s=n[i],r=e("<span>",{class:"error-message"}),s.message_html?r.html(s.message_html):r.text(s.message_text),r.insertBefore(t.find("[data-error-field-name='"+i+"']")),t.find("input[name='"+i+"'], input[data-encrypted-name='"+i+"']").addClass("input-error"),"failed-login-invalid-email-password"===i?o.push(t.find(".c-card").removeClass("u-l-dn")):o.push(void 0);return o},r.prototype.add_additional_data=function(t){return e.extend(this.additional_data,t)},r.prototype._install_schema=function(t){var n,r,i;try{i=JSON.parse(t)}catch(t){n=t}return e.each(i,function(t){return function(e,n){return n?t.schema[e]=a.create(n):void 0}}(this))},r.prototype._fetch_schema=function(){return s.ValidationSchemaRequest({url:this.$form.attr("action"),success:function(t){return function(e){return t._install_schema(e)}}(this)})},r.prototype.reset=function(){var t,n,r,i,o;for(i=this.$form.find("input"),o=[],t=0,r=i.length;r>t;t++)n=i[t],o.push(e(n).closest(".text-input").val(n.defaultValue));return o},r.prototype.set_input_value=function(t,e){return this.$form.find("input[name='"+t+"']").closest(".text-input").val(e)},r.prototype._get_form_data=function(){var t,n,r,i,o,s,a,l,u,c,_;for(t={},u=this.$form.find("input, select, textarea").not(":disabled").not(":radio"),n=0,s=u.length;s>n;n++)r=u[n],l=e(r).attr("name"),l&&(i=e(r).attr("type"),_="checkbox"===i?e(r).prop("checked")?"True":"":e(r).val(),"radio"!==i&&assert(!(l in t),"found multiple inputs with the same name"),t[l]=_);for(c=this.$form.find("input:radio:checked:not(disabled)"),o=0,a=c.length;a>o;o++)r=c[o],l=e(r).attr("name"),t[l]=e(r).val();return t},r.prototype._validate=function(t){var n,r;return this.should_validate?(n={},r=!0,e.each(t,function(e){return function(i,o){var s,a;if(e.schema[i])try{return e.schema[i].validate(o,{field:i,data:t,errors:n})}catch(t){return s=t,r=!1,n[i]={message_text:s.message}}}}(this)),r?null:n):null},r.prototype._submit_form=function(t){var e;return t.preventDefault(),"function"==typeof this.do_before_submitting&&this.do_before_submitting(),this._clear_errors(),this.$form.prop("disabled",!0),this.$form.addClass("ajax-loading"),this.$submit_button.prop("disabled",!0),e=this._validate(this._get_form_data()),e?this._handle_errors(e):this.send_request()},r.prototype.send_request=function(){var t;return t=this._get_form_data(),e.extend(t,this.additional_data),s.FormWebRequest({url:this.$form.attr("action"),data:t,success:this._on_success,error:this._on_error,complete:this._on_complete,skipErrorHandling:!0})},r.prototype._on_success=function(t,e,n){var i,o,s,a,l;if(l=n.responseText,s=r.extract_errors(l),s!==!1)return void this._handle_errors(s);try{a=JSON.parse(l)}catch(t){return i=t,void this._on_error()}return this.$form.trigger(r.SUCCESS_EVENT,a),this._clear_pending(!this.should_submit_once)},r.prototype._on_error=function(){return this.$form.trigger(r.ERROR_EVENT),o.error(),this._clear_pending(!0)},r.prototype._handle_errors=function(t){if(this.error_handler)this.error_handler(t);else{if("string"==typeof t)return o.error(new i(t)),void this._clear_pending(!0);r.fill_errors(this.$form,t)}return this._clear_pending(!0),this.$form.trigger(r.ERROR_EVENT,t)},r.prototype._clear_errors=function(){return this.$form.find(".error-message").remove(),this.$form.find("input").removeClass("input-error")},r.prototype._clear_pending=function(t){return this.$form.removeClass("ajax-loading"),t?(this.$form.prop("disabled",!1),this.$submit_button.prop("disabled",!1)):void 0},r}()})}.call(this),function(){define("modules/clean/legacy_pyxl_controllers/animation",["jquery"],function(t){var e;return e=function(){function e(e){this.id=e.id,this.animationQueue=e.animationQueue,this.$el=t("#"+this.id),this.$strip=this.$el.find(".animator-strip"),this.implementationWidth=null,this.imageLoadCount=0,this.animationQueue=function(){return t.grep(arguments[0],function(t){return""!==t&&null!==t})}(this.animationQueue),this.imagesInit(),this.$strip.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd OAnimationEnd animationend",this.onAnimationEnd)}var n;return e.prototype.onAnimationEnd=function(e){return n(),t(this).removeClass("intro-animation").addClass("loop-animation"),!0},n=function(){var e,n,r;return e=t(".animator-poster").width(),n=t(".animator-frame--intro").width(),r=n-e,t(".animator-frame--intro").css("transform","translateX(-"+r+"px)")},e.prototype.setAnimationLoadClass=function(){var t;return this.imageLoadCount++,t="loop-animation",2===this.animationQueue.length&&(t="intro-animation"),this.imageLoadCount===this.animationQueue.length?this.$strip.addClass("loaded "+t):void 0},e.prototype.rescale=function(){var t,e;return this.implementationWidth||(this.implementationWidth=parseInt(this.$el.data("implementation-width"))),t=this.$el.parent().innerWidth(),t<this.implementationWidth?(e=t/this.implementationWidth,this.$el.css({transform:"scale("+e+") translateY(-"+10*e+"%)","-webkit-transform":"scale("+e+") translateY(-"+10*e+"%)","transform-origin":"bottom left"})):void 0},e.prototype.imagesInit=function(){var e,n;return n=this,e=this.$strip,this.$el.data("scale-down")===!0&&(t(window).resize(function(){return n.rescale()}),n.rescale()),e.find("img").each(function(e,r){return t(r).data("src")&&(t(r).on("load",function(){return n.setAnimationLoadClass()}),t(r).attr("src",t(r).data("src")),t(r).prop("complete"))?n.setAnimationLoadClass():void 0})},e}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/legacy_pyxl_controllers/bubble_dropdown",["jquery","external/jquery_ui","external/underscore","modules/clean/keycode"],function(e,n,r,i){var o;return o=function(){function n(i,o,s,a,l,u,c){var _,h;this.$root=i,this.arrow_direction=o,this.show_on_hover=s,this.show_close_button=a,this.shown_by_default=l,this.top_adjustment=null!=u?u:0,this.tabindex=c,this._hide_bubble=t(this._hide_bubble,this),this._show_bubble=t(this._show_bubble,this),this._toggle_bubble=t(this._toggle_bubble,this),this._on_global_hover=t(this._on_global_hover,this),this._on_mouseout=t(this._on_mouseout,this),this._on_mouseover=t(this._on_mouseover,this),this._onDropdownKeydown=t(this._onDropdownKeydown,this),this._onTargetKeydown=t(this._onTargetKeydown,this),this._activateNonButton=t(this._activateNonButton,this),this.repositionDropdown=t(this.repositionDropdown,this),this.openDropdown=t(this.openDropdown,this),this.closeDropdown=t(this.closeDropdown,this),this.$target=this.$root.find(".bubble-dropdown-target"),this.$dropdown=this.$root.find(".bubble-dropdown"),this.$arrow_anchor=this.$root.find(".bubble-dropdown-arrow-anchor"),this.$arrow=this.$dropdown.find(".bubble-arrow"),this.target_position={top:"bottom",left:"right",bottom:"top",right:"left"}[this.arrow_direction],this.$target.on("keydown",this._onTargetKeydown),this.$dropdown.on("keydown",this._onDropdownKeydown),this.$target.attr("aria-expanded",!1),this.show_close_button?this.$root.find(".bubble-dropdown-x").on("click",this.closeDropdown):this.show_on_hover?(this.$target.on("mouseover",this._on_mouseover),this.$dropdown.on("mouseover",this._on_mouseover),this.$target.on("mouseout",this._on_mouseout),this.$dropdown.on("mouseout",this._on_mouseout),this.$target.attr("tabindex",0).on("focus",this._show_bubble),0===this.$dropdown.find(this._focus_selectors).length&&(_=r.uniqueId("bubble-dropdown-tooltip-"),this.$dropdown.attr({id:_,role:"tooltip"}),this.$target.attr("aria-describedby",_)),e(document).on(n.HOVER_SHOWN,this._on_global_hover)):(this.$target.click(this._toggle_bubble),h=0,this.tabindex&&(h=this.tabindex),"BUTTON"!==this.$target.get(0).tagName&&this.$target.attr({role:"button",tabindex:h}).on("keyup",this._activateNonButton),e("body").on("click",function(t){return function(n){var r;return e(n.target).is("select")?!0:(r=e(n.target).closest(t.$target).length||e(n.target).closest(t.$dropdown).length,r||t._hide_bubble(),!0)}}(this))),this.shown_by_default&&this.openDropdown()}return n.HOVER_SHOWN="bubble:hover:shown",n.prototype._dropdown_shown=!1,n.prototype._focus_selectors="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",n.prototype.closeDropdown=function(){return this._dropdown_shown?this._hide_bubble():void 0},n.prototype.openDropdown=function(){return this._dropdown_shown?void 0:this._show_bubble()},n.prototype.repositionDropdown=function(){return this._dropdown_shown?this._show_bubble():void 0},n.prototype._activateNonButton=function(t){var e;return(e=t.keyCode)===i.ENTER||e===i.SPACE?(this._toggle_bubble(),!1):void 0},n.prototype._onTargetKeydown=function(t){return(t.keyCode===i.ESC&&!this.show_on_hover||t.keyCode===i.TAB&&t.shiftKey||t.keyCode===i.TAB&&1===this.$root.find(this._focus_selectors).length)&&this._hide_bubble(),!0},n.prototype._onDropdownKeydown=function(t){var e;return this.show_on_hover||t.keyCode!==i.ESC?t.keyCode!==i.TAB||t.shiftKey||(e=this.$root.find(this._focus_selectors),t.target===e[e.length-1]&&this._hide_bubble(!this.show_on_hover)):this._hide_bubble(!0),!0},n.prototype._on_mouseover=function(){return e(document).trigger(n.HOVER_SHOWN,this.$target),this._show_bubble(),clearTimeout(this.$dropdown.data("timeout_id"))},n.prototype._on_mouseout=function(){var t;return t=setTimeout(this._hide_bubble,200),this.$dropdown.data("timeout_id",t)},n.prototype._on_global_hover=function(t,e){return this._dropdown_shown&&e!==this.$target?(this._hide_bubble(),clearTimeout(this.$dropdown.data("timeout_id"))):void 0},n.prototype._toggle_bubble=function(){return this._dropdown_shown?this._hide_bubble():this._show_bubble(),!0},n.prototype._show_bubble=function(){var t,e,n,r,i,o;if(!this.$target.hasClass("disabled")){switch(this.$dropdown.show(),o=this.$arrow.outerWidth(),e=this.$arrow.outerHeight()-this.top_adjustment,i=this.$arrow.position().top,n=this.$arrow.position().left,this.arrow_direction){case"left":t="left+"+o+"px top-"+i+"px";break;case"right":t="right-"+o+"px top-"+i+"px";break;case"top":t="left-"+n+"px top+"+e+"px";break;case"bottom":t="left-"+n+"px bottom-"+e+"px"}return r={my:t,at:this.target_position,of:this.$arrow_anchor.length?this.$arrow_anchor:this.$target,collision:"none"},this.$dropdown.position(r),this._dropdown_shown=!0,this.$target.addClass("bubble-dropdown-target--active").attr("aria-expanded",!0)}},n.prototype._hide_bubble=function(t){return this.$dropdown.hide(),this._dropdown_shown=!1,this.$target.removeClass("bubble-dropdown-target--active").attr("aria-expanded",!1),t?this.$target.focus():void 0},n}()})}.call(this),function(){define("modules/clean/legacy_pyxl_controllers/expanding_section",["jquery","modules/clean/analytics"],function(t,e){var n;return n=function(){function n(e,n,r,i,o){this.$parent=t("#"+e),n&&(this.$scrollElement=t(""+n)),this.scrollElementOffset=r||0,this.expandingSectionAnalyticsId=i,this.defaultOffset=95,this.toggledState=!1,o?this.$toggleButton=t(o):this.$toggleButton=this.$parent.find(".expanding-section__button"),this.closeButton=this.$parent.find(".expanding-section__button-close"),this._setupClickHandlers()}return n.prototype._setupClickHandlers=function(){var t,e;return t=function(t){return function(e){return e.preventDefault(),t._scrollToSection(),t._expandSection(),t.expandingSectionAnalyticsId&&t._logAnalyticsTracking(),!0}}(this),e=function(t){return function(e){return e.preventDefault(),t._expandSection(),!0}}(this),this.$toggleButton.on("click",t),this.closeButton.length>0&&this.closeButton.on("click",e),!0},n.prototype._scrollToSection=function(){var e;return e=this.$parent.offset().top-this.scrollElementOffset-this.defaultOffset,this.$scrollElement&&(e=this.$parent.find(this.$scrollElement).offset().top-this.scrollElementOffset+"px"),this.toggledState||t("html, body").animate({scrollTop:e}),e},n.prototype._expandSection=function(){var t;return t=0,this.toggledState?(t=0,this.toggledState=!1):(t=this.$parent.find(".expanding-section__content-container").outerHeight(!0),this.toggledState=!0),this.$parent.find(".expanding-section__content").css("max-height",t),this.$toggleButton.blur().toggleClass("button-toggled").attr("aria-expanded",this.toggledState),this},n.prototype._logAnalyticsTracking=function(){e.TeamsWebActionsLogger.log(this.expandingSectionAnalyticsId)},n}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("modules/clean/legacy_pyxl_controllers/input",["jquery","modules/clean/legacy_pyxl_controllers/tabbable","modules/core/i18n","modules/core/exception","require"],function(n,r,i,o,s){var a,l,u,c,_,h,assert;return _=i._,assert=o.assert,h=function(t){var e;return e=n.data(t,"input-element"),assert(e.length,"TextInput element has no related input element please ensure it was setup correctly"),e},n.valHooks.textinput={get:function(t){return h(t).val()},set:function(t,e){return h(t).val(e).trigger("input")}},c=function(r){function i(e){this.$text_input=e,this._on_change=t(this._on_change,this),this.persistent_label=this.$text_input.is(".label-above"),this.$input=this.$text_input.find(".text-input-input"),this.$text_input.data("input-element",this.$input),this.$label=this.$text_input.find("label"),this.$text_input.find(".error-message").length&&this.$input.addClass("input-error"),this.$text_input.each(function(t,e){return e.type="textinput"}),this.$text_input.focus(function(t){return function(){return setTimeout(function(){return t.$input.focus()},0)}}(this)),n(function(){var t,e;return e="BODY"===(null!=(t=document.activeElement)?t.tagName:void 0),e?n(".autofocus:visible").first().focus():void 0}),this._listen(),this._on_change(),i.__super__.constructor.call(this)}return e(i,r),i.prototype._listen=function(){return this.$input.on("keydown keyup paste input blur",function(t){return function(){return t._on_change()}}(this)),this.$input.on("blur",function(t){return function(e){return t.$text_input.trigger(e)}}(this)),this.$input.on("focus",function(t){return function(){return t.$input.removeClass("input-error")}}(this))},i.prototype._on_change=function(){return this.persistent_label?void 0:this.$label.toggle(!this.$input.val())},i}(r),l=function(t){function n(t){this.$text_input=t,this.$caps=this.$text_input.find(".password-caps-indicator"),this.$caps_lock=!1,this.$text_input.on("keypress",function(t){return function(e){var n,r,i,o,s;return o=/Mac/.test(navigator.platform),r=null!=(s=e.charCode)?s:e.keyCode,n=String.fromCharCode(r),n.toLowerCase()===n.toUpperCase()?i=void 0:n===n.toLowerCase()?i=e.shiftKey:n!==n.toUpperCase()||e.shiftKey&&o||(i=!e.shiftKey),null!=i&&(t.$caps_lock=i),t.$caps_lock?t.$caps.addClass("password-caps-indicator-activated"):t.$caps.removeClass("password-caps-indicator-activated")}}(this)),n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(c),u=function(r){function i(e){this.$text_input=e,this._on_change=t(this._on_change,this),this.$bubble_title=this.$text_input.find(".password-bubble-title"),this.$bubble_desc=this.$text_input.find(".password-bubble-desc"),this.$meter=this.$text_input.find(".password-input-meter"),this.$default_bubble_text=this.$bubble_desc.text(),this.$last_pwd="",s(["external/zxcvbn"]),i.__super__.constructor.call(this,this.$text_input)}return e(i,r),i.prototype._on_change=function(){var t,e,n,r,o;return e=this.$input.val(),this.$last_pwd!==e?(this.$last_pwd=e,"correcthorsebatterystaple"===e||"Tr0ub4dour&3"===e||"Tr0ub4dor&3"===e?(n=0,r=_("lol",{comment:"'lol'='laugh out loud'"}),this.$bubble_title.text(r),"correcthorsebatterystaple"===e?(t=_("Whoa there, don't take advice from a webcomic too literally ;)",{comment:"This text is displayed rarely, whenever a user selects a password that is from this comic: http://imgs.xkcd.com/comics/password_strength.png"}),this.$bubble_desc.text(t)):(t=_("Guess again",{comment:"this text is displayed rarely, whenever a user selects a password that is from this comic: http://imgs.xkcd.com/comics/password_strength.png"}),this.$bubble_desc.text(t))):(o=["",_("Weak"),_("So-so"),_("Good"),_("Great!")],n=this._score(e),r=o[n],this.$bubble_title.text(r),this.$bubble_desc.text(this.$default_bubble_text)),this.$meter.find(".password-input-dot").removeClass("password-input-dot-selected"),this.$meter.find(".password-input-dot").slice(4-n,4).addClass("password-input-dot-selected"),i.__super__._on_change.apply(this,arguments)):void 0},i.prototype._get_user_inputs=function(){var t,e,r,i,o;for(r=["dropbox"],o=this.$text_input.closest("form").find("input[type=text], input[type=email]"),e=0,i=o.length;i>e;e++)t=o[e],r.push(n(t).val());return r},i.prototype._score=function(t){return window.zxcvbn&&t?Math.max(1,zxcvbn(t,this._get_user_inputs()).score):0},i}(l),a=function(n){function r(e){this.$text_input=e,this.crement=t(this.crement,this),r.__super__.constructor.call(this,this.$text_input),this.$text_input.find(".number-input-btn--up").on("click",function(t){return function(e){return t.crement(e,1)}}(this)),this.$text_input.find(".number-input-btn--down").on("click",function(t){return function(e){return t.crement(e,-1)}}(this)),this.min=this.$input.attr("min"),null!=this.min&&(this.min=parseInt(this.min)),this.max=this.$input.attr("max"),null!=this.max&&(this.max=parseInt(this.max))}return e(r,n),r.prototype.crement=function(t,e){var n;return n=parseInt(this.$text_input.val())+e,isNaN(n)||(null!=this.min&&n<this.min?this.$text_input.val(this.min):null!=this.max&&n>this.max?this.$text_input.val(this.max):this.$text_input.val(n)),this.$text_input.trigger("change")},r}(c),{TextInput:c,PasswordInput:l,PasswordWatchInput:u,NumberInput:a}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/legacy_pyxl_controllers/login_form",["jquery","external/cyfd","external/u2f-api","external/pixie","modules/constants/login_and_register","modules/constants/pixie","modules/core/browser","modules/core/html","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/ajax","modules/clean/captcha","modules/clean/legacy_pyxl_controllers/ajax_form","modules/clean/gandalf_util","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/profile_services/third_party_signup","modules/clean/sso_login_checks","require"],function(e,n,r,i,o,s,a,l,u,c,_,h,d,p,f,m,g,v,w,y){var b,E,x,S,k;return S=u._,x=g.ProfileServicesLinkingHandler,E=v.PictureURLHandler,o.SPECTER_TELEMETRY_COLLECTION&&(k=new i.Pixie(s).get_specter(),k.start()),b=function(){function i(n,r,i,o,s,l,u){var c,h,f,m,g,v,b,E,x;this.login_type=r,this.variant=i,null==o&&(o=!1),null==s&&(s=!0),this.inline_google_login_errors=null!=l?l:!1,this.signup_tag=null!=u?u:null,this._finish_login=t(this._finish_login,this),this._fill_two_factor_error=t(this._fill_two_factor_error,this),this._fill_login_error=t(this._fill_login_error,this),this._login_via_email_start=t(this._login_via_email_start,this),this._sign_u2f_challenge=t(this._sign_u2f_challenge,this),
this._retry_u2f_challenge=t(this._retry_u2f_challenge,this),this._use_phone_instead=t(this._use_phone_instead,this),this._resend_code=t(this._resend_code,this),this._resend_code_success=t(this._resend_code_success,this),this._switch_from_twofactor_to_login_error=t(this._switch_from_twofactor_to_login_error,this),this._two_factor_success=t(this._two_factor_success,this),this._login_success=t(this._login_success,this),this._show_two_factor=t(this._show_two_factor,this),this._setup_two_factor=t(this._setup_two_factor,this),this._show_login_via_email=t(this._show_login_via_email,this),this._show_login=t(this._show_login,this),this._hide_sso=t(this._hide_sso,this),this._show_sso=t(this._show_sso,this),this._before_submit=t(this._before_submit,this),this._redirect_to_path=t(this._redirect_to_path,this),this._fill_in_email=t(this._fill_in_email,this),this._handle_emails_do_not_match=t(this._handle_emails_do_not_match,this),this._google_login_callback=t(this._google_login_callback,this),this._google_login=t(this._google_login,this),this._set_focus_to_twofactor=t(this._set_focus_to_twofactor,this),this._set_focus_to_password=t(this._set_focus_to_password,this),this.multi_login="multi"===this.login_type,this.pairing="pairing"===this.login_type,this.$login_form=n.find(".login-form"),this.$google_auth_container=n.find(".login-form-container__google-div"),this.$all_two_factor_forms=n.find(".two-factor-form"),this.$two_factor_phone_form=n.find(".two-factor-form.2fa-phone-form"),this.$two_factor_seckey_form=n.find(".two-factor-form.2fa-seckey-form"),this.$login_via_email_link=n.find(".login-via-email-link"),this.$two_factor_form=this.$two_factor_phone_form,null!=(f=this.$login_form.find(".login-button"))&&f.prop("disabled",!1),null!=(m=this.$google_auth_container.find(".auth-google"))&&m.prop("disabled",!1),o||y(["modules/clean/unity/features/web_destiny_ui"],function(t){return function(e){return t.web_destiny_interface=new e(n),t.web_destiny_interface.maybe_show_web_destiny()}}(this)),this.login_controller=new p(this.$login_form,this._before_submit,{should_submit_once:!0}),(null!=(g=this.$login_form.find(".recaptcha_v2_challenge"))?g.length:void 0)?(c=e(this.$login_form.find(".recaptcha_v2_challenge")),this.$captcha_component=new d(this.$login_form,c.attr("id"),null,"/needs_captcha","login_email",this.variant,!0)):this.$captcha_component=new d(this.$login_form,"#react-login-recaptcha-challenge-div","#react-signup-recaptcha-challenge-div","/needs_captcha","login_email",this.variant),this.$login_form.on(p.SUCCESS_EVENT,this._login_success),this.$login_form.on(p.ERROR_EVENT,function(t){return function(e,n){var r;return r=null!=n?n.recaptcha_response:void 0,t.$captcha_component.captcha_display_handler(r),t.$login_form.find(".login-via-email-blade-link").click(t._login_via_email_start)}}(this)),this.$login_form.is(":visible")&&this.$captcha_component.captcha_display_handler(),h=_.parse(this.$login_form.find("input[name='cont']").val()),h.fragment=window.location.hash.substr(1),this.cont=h.toString(),this.two_factor_phone_controller=new p(this.$two_factor_phone_form,function(){return null},{should_submit_once:!0}),this.two_factor_seckey_controller=new p(this.$two_factor_seckey_form,function(){return null},{should_submit_once:!0}),this.two_factor_controller=this.two_factor_phone_controller,this.$two_factor_phone_form.on(p.SUCCESS_EVENT,this._two_factor_success),this.$two_factor_seckey_form.on(p.SUCCESS_EVENT,this._two_factor_success),this.$two_factor_seckey_form.on(p.ERROR_EVENT,function(t){return function(e,n){return t.$two_factor_seckey_form.find(".two-factor-seckey-instructions .error-msg").text(n.u2f.message_text),t.$two_factor_seckey_form.find(".two-factor-seckey-instructions").toggle()}}(this)),this.$two_factor_phone_form.find(".resend-two-factor-code").click(this._resend_code),this.$two_factor_seckey_form.find(".two-factor-use-phone-instead").click(this._use_phone_instead),this.$two_factor_seckey_form.find(".two-factor-seckey-retry").click(this._retry_u2f_challenge),null!=(v=this.$login_via_email_link)&&v.click(this._login_via_email_start),null!=(b=this.$google_auth_container.find(".auth-google"))&&b.click(this._google_login),x=this.$two_factor_seckey_form.find("input[name='u2f_challenge']").val(),x&&this._sign_u2f_challenge(x),this.$login_form.find(".sso-optout a").click(function(t){return function(){return t._hide_sso(!0)}}(this)),this.$login_form.find(".login-button").attr("disabled",!1),null!=(E=this.$login_via_email_button)&&E.attr("disabled",!1),this.$login_form.find(".login-button.disabled-button").prop("disabled",!0),s&&(this.$forgot_link=n.find(".login-need-help a").click(function(t){return function(n){var r,i;return n.preventDefault(),i=e(n.target).attr("href"),r=encodeURIComponent(t.$login_form.find("input[name='login_email']").val()),a.redirect(i+"?email_from_login="+r)}}(this))),this._set_focus_to_password(),new w(this.$login_form.find("input[name='login_email']"),this._show_sso,this._hide_sso)}return i.LOGIN_SUCCESS="db:login:success",i.MULTI_LOGIN_SUCCESS="db:multilogin:success",i.prototype._set_focus_to_password=function(){if(this.$login_form.find("input[name='login_email']")[0].value)try{return this.$login_form.find("input[name='login_password']")[0].focus()}catch(t){}},i.prototype._set_focus_to_twofactor=function(){try{return this.$two_factor_form.find("input[name='code']").val("").focus()}catch(t){}},i.prototype._google_login=function(){var t,e;return p.clear_errors(this.$login_form),e="on"===this.$login_form.find("input[name='remember_me']").val(),t=new x,t.auth_service_login_web(m.GOOGLE,this._google_login_callback,"login_form",e,this.cont,this.pairing)},i.prototype._google_login_callback=function(t){var e,n;return t.success?(c.success(S("Log in successful! Your browser will be redirected in a few seconds.")),e=function(t){return function(){return h.SilentBackgroundRequest({url:"/profile_services/log",data:{event_name:"login_callback_success",value:"success"}}),a.redirect(t.cont?t.cont:"/home")}}(this),t.should_update_account_photo?E.downloadPicture(t.profile.picture_url).then(function(e){return E.uploadAccountPhoto(t.user_id,e)}).finally(e):e()):(h.SilentBackgroundRequest({url:"/profile_services/log",data:{event_name:"login_callback_error",value:t.err_msg}}),"access_denied"===t.err_msg?c.error(S("You need to accept Google’s request in order to log in.")):"emails_do_not_match_redirect"===t.err_msg?(n=this._get_third_party_auth_url(t,!0),a.redirect(n)):"emails_do_not_match"===t.err_msg?this.inline_google_login_errors&&!this.pairing?this._handle_emails_do_not_match(t):c.error(S("We couldn’t find a Dropbox account matching that email.")):"google_login_not_allowed"===t.err_msg?(c.error(S("Google sign in is disabled. Sign in with your Dropbox password or ask your Dropbox admin for help.")),this._fill_in_email(t.profile.email)):"sso_required"===t.err_msg?(c.error(S("Your team has single sign-on. Click Continue below to sign in.")),this._fill_in_email(t.profile.email)):"tfa_required"===t.err_msg?this._redirect_to_path(t,"/verify_code"):"disabled_account"===t.err_msg?c.error(S("This account is disabled.")):"invalid_pair_target"===t.err_msg?c.error(S("That account can’t be paired. Paired account must be a personal account.")):"already_paired"===t.err_msg?c.error(S("That account is already paired to another account.")):"error_pairing"===t.err_msg?c.error(S("There was an error pairing.")):"not_verified"===t.err_msg?this._redirect_to_path(t,"/show_password_form"):c.error(S("We couldn’t log you in with Google.  Try again?")))},i.prototype._handle_emails_do_not_match=function(t){var e;return e=this._get_third_party_auth_url(t),this.$google_auth_container.find(".third-party-signup-link").attr("href",e),this.$google_auth_container.find(".google-login-error").removeClass("u-l-dn")},i.prototype._get_third_party_auth_url=function(t,e){var n,r,i;return n="/third_party_signup",r={fname:t.profile.given_name,lname:t.profile.family_name,email:t.profile.email,picture_url:t.profile.picture_url,refresh_token:t.refresh_token,email_sig:t.email_sig,automatic_redirect:e,signup_tag:this.signup_tag,cont:this.cont},i=String(_({path:n,query:r}))},i.prototype._fill_in_email=function(t){return this.$login_form.find("input[name='login_email']").val(t),this.$login_form.find("input[name='login_email']").trigger("input"),this._set_focus_to_password()},i.prototype._redirect_to_path=function(t,e){var n;return n=_({path:e}).updateQuery({cont:this.cont,remember_me:t.remember_me,pair_user:t.pair_user}),a.redirect(n)},i.prototype._before_submit=function(){return n.cfsubmit(),o.SPECTER_TELEMETRY_COLLECTION?this.login_controller.add_additional_data({specter_login_tm:k.dump()}):void 0},i.prototype._show_sso=function(t){return this.$login_form.find("input[name='login_password']").val(""),this.$login_form.addClass("sso-required"),t?this.$login_form.addClass("sso-optional"):void 0},i.prototype._hide_sso=function(t){if(null==t&&(t=!1),this.$login_form.removeClass("sso-required sso-optional"),t)try{return this.$login_form.find("input[name='login_password']").focus()}catch(t){}},i.prototype._browser_supports_u2f=function(){return"undefined"!=typeof MessageChannel},i.prototype._show_login=function(){return this.$two_factor_form.hide(),e(".login-register-header, .login-register-switch").show(),this.$login_form.show(),this.$login_form.find("input[name='login_password']").val("")},i.prototype._show_login_via_email=function(){var t;return null!=(t=this.$login_via_email_container)?t.show():void 0},i.prototype._setup_two_factor=function(t){return t.u2f_challenge&&this._browser_supports_u2f()&&(this.$two_factor_form=this.$two_factor_seckey_form,this.two_factor_controller=this.two_factor_seckey_controller,this._sign_u2f_challenge(t.u2f_challenge)),t.last_four_digits?(this.$all_two_factor_forms.addClass("hide-authenticator"),this.$two_factor_phone_form.find(".last-four-digits").text(t.last_four_digits)):this.$all_two_factor_forms.addClass("hide-sms"),this.$two_factor_form.find("input[name='remember_me']").val(t.remember_me),this._show_two_factor()},i.prototype._show_two_factor=function(){return e(".login-register-header, .login-register-switch").hide(),this.$login_form.hide(),this.$two_factor_form.show(),this._set_focus_to_twofactor()},i.prototype._login_success=function(t,e){var n,r,i;switch(e.status){case"OK":return this._finish_login(e);case"TWOFACTOR":return this._setup_two_factor(e);case"TWOFACTOR_REQUIRED":return a.redirect(e.cont);case"LOGIN_VIA_EMAIL_REQUIRED":return n=e.email,i=_({path:e.cont}).updateQuery({email:n}),a.redirect(i);case"SSO":return a.unsafeRedirect(e.sso_url);case"RATELIMIT":return this._fill_login_error(S("You've tried to log in too many times. Please try again in a few minutes."));case"ERROR":return r=e.html_response?new l(e.message):e.message,c.error(r),this.login_controller._clear_pending(!0);case"EXPIRED":return a.redirect(e.cont);default:return c.error()}},i.prototype._two_factor_success=function(t,e){switch(e.status){case"OK":return this.$two_factor_seckey_form.find(".seckey-loading-status").toggle(),this._finish_login(e);case"EXPIRED":return this._switch_from_twofactor_to_login_error(e.message);case"REQUIRES_ROLE":return this._switch_from_twofactor_to_login_error(e.message);case"ERROR":return c.error(e.message);default:return c.error()}},i.prototype._switch_from_twofactor_to_login_error=function(t){return this.two_factor_controller._clear_pending(!0),this.login_controller._clear_pending(!0),this._show_login(),this._fill_login_error(t),this._set_focus_to_password()},i.prototype._resend_code_success=function(t){switch(t){case"OK":return c.success(S("We sent you a code. It may take a few minutes to arrive."));case"RATELIMIT":return this._fill_two_factor_error(S("You've tried to log in too many times. Please try again in a few minutes."));case"UNREACHABLE":return this._fill_two_factor_error(S("We couldn't reach your phone number. Are you sure it's correct?"));case"EXPIRED":return this._fill_two_factor_error(S("Sorry, your phone code has expired. Please log in again."));case"BADCARRIER":return this._fill_two_factor_error(S("Unfortunately, your carrier isn’t supported at this time."));case"INVALIDNUMBER":return this._fill_two_factor_error(S("That isn’t a valid phone number."));case"NOTAMOBILE":return this._fill_two_factor_error(S("That phone number doesn’t appear to be a valid mobile number."));default:return c.error()}},i.prototype._resend_code=function(){var t;return h.WebRequest({url:"/twofactor_resend",data:{backup:(null!=(t=this.$two_factor_form.find("input[name='backup']"))?t.val():void 0)||!1},success:this._resend_code_success,error:function(){return c.error()}}),!1},i.prototype._use_phone_instead=function(){return this.$two_factor_seckey_form.hide(),this.$two_factor_phone_form.show(),this.$two_factor_form=this.$two_factor_phone_form,this.$two_factor_phone_form.hasClass("hide-authenticator")&&this._resend_code(),this._set_focus_to_twofactor(),!1},i.prototype._retry_u2f_challenge=function(){return h.WebRequest({url:"/account/twofactor/u2f_start_authentication",success:function(t){return function(e){return t.$two_factor_seckey_form.find(".two-factor-seckey-instructions").toggle(),t._sign_u2f_challenge(e)}}(this),error:function(){return c.error()}}),!1},i.prototype._sign_u2f_challenge=function(t){var e;if(this._browser_supports_u2f())return e=JSON.parse(t),r.sign(e.authenticateRequests,function(t){return function(e){return t.$two_factor_seckey_form.find(".text-input-input").val(JSON.stringify(e)),t.$two_factor_seckey_form.submit()}}(this))},i.prototype._login_via_email_start=function(){return p.clear_errors(this.$login_form),h.WebRequest({url:"/ajax_login_via_email_start",data:{login_email:this.$login_form.find("input[name='login_email']").val(),remember_me:"on"===this.$login_form.find("input[name='remember_me']").val()},success:function(){return c.success(S("We emailed you a sign in link. Please check your inbox."))},error:function(t){return function(e,n,r){return p.fill_errors(t.$login_form,JSON.parse(r))}}(this)}),!1},i.prototype._fill_login_error=function(t){return p.fill_errors(this.$login_form,{login_email:{message_text:t}})},i.prototype._fill_two_factor_error=function(t){return p.fill_errors(this.$two_factor_form,{code:{message_text:t}})},i.prototype._finish_login=function(t){var e,n,r;return r=this.$login_form.find("input[type='hidden'][name=refresh_token]").val(),e=this.$login_form.find("input[type='hidden'][name=email_sig]").val(),r&&e&&h.WebRequest({url:"/profile_services/link_google_service_with_user",subject_user:t.id,data:{service:m.GOOGLE,refresh_token:r,email_sig:e}}),n=this.multi_login?i.MULTI_LOGIN_SUCCESS:i.LOGIN_SUCCESS,this.$login_form.trigger(n,t),this.cont?a.redirect(this.cont):void 0},i}()})}.call(this),function(){define("modules/clean/legacy_pyxl_controllers/login_or_register",["jquery","modules/clean/register_form"],function(t,e){var n;return n=function(){function n(n){this.$login_form=n.find(".login-register-login-part"),this.$register_form=n.find(".login-register-register-part"),n.click(function(e){return function(n){return t(n.target).hasClass("login-register-switch-link")?(n.preventDefault(),e._toggle_forms(),e.$login_form.find(".text-input input:visible").first().focus(),e.$register_form.find(".text-input input:visible").first().focus()):void 0}}(this)),this.$register_form.on(e.USER_EXISTS,function(t){return function(e){var n,r,i;t._toggle_forms(),r=e.prefill;for(n in r)i=r[n],t.$login_form.find(n).val(i);return t.$login_form.find(e.focus).focus()}}(this))}return n.prototype._toggle_forms=function(){return this.$login_form.toggle(),this.$register_form.toggle()},n}()})}.call(this),function(){define("modules/clean/legacy_pyxl_controllers/tabbable",["jquery"],function(t){var e;return e=function(){function e(){e.initialized||this.listen()}return e.initialized=!1,e.prototype.listen=function(){return e.initialized=!0,t(document).on("keydown",function(e){return function(e){return 9===e.keyCode?t(document.body).addClass("tabbing"):void 0}}(this)),t(document).on("mousedown",function(e){return function(e){return t(document.body).removeClass("tabbing")}}(this))},e.initialize_module=function(){return new e},e}()})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("modules/clean/legacy_pyxl_controllers/tooltip",["jquery","external/underscore","modules/core/controller_helpers"],function(e,n,r){var i,o,s;return s=[],i=function(){function t(t,e,i){var o,s,a,l;this.$wrapper=t,this.prompt=this.$wrapper.find(".tooltip-prompt"),this.tooltip=this.$wrapper.find(".tooltip-tooltip"),this.hover_target=this.find_hover_target(),this.position_global=e,this.tooltip_location=i,this.listen(),o=r.clone_element(this.tooltip).appendTo("body"),o.css({position:"static",display:"inline-block"}),s=500,l=o.width()+1,l>s&&(l=s),this.tooltip.css({width:l,position:"absolute",display:"none"}),o.remove(),this.position_global&&this.tooltip.remove().appendTo("body"),this.is_focusable()&&(a=n.uniqueId("tooltip-tooltip-"),this.tooltip.attr({role:"tooltip",id:a}),this.hover_target.attr({tabindex:0,"aria-describedby":a}))}return t.prototype.tooltip_shown=!1,t.prototype.position_global=!1,t.prototype.listen=function(){var t,e,n,r,i;for(r=[this.hover_target,this.tooltip],i=[],e=0,n=r.length;n>e;e++)t=r[e],t.mouseenter(function(t){return function(){return clearTimeout(t.tooltip.data("timeout_id")),t.show_tooltip()}}(this)),t.mouseleave(function(t){return function(){var e;return e=setTimeout(function(){return t.hide_tooltip()},200),t.tooltip.data("timeout_id",e)}}(this)),this.is_focusable()?(t.focusin(function(t){return function(){return clearTimeout(t.tooltip.data("timeout_id")),t.show_tooltip()}}(this)),i.push(t.focusout(function(t){return function(){var e;return e=setTimeout(function(){return t.hide_tooltip()},200),t.tooltip.data("timeout_id",e)}}(this)))):i.push(void 0);return i},t.prototype.find_hover_target=function(){return this.prompt},t.prototype.is_focusable=function(){return!1},t.prototype.show_tooltip=function(t){var e,n,r,i,o,a,l;if(!this.tooltip_shown){for(o=this.position_global?this.hover_target.offset():this.hover_target.position(),n=0,i=s.length;i>n;n++)l=s[n],l.hide_tooltip();return s.push(this),"top"===this.tooltip_location?(a=o.top-this.tooltip.outerHeight()-this.hover_target.height()/2,r=o.left-this.tooltip.outerWidth()/2,e={top:"-=7"}):"left"===this.tooltip_location?(a=o.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,r=o.left-this.tooltip.outerWidth()-2,e={left:"-=7"}):(a=o.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,r=o.left+this.hover_target.width()+2,e={left:"+=7"}),this.tooltip.css({top:a,left:r}).show().animate(e,50),this.tooltip_shown=!0}},t.prototype.hide_tooltip=function(){var t;if(this.tooltip_shown)return clearTimeout(this.tooltip.data("timeout_id")),this.tooltip.hide(),this.tooltip_shown=!1,t=s.indexOf(this),-1!==t?s.splice(t,1):void 0},t}(),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.find_hover_target=function(){return this.prompt.find(".sprite")},n.prototype.is_focusable=function(){return!0},n}(i),{DBTooltip:i,InfoTooltip:o}})}.call(this),function(){define("modules/clean/legacy_ui_button",["jquery"],function(t){var e;return e=function(){var e;return e=t(document),t(document).on("mouseover.ui-button",".ui-button",function(){return t(this).addClass("over")}).on("mouseout.ui-button",".ui-button",function(){return t(this).removeClass("over")}).on("mousedown.ui-button",".ui-button",function(){return t(this).addClass("down")}).on("click.ui-button",".ui-button",function(){var n;return n=t(this),n.hasClass("ui-button-dropdown")&&(n.hasClass("active")?e.trigger("dropdownClosed",[1]):e.trigger("dropdownOpened",[1])),n.toggleClass("active")}),e.on("click.ui-button",function(n){var r,i,o;return r=t(n.target),i=r.closest(".ui-button.active"),o=0,t(".ui-button.active").not(i).each(function(){var e;return e=t(this),e.hasClass("active")&&e.hasClass("ui-button-dropdown")&&(o+=1),e.removeClass("active")}),e.trigger("dropdownClosed",[o])}).on("mouseup.ui-button",function(){return t(".ui-button.down").removeClass("down")})}})}.call(this),define("modules/clean/loggers/cache_logger",["require","exports","external/rsvp","modules/constants/request","modules/clean/ajax","modules/core/browser"],function(t,e,n,r,i,o){"use strict";function s(){if(!l&&(l=!0,window.caches)){var t=[];window.caches.keys().then(function(e){return n.Promise.all(e.map(function(e){return window.caches.open(e).then(function(t){return t.keys()}).then(function(e){for(var n=0,r=e;n<r.length;n++){var i=r[n];t.push(i.url)}})}))}).then(function(){i.SilentBackgroundRequest({url:"/log/service_worker_cache",data:{request_id:r.REQUEST_ID,routes_cached:JSON.stringify(t)}})})}}function a(){if(!u&&(u=!0,window.localStorage&&window.ensemble&&window.ensemble.getCacheInfo)){for(var t=o.get_uri(),e=t.getScheme()+"://"+t.getAuthority(),n=[],s=0;s<window.localStorage.length;s++){var a=window.localStorage.key(s);if(a&&a.startsWith(c)){var l=a.split("_");if(!(l.length<1)&&l[1].startsWith("/")){var _=l[1];n.push(e+_)}}}var h=[],d=[],p=window.ensemble.getCacheInfo();for(var f in p)if(f.startsWith("/")){var m=e+f;h.push(m),p[f].isCacheHit&&d.push(m)}i.SilentBackgroundRequest({url:"/log/ensemble_cache",data:{request_id:r.REQUEST_ID,routes_cached:JSON.stringify(n),cache_hits:JSON.stringify(d),all_pagelets:JSON.stringify(h)}})}}var l=!1;e.logSWCacheData=s;var u=!1,c="ensembleCache";e.logEnsembleCacheData=a}),function(){define("modules/clean/mailcheck",["jquery","modules/core/html","modules/core/i18n"],function(t,e,n){var r,i;return i=n._,r=function(){function t(t,e,n){var r;this.$input=t,this.$suggestion_container=e,null==n&&(n={}),this.checkInput(),r=n.livecheck===!0?"keyup blur":"blur",this.$input.on(r,this.checkInput.bind(this))}return t.DOMAINS=["gmail.com","hotmail.com","yahoo.com","aol.com","web.de","gmx.de","googlemail.com","me.com","live.com","msn.com","mail.ru","comcast.net","google.com","mac.com"],t.WHITELIST_REGEXS=[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./,/gmx\.net/,/gmx\.at/,/gmx\.ch/,/gmx\.com/,/mail\.com/,/web\.com/],t.THRESHOLD=2,t.prototype.checkInput=function(){var t;t=this.suggest(this.$input.val()),t?this.populate(t):this.clear()},t.prototype.populate=function(t){var n,r,o;return o=e.escape(t.local).toHTML(),n=e.escape(t.domain).toHTML(),r=o+"@<span class='email_warning_area'>"+n+"</span>",this.$suggestion_container.html(new e(i("Did you mean <a>%(suggested_email)s</a>?").format({suggested_email:r})).toHTML()),this.$suggestion_container.show(),this.$suggestion_container.on("click",function(e){return function(){return e.$input.val(t.full),e.clear()}}(this))},t.prototype.clear=function(){return this.$suggestion_container.empty(),this.$suggestion_container.hide()},t.prototype.suggest=function(t){var e,n,r,i;return null==t&&(t=""),t.length?(t=t.toLowerCase(),(i=this.splitEmail(t))?(r=i.local,n=i.domain,this.whitelistedDomain(n)?!1:(e=this.findClosestDomain(n),e?{local:r,domain:e,full:r+"@"+e}:!1)):!1):void 0},t.prototype.whitelistedDomain=function(e){var n,r,i,o;for(o=t.WHITELIST_REGEXS,n=0,r=o.length;r>n;n++)if(i=o[n],i.test(e))return!0;return!1},t.prototype.splitEmail=function(t){var e;return e=t.split("@"),2!==e.length?!1:{local:e[0],domain:e[1]}},t.prototype.findClosestDomain=function(e){var n,r,i,o,s,a,l;for(a=99,r=null,l=t.DOMAINS,o=0,s=l.length;s>o;o++)n=l[o],i=this.stringDistance(e,n),a>i&&(a=i,r=n);return r&&r!==e&&a<=t.THRESHOLD?r:!1},t.prototype.stringDistance=function(t,e){var n,r,i,o,s,a;if(null==t||0===t.length)return null==e||0===e.length?0:e.length;if(null==e||0===e.length)return t.length;for(n=0,s=0,a=0,i=0,o=5;n+s<t.length&&n+a<e.length;){if(t.charAt(n+s)===e.charAt(n+a))i++;else for(s=0,a=0,r=0;o>r;){if(n+r<t.length&&t.charAt(n+r)===e.charAt(n)){s=r;break}if(n+r<e.length&&t.charAt(n)===e.charAt(n+r)){a=r;break}r++}n++}return(t.length+e.length)/2-i},t}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/marketing_tracker",["modules/core/exception"],function(e){var n,r;return n="https://marketing.dropbox.com",new(r=function(){function r(){this._load=t(this._load,this),this.push=t(this.push,this)}return r.prototype.el=!1,r.prototype.ready=!1,r.prototype.push=function(t){var r;return this.src=t.src,r=t.dataLayer,e.assert(this.src,"MarketingTracker.push requires src"),this.el||(this.el=this._load(this.src)),this.ready?this.el.contentWindow.postMessage(r,n):this.el.addEventListener("load",function(t){return function(){return t.ready=!0,t.el.contentWindow.postMessage(r,n)}}(this)),this},r.prototype._load=function(t){var e;return e=document.createElement("iframe"),e.style.display="none",e.hidden=!0,e.src=t,e.setAttribute("sandbox","allow-scripts allow-same-origin"),document.body.appendChild(e),e},r}())})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;define("modules/clean/notserver",["jquery","external/underscore","modules/constants/env","modules/core/exception","modules/core/uri","modules/clean/viewer"],function(n,r,i,o,s,a){var l,u,c,_,assert,h,d,p,f;assert=o.assert,l={},u=!1,_="/subscribe",c=function(){function i(){}return i.prototype.add_notclient=function(t,e,n){return this.new_notclient(t),setTimeout(function(){return l[t].init(e,n)},2e3)},i.prototype.new_notclient=function(i){var o,a,c,h,d,p,f,m,g,v,w,y,b,E,x,S,k,C,T,R,O,L,A,I,N,P,M,$,D,U,q,F,j,B,H,G,W,V,J,Y,X,z;return assert(t.call(l,i)<0,"cannot create more than one notclient per user"),R=function(t){return r.isNumber(t)&&t%1===0&&t>0},T=function(t){return r.isNumber(t)&&t%1===0&&t>=0},assert(R(i),"user_id must be a positive integer"),O=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],u?console.log.apply(console,t):void 0},o=9e4,h=8096,p="user",d="list",S=!1,a=1e3,c=3e5,M=0,V=function(){var t;return t=0===b?0:Math.min(a*Math.pow(2,b-1),c),Math.max(t,M)},N=null,$={},x={},I=1,k=!1,C=!1,z=null,g=!1,q=!1,Y=[],W=null,y=null,L=null,A={},D=!1,b=0,J=0,X=function(t,e){var n,r,i;r=[];for(n in e)i=e[n],n=parseInt(n,10),assert(R(n),"ns_ids must be positive integers: "+n),assert(T(i),"sjids must be nonnegative integers: "+i),null!=t[n]?r.push(t[n]=Math.min(t[n],i)):r.push(t[n]=i);return r},v=function(){var e,n,o,a;return assert(null!=N&&!r.isEmpty($),"expected nid and ns_map"),o={host_int:0,trace:window.location.pathname},e=r.pluck(r.values(x),"type"),t.call(e,p)>=0&&(o.user_id=i,o.nid=null!=N?N.replace(/^0+(.)/,"$1"):void 0),t.call(e,d)>=0&&(o.ns_map=function(){var t;t=[];for(n in $)a=$[n],t.push(n+"_"+a);return t}().join(",")),s.parse(_).updateQuery(o).toString().length>h&&delete o.ns_map,o},w=function(){var t;if(S)return t=V(),t>0?y=window.setTimeout(f,t):q?void 0:f()},f=function(){var t;return assert(!k&&!C,"connect: invalid state"),assert(N>=0||!r.isEmpty($),"notclient: called connect with nothing to subscribe to"),O("###########################"),t=v(),null!=t.nid||t.ns_map?(O("connecting to notserver..."),k=!0,J+=1,z=n.ajax(_,{data:t,dataType:"json",error:function(){return g?void(g=!1):(b+=1,O("error connecting to notserver. bad rounds="+b+"."),k=!1,w())},success:function(t){return O("notserver connection closed. response:",t),k=!1,null!=t.chillout?(M=1e3*parseInt(t.chillout,10),O("notserver told us to chill for "+M+"ms")):M>0&&(O("setting notserver chillout back to 0ms"),M=0),"punt"===t.ret?w():(assert("new"===t.ret,"unknown notserver ret: "+t.ret),assert("refresh"in t,"expected notserver ret:new to have refresh keyword"),G(t.refresh))}})):void O("nothing to subscribe to. skipping notserver connection.")},m=function(){return null!=z?(g=!0,z.abort(),z=null):void 0},U=function(){return q=!0,m()},H=function(){return U=!1,w()},F=function(){return M=0,k=!1,C=!1,m(),Y=[],window.clearTimeout(W),window.clearTimeout(y),W=null,y=null,L=null,A={},D=!1,b=0,w()},B=function(){var t;return S=!1,M=0,N=null,$={},x={},t=0,I=1,k=!1,C=!1,z=null,g=!1,Y=[],window.clearTimeout(W),window.clearTimeout(y),W=null,y=null,L=null,A={},D=!1,b=0,J=0},G=function(e){var n,i,s,a,l,u,c,_;for(assert(!C&&!k,"run_handlers: invalid state"),assert(null===L,"run_handlers: new_nid must start at null"),assert(r.isEqual(A,{}),"run_handlers: new_ns_map must start at {}"),assert(!D,"expected one_or_more_handler_failures=false"),C=!0,O("running handlers..."),c=r.filter(r.values(x),function(n){var r;return r=n.type,t.call(e,r)>=0}),assert(!r.isEmpty(c),"notserver sent a ping for unsubscribed activity"),Y=r.pluck(c,"handler_id"),s=0,a=c.length;a>s;s++)u=c[s],n=u.handler,i=u.handler_id,l=u.name,_=u.type,O("running id="+i+", name="+l+", type="+_),n();return r.isEmpty(Y)?O("all handlers already finished running. no need for a slacker timeout."):(O("all handlers running. slacker timeout set."),W=window.setTimeout(j,o))},j=function(){var t,e,n,i;for(assert(C&&!k,"called report_slackers in an invalid state."),assert(!r.isEmpty(Y,"report_slackers called w/ nothing slackin'")),O("found some slackers"),D=!0,i=[],e=0,n=Y.length;n>e;e++)t=Y[e],i.push(E(t));return i},E=function(e){return t.call(Y,e)<0?void 0:(O("done handling: "+e),Y=r.without(Y,e),r.isEmpty(Y)?(O("all handlers are done running."),C=!1,window.clearTimeout(W),null!=L&&(O("new nid: "+L),N=L),r.isEmpty(A)||(O("new ns_map:",A),$=A),D?(b+=1,O("one or more handler errors. bad_rounds="+b)):b=0,L=null,A={},D=!1,w()):void 0)},P={get_user_id:function(){return i},get_nid:function(){return N},get_ns_map:function(){return r.clone($)},get_consecutive_bad_rounds:function(){return b},get_total_rounds:function(){return J},get_notserver_chillout_ms:function(){return M},get_sleep_ms:V,subscribe_user:function(e){var n,i,o,s,a,l,u;for(assert(!C,"adding new handlers from inside handlers is not currently supported"),u=["name","handler"],o=0,s=u.length;s>o;o++)l=u[o],assert(e[l],"subscribe_user requires this param be non-falsey: "+l);return assert(r.isFunction(e.handler),"handler must be a function"),O("adding user handler "+e.name),i=r.pluck(r.values(x),"type"),a=t.call(i,p)<0,n=I++,x[n]={handler_id:n,handler:e.handler,name:e.name,type:p},a&&(O("first user handler added, reconnecting"),F()),n},subscribe_sfj:function(e){var n,i,o,s,a,l,u;for(assert(!C,"adding new handlers from inside handlers is not currently supported"),u=["name","handler"],o=0,s=u.length;s>o;o++)l=u[o],assert(e[l],"subscribe_sfj requires this param be non-falsey: "+l);return assert(r.isFunction(e.handler),"handler must be a function"),O("adding sfj handler "+e.name),i=r.pluck(r.values(x),"type"),a=t.call(i,d)<0,n=I++,x[n]={handler_id:n,handler:e.handler,name:e.name,type:d},a&&(O("first sfj handler added, reconnecting"),F()),n},unsubscribe:function(t){return assert(!C,"removing handlers from inside handlers is not supported"),assert(t in x,"no subscribed handler with the given id"),delete x[t],r.isEmpty(x)?m():void 0},handler_success:function(e,n){var r;if(!(t.call(Y,e)<0))return r=x[e].type,r===d?(assert("ns_map"in n,"ns_map required param is missing"),assert(!("nid"in n),"nid is disallowed from SFJ handlers"),X(A,n.ns_map)):(assert(r===p,"unknown handler type: "+r),assert("nid"in n,"nid required param is missing"),assert(!("ns_map"in n),"ns_map is disallowed from user handlers"),(null==L||n.nid<L)&&(L=n.nid)),E(e)},handler_failure:function(e){return O("handler failed. handler_id="+e),t.call(Y,e)<0?void 0:(D=!0,E(e))},handle_visibility_change:function(){return window.document.hidden?m():F()},init:function(t,e){return assert(!S,"error: init() has been called twice."),N=t,X($,e),S=!0,null==window.document.visibilityState?w():(document.addEventListener("visibilitychange",this.handle_visibility_change),window.document.hidden?void 0:w())},reset:B,abort:m,pause:U,resume:H,
reconnect:F},l[i]=P,P},i}(),c=new c,p=a.get_viewer().get_users();for(h=0,d=p.length;d>h;h++)f=p[h],c.add_notclient(f.id,f.nid,f.ns_map);return{NotServer:c,NotClients:l}})}.call(this),function(){define("modules/clean/open_in_mobile_app",["jquery","modules/clean/analytics","modules/core/i18n","modules/core/uri"],function(t,e,n,r){var i,o;return o=n._,i=function(){function n(){}return n.vischange_listener=null,n.open_app_mode=!0,n._onOpenLoggingHandler=function(){},n._onInstallLoggingHandler=function(){},n.try_open_ios_9=function(t,e,r,i){return null==r&&(r=function(){}),null==i&&(i=function(){}),n.vischange_listener||(n.vischange_listener=function(t){return n.open_app_mode=!0,i()},document.addEventListener("visibilitychange",n.vischange_listener)),n.open_app_mode?(n.open_app_mode=!1,n._onOpenLoggingHandler(),r(),window.location=t):(n._onInstallLoggingHandler(),window.location=e)},n.fallback_will_launch=!1,n.try_open=function(r,i,o){var s,a,l,u,c,_,h,d;return n._onOpenLoggingHandler(),n.fallback_will_launch?void 0:(s=t("body"),d=function(){var e;return e=t("<iframe />",{src:r,style:"display: none;"}),s.append(e)},c=!1,h=function(t){return c=!0},document.addEventListener("visibilitychange",h),l=!1,u=function(t){return l=!0},window.addEventListener("pagehide",u),null!=o&&e.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN","WEB_MOBILE",{scl_url:o}),d(),_=Date.now(),a=function(){return n.fallback_will_launch=!1,document.removeEventListener("visibilitychange",h),window.removeEventListener("pagehide",u),!l&&!c&&Date.now()<_+4700?(null!=o&&e.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL","WEB_MOBILE",{scl_url:o}),window.location.replace(i)):void 0},setTimeout(a,3200),n.fallback_will_launch=!0)},n.registerLoggingHandlers=function(t,e){return this._onOpenLoggingHandler=t,this._onInstallLoggingHandler=e},n.open_on_click=function(e,n,r,i,s,a){var l;return null==a&&(a=null),l=function(r){return function(l){var u;return l.preventDefault(),s?(i||(i=t("<div/>")),u=i.text(),r.try_open_ios_9(e,n,function(){return i.text(o("Install app?"))},function(){return i.text(u)})):r.try_open(e,n,a)}}(this),t(r).on("click",l)},n.open_ios=function(t,e,n,r,i){return null==r&&(r=function(){}),null==i&&(i=function(){}),n?this.try_open_ios_9(t,e,r,i):this.try_open(t,e)},n.redirect_on_load=function(t,e){return this.try_open(t,e)},n.cleanup=function(){return this.vischange_listener?document.removeEventListener("visibilitychange",this.vischange_listener):void 0},n}()})}.call(this),function(){define("modules/clean/partnerships/oem_client",["jquery"],function(t){var e,n;return n=function(){var e,n,r,i;return e=t("#outer-frame"),r=window.innerWidth/e.width(),i=window.innerHeight/e.height(),n=Math.min(r,i),n=Math.max(n,.5),n=Math.min(n,2.5),r>1?e.css({transform:"scale("+n+")",transformOrigin:"50% 0"}):e.css({transform:"scale("+n+")",transformOrigin:"0 0"})},e=function(){function e(e,r){t(".reg-form").click(function(e){return function(e){return t(e.target).is('a[href="/forgot"]')?(e.preventDefault(),window.open("/forgot","_blank")):void 0}}(this)),e?(window.oncontextmenu=function(){return!1},r||(n(),window.onresize=function(t){return n()})):window.oncontextmenu=function(){return!0},t("#outer-frame").css({visibility:"visible"})}return e}(),{OEMClient:e}})}.call(this),function(){define("modules/clean/photos/batch_thumb_loader",["jquery","modules/clean/ajax","modules/core/uri","modules/constants/env"],function(t,e,n,r){var i;return i=function(){function i(t){var e,n;e=t.batch_size,n=t.max_parallel_requests,this.on_batch=t.on_batch,this.batch_logger=t.batch_logger,this.on_batch_success=t.on_batch_success,this.batch_size=e||this.DEFAULT_BATCH_SIZE,this.max_parallel_requests=n||this.DEFAULT_MAX_PARALLEL_REQUESTS,this.thumb_url_queue=[],this.batch_queue=[],this.callback_by_id={},this.request_ids_by_url={},this.num_requests_in_flight=0,this.flushing=!1,this.next_thumb_request_id=0,this.next_batch_id=0,this.cancelled_urls={},this.outstanding_batches={},this._request_callback_by_request_id={}}return i.prototype.DEFAULT_BATCH_SIZE=16,i.prototype.DEFAULT_MAX_PARALLEL_REQUESTS=6,i.prototype.MAX_URL_LENGTH=6e3,i.prototype.vend_request_id=function(){var t;return t=this.next_thumb_request_id,this.next_thumb_request_id++,t},i.prototype.queue_thumb=function(e,n,i){var o,s,a,l,u,c,_,h,d,p;if(null==i&&(i={}),d=i.request_id,c=i.onrequest,!e)return null;if(t.support.cors&&r.BATCH_THUMB_ENDPOINTS.length){if(null==d&&(d=this.vend_request_id()),(null!=(_=this.request_ids_by_url[e])?_.length:void 0)>0){a=!1;for(o in this.outstanding_batches)for(h=this.outstanding_batches[o].urls,l=0,u=h.length;u>l;l++)p=h[l],p===e&&(a=!0);a&&"function"==typeof c&&c()}else this.thumb_url_queue.push(e),this.request_ids_by_url[e]=[];return this.request_ids_by_url[e].push(d),this.callback_by_id[d]={url:e,callback:n},this._request_callback_by_request_id[d]=c,this.thumb_url_queue.length>=this.batch_size&&(this.batch_queue.push(this.thumb_url_queue.splice(0,this.batch_size)),this._send_batch_requests()),d}return"function"==typeof c&&c(),s=!0,"function"==typeof n&&n(e,s),null},i.prototype.cancel_thumb=function(t){var e,n,r,i,o,s,a,l,u,c,_,h,d,p,f,m,g,v,w,y,b,E,x,S,k;if(null!=this.callback_by_id[t]){for(S=this.callback_by_id[t].url,delete this.callback_by_id[t],delete this._request_callback_by_request_id[t],g=this.request_ids_by_url[S],i=a=0,u=g.length;u>a;i=++a)if(o=g[i],o===t){this.request_ids_by_url[S].splice(i,1);break}if(0===this.request_ids_by_url[S].length){for(delete this.request_ids_by_url[S],v=this.thumb_url_queue,i=l=0,c=v.length;c>l;i=++l)if(x=v[i],x===S)return void this.thumb_url_queue.splice(i,1);for(w=this.batch_queue,i=p=0,_=w.length;_>p;i=++p)for(n=w[i],s=f=0,h=n.length;h>f;s=++f)if(x=n[s],x===S)return n.splice(s,1),void(0===n.length&&this.batch_queue.splice(i,1));this.cancelled_urls[S]=1,E=[];for(r in this.outstanding_batches){for(y=this.outstanding_batches[r],k=y.urls,b=y.request,e=!0,m=0,d=k.length;d>m;m++)S=k[m],e=null!=this.cancelled_urls[S]&&e;if(e){b.abort();break}E.push(void 0)}return E}}},i.prototype.flush=function(){for(;this.thumb_url_queue.length;)this.batch_queue.push(this.thumb_url_queue.splice(0,this.batch_size));return this._send_batch_requests()},i.prototype.reset=function(t){var e;return e=t.batch_size,this.batch_logger=t.batch_logger,this.batch_size=e||this.DEFAULT_BATCH_SIZE},i.prototype.clear=function(){return this.thumb_url_queue=[]},i.prototype.pause=function(){return this.flushing=!1},i.prototype._send_batch_requests=function(){var t,n,r,i,o,s,a,l,u,c,_,h,d,p,f;if(!(0===this.batch_queue.length||this.num_requests_in_flight>=this.max_parallel_requests)){for(this.flushing=!0,p=this.batch_queue.shift(),c=this._generate_request_params(p),i=c[0],u=c[1],r=c[2],"function"==typeof this.on_batch&&this.on_batch(p),o=0,a=p.length;a>o;o++)for(f=p[o],_=this.request_ids_by_url[f],s=0,l=_.length;l>s;s++)d=_[s],"function"==typeof(t=this._request_callback_by_request_id)[d]&&t[d](),delete this._request_callback_by_request_id[d];return n=this.next_batch_id,this.next_batch_id++,this.num_requests_in_flight++,h=e.SilentBackgroundRequest({xhrFields:{withCredentials:!0},url:i,type:u,data:r,success:this._success.bind(this,p),error:this._error.bind(this,p),complete:this._complete.bind(this,n)}),this.outstanding_batches[n]={urls:p,request:h},this._send_batch_requests()}},i.prototype._success=function(t,e){var n,r,i,o,s,a,l,u,c,_,h,d,p,f,m,g,v;for(_=e.split("\n"),h={},i=0,s=t.length;s>i;i++)v=t[i],h[v]=!1;for(c=o=0,a=_.length;a>o;c=++o)u=_[c],p=u.indexOf(":"),-1!==p&&(f=u.substring(0,p).split("-"),r=parseInt(f[0],10),n=u.substring(p+1),v=t[r],h[v]=!0,this._call_callback(v,n),"function"==typeof this.batch_logger&&this.batch_logger(c,t.length));for("function"==typeof this.on_batch_success&&this.on_batch_success(t),m=t.filter(function(t){return!h[t]}),g=[],d=0,l=m.length;l>d;d++)v=m[d],null==this.cancelled_urls[v]?g.push(this._call_callback(v,v)):g.push(void 0);return g},i.prototype._error=function(t){var e,n,r,i;for(r=[],e=0,n=t.length;n>e;e++)i=t[e],r.push(this._call_callback(i,i));return r},i.prototype._complete=function(t){var e,n,r,i,o,s;for(this.num_requests_in_flight--,r=this.outstanding_batches[t],s=r.urls,i=r.request,e=0,n=s.length;n>e;e++)o=s[e],delete this.cancelled_urls[o];return delete this.outstanding_batches[t],this.flushing?this._send_batch_requests():void 0},i.prototype._call_callback=function(t,e){var n,r,i,o,s;if(n=0===e.indexOf("data:image")?e:t,null!=this.request_ids_by_url[t])for(o=this.request_ids_by_url[t],r=0,i=o.length;i>r;r++)s=o[r],this.callback_by_id[s].callback(n,!1),delete this.callback_by_id[s];return delete this.request_ids_by_url[t]},i.prototype._generate_request_params=function(e){var i,o,s,a,l,u,c,_;return c=t.map(e,function(t){return n.parse(t).setScheme().setAuthority().toString()}),_=JSON.stringify(c),a=Math.abs(this._hash_string_to_int(_)),o=a%r.BATCH_THUMB_ENDPOINTS.length,i=r.BATCH_THUMB_ENDPOINTS[o],u={image_urls:_,parallel:!0},s=n.parse(i).setQuery(u).toString(),l=s.length>this.MAX_URL_LENGTH?"POST":"GET",[i,l,u]},i.prototype._hash_string_to_int=function(t){var e,n,r,i,o;if(n=0,0===t.length)return n;for(r=i=0,o=t.length;o>=0?o>i:i>o;r=o>=0?++i:--i)e=t.charCodeAt(r),n=(n<<5)-n+e;return n},i}()})}.call(this),function(){define("modules/clean/photos/legacy_thumb_loader",["jquery","modules/clean/photos/batch_thumb_loader","modules/clean/sprite"],function(t,e,n){var r;return r={MAX_THUMB_BATCH_REQUESTS:24,batch_load_thumbs:function(r,i,o,s){var a,l,u,c,_,h,d,p,f,m,g;for(g=t.grep(r,function(e){return t(e).data("src")}),this.img_map={},_=0,d=g.length;d>_;_++)u=g[_],f=String(t(u).data("src")),null==(l=this.img_map)[f]&&(l[f]=[]),this.img_map[f].push(u);for(this.instance?this.instance.reset({batch_size:i,batch_logger:s}):this.instance=new e({batch_size:i,max_parallel_requests:this.MAX_THUMB_BATCH_REQUESTS,on_batch:function(e){return function(n){var r,i,o,s,a;for(s=[],i=0,o=n.length;o>i;i++)a=n[i],r=t(e.img_map[a]),r.data("src",null),s.push(r.data("loading-src",a));return s}}(this),batch_logger:s}),c=[],h=0,p=g.length;p>h;h++)u=g[h],a=t(u),m=a.data("src"),this.instance.queue_thumb(m,function(t,e,r,i){return i||e.data("loading-src")?(e.data("loading-src",null),0===r.indexOf("data:image")?(e.attr("src",r),"function"==typeof o?o(e[0]):void 0):(e.error(function(){return e.attr("src",e.data("fail-src")||n.SPACER)}),e.load(function(){return"function"==typeof o?o(e[0]):void 0}),e.attr("src",r))):void 0}.bind(this,m,a));return this.instance.flush(),g.length},clear_all_pending_batches:function(){var t;return null!=(t=this.instance)?t.clear():void 0}}})}.call(this),define("modules/clean/profile_services/auth_callback_handler",["require","exports","modules/core/browser","modules/core/notify","modules/core/uri","modules/core/i18n"],function(t,e,n,r,i,o){"use strict";function s(t,e,n){var r=t.success&&t.user_id;r?a(e.cont):t.success?l({emailSig:t.email_sig,refreshToken:t.refresh_token,profile:t.profile},e,n):c({errMsg:t.err_msg,rememberMe:t.remember_me,pairUser:t.pair_user,profile:t.profile,emailSig:t.email_sig,refreshToken:t.refresh_token},e.cont,n)}function a(t){n.redirect(t)}function l(t,e,r){var o={fname:t.profile.given_name,lname:t.profile.family_name,email:t.profile.email,picture_url:t.profile.picture_url,email_sig:t.emailSig,refresh_token:t.refreshToken,cont:e.cont,signup_tag:e.signupTag};null!=e.k&&(o.k=e.k),null!=e.eh&&(o.eh=e.eh),r&&u(r.form,r.newAccount,o),e.canRedirect&&n.redirect(new i({path:"/third_party_signup",query:o}).toString())}function u(t,e,n){t.trigger(e,n)}function c(t,e,s){if("tfa_required"===t.errMsg){var a={cont:e};null!=t.pairUser&&(a.pair_user=t.pairUser.toString()),null!=t.rememberMe&&(a.remember_me=t.rememberMe.toString()),n.redirect(new i({path:"/verify_code",query:a}).toString())}else if("sso_required"===t.errMsg){var a={email:t.profile.email,cont:e};n.redirect(new i({path:"/login",query:a}).toString())}else"user_exists"===t.errMsg?(s&&u(s.form,s.userExists,{focus:"input[name=login_password]",prefill:{".login-email":t.profile.email,"input[type='hidden'][name=refresh_token]":t.refreshToken,"input[type='hidden'][name=email_sig]":t.emailSig}}),r.error(o._("This email address is already taken. Please sign in."))):r.error(o._("Unable to link to Google. Please refresh the page to try again."))}e.handleRegisterResponse=s}),define("modules/clean/profile_services/popup_handler",["require","exports","external/underscore"],function(t,e,n){"use strict";function r(t){var e=n.uniqueId(),r=function(e){var n;try{n=JSON.parse(e.data)}catch(t){return}n&&"db:profile_service:auth_complete"===n.type&&t(n.payload)};return window.addEventListener("message",r),o[e]=r,e}function i(t){var e=o[t];e&&(delete o[t],window.removeEventListener("message",e))}var o={};e.addAuthCompleteListener=r,e.removeAuthCompleteListener=i}),function(){define("modules/clean/profile_services/profile_services_constants",["modules/core/exception","modules/core/i18n"],function(t,e){var n,r,assert;return assert=t.assert,r=e._,n={GOOGLE:"1",YAHOO:"2",FACEBOOK:"3",TWITTER:"4",YAHOO_LEGACY:"5",MOBILE:"6",NEVER_CONNECTED:0,WAS_CONNECTED:1,IS_CONNECTED:2,VARIOUS:"-1",NONE:"-2",services:function(){return[this.GOOGLE,this.YAHOO,this.FACEBOOK,this.TWITTER,this.YAHOO_LEGACY]},importable_contact_services:function(){return[this.GOOGLE,this.YAHOO]},to_img:function(t){switch(t){case this.GOOGLE:return["/static/images/contacts/import_icon_gmail-vflFQwVYO.png","/static/images/contacts/import_icon_gmail@2x-vflO2fTFE.png"];case this.YAHOO:case this.YAHOO_LEGACY:return["/static/images/contacts/import_icon_yahoo-vfl5E728M.png","/static/images/contacts/import_icon_yahoo@2x-vflnVdi5R.png"];case this.FACEBOOK:return["/static/images/contacts/import_icon_facebook-vfluFbt1j.png","/static/images/contacts/import_icon_facebook@2x-vfl7Zk5rR.png"];default:return assert(!1,"Should never get ProfileServicesConstants.to_img with service: "+t)}},to_name:function(t){switch(t){case this.GOOGLE:return r("Gmail");case this.YAHOO:return r("Yahoo! Mail");case this.FACEBOOK:return r("Facebook");case this.VARIOUS:return r("Email");case this.YAHOO_LEGACY:return r("Yahoo! Mail");default:return assert(!1,"Should never get ProfileServicesConstants.to_name with service: "+t)}},logging_identifiers:function(t){switch(t){case this.GOOGLE:return"google";case this.YAHOO:return"yahoo";case this.FACEBOOK:return"facebook";case this.VARIOUS:return"email";case this.YAHOO_LEGACY:return"yahoo_legacy";default:return assert(!1,"Should never get ProfileServicesConstants.logging_identifiers with service: "+t)}}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;define("modules/clean/profile_services/profile_services_link",["jquery","modules/core/cookies","modules/core/exception","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/ajax","modules/clean/profile_services/popup_handler","modules/clean/profile_services/profile_services_constants","modules/clean/user","modules/clean/viewer","modules/constants/request","modules/constants/viewer","modules/core/browser"],function(r,i,o,s,a,l,u,c,_,h,d,p,f,m){var g,v,w,y,b,E,x,assert,S;return assert=o.assert,E=s._,x=c.addAuthCompleteListener,S=c.removeAuthCompleteListener,v=function(){function n(e,n){return this.user_id=e,null==n&&(n=null),this.service_was_connected=t(this.service_was_connected,this),this.service_is_connected=t(this.service_is_connected,this),this.has_unconnected_services=t(this.has_unconnected_services,this),this.has_connected_services=t(this.has_connected_services,this),this.connected_accounts_for_service=t(this.connected_accounts_for_service,this),this.get_or_update_connected_state=t(this.get_or_update_connected_state,this),this._update_on_auth_event=t(this._update_on_auth_event,this),assert(this.user_id,"No user id provided"),this._connected_services={},this.is_updated=!1,this.get_or_update_connected_state(!0,n),this._service_change_callbacks={},x(this._update_on_auth_event),r(document).on("db:profile_service:deauth_complete",this._update_on_auth_event),this}return n._LINKED_PROFILE_SERVICES={},n.get_linked_profile_services_for_user=function(t,e){var r;return null==e&&(e=null),assert(t,"No user_id: LinkedProfileServices.get_linked_profile_services_for_user()"),r=this._LINKED_PROFILE_SERVICES[t],null!=r?r.get_or_update_connected_state(!1,e):(r=new n(t,e),this._LINKED_PROFILE_SERVICES[t]=r),r},n.prototype._update_on_auth_event=function(t){var e,n,r,i;if(t.user_id===this.user_id){this.is_updated=!1,this.get_or_update_connected_state(!0),r=this._service_change_callbacks,i=[];for(n in r)e=r[n],i.push(e(this));return i}},n.prototype.get_or_update_connected_state=function(t,e){return null==t&&(t=!1),null==e&&(e=null),this.is_updated&&!t?"function"==typeof e?e(this):void 0:u.BackgroundRequest({url:"/profile_services/connected_services",subject_user:this.user_id,dataType:"json",success:function(t){return function(n,r,i){return t._connected_services=n,t.is_updated=!0,"function"==typeof e?e(t):void 0}}(this)})},n.prototype.connected_accounts_for_service=function(t){return this._connected_services[t]?r.map(this._connected_services[t],function(t){return t.source_id}):[]},n.prototype.has_connected_services=function(){var t,e,n,r;for(n=_.services(),t=0,e=n.length;e>t;t++)if(r=n[t],this.service_is_connected(r))return!0;return!1},n.prototype.has_unconnected_services=function(t){var e,n,r,i;for(null==t&&(t=!1),i=_.services(),t&&(i=_.importable_contact_services()),e=0,n=i.length;n>e;e++)if(r=i[e],r!==_.YAHOO_LEGACY&&!this.service_is_connected(r))return!0;return!1},n.prototype.service_is_connected=function(t){var n,r,i,o;if(assert(e.call(_.services(),t)>=0,"Not a valid profile service"),null==this._connected_services[t])return!1;for(o=this._connected_services[t],r=0,i=o.length;i>r;r++)if(n=o[r],n.connection_state===_.IS_CONNECTED)return!0;return!1},n.prototype.service_was_connected=function(t){var n,r,i,o;if(assert(e.call(_.services(),t)>=0,"Not a valid profile service"),null==this._connected_services[t])return!1;for(o=this._connected_services[t],r=0,i=o.length;i>r;r++)if(n=o[r],n.connection_state===_.WAS_CONNECTED)return!0;return!1},n.prototype.register_for_service_changes=function(t,e){return this._service_change_callbacks[t]=e},n.prototype.unregister_for_service_changes=function(t){return e.call(Object.keys(this._service_change_callbacks),t)>=0?delete this._service_change_callbacks[t]:void 0},n}(),w=function(){function t(t){this.is_desktop=t}return t}(),g=function(t){function e(t){this.host_nonce=t,e.__super__.constructor.call(this,!0)}return n(e,t),e}(w),b=function(t){function e(t,n,r){this.remember_me=t,this.cont=n,this.pair_user=r,e.__super__.constructor.call(this,!1)}return n(e,t),e}(w),y=function(){function n(){return this.deauth_service=t(this.deauth_service,this),this._redirect_to_identity_provider=t(this._redirect_to_identity_provider,this),this._popup_window=null,this}return n.show_import_notifications=function(t){if(!t.success)return null!=t.err_msg?a.error(t.err_msg):a.error(E("There was a problem completing this request."));switch(t.provider){case _.GOOGLE:return a.success(E("Imported Gmail Contacts."));case _.YAHOO:return a.success(E("Imported Yahoo! Mail contacts."));case _.FACEBOOK:return a.success(E("Successfully connected to Facebook."))}},n.show_verify_link_result=function(t){return t.success?a.success(E("Verified account and imported contacts")):null!=t.err_msg?a.error(t.err_msg):a.error(E("Couldn’t link account. Please try again."))},n.prototype._attach_popup_handlers=function(t){var e,n;return n=function(n){return function(r){var i;return S(e),null!=(i=n._popup_window)&&i.close(),n._popup_window=null,t(r)}}(this),e=x(n)},n.prototype._post_redirect_to_url=function(t,e,n,o){var s,a,u;return e.t=i.read(p.JS_CSRF_COOKIE),s=r("<form>",{action:String(l({path:"/profile_services/redirect_to_identity_provider",query:e})),method:"post",style:"display: none"}),o&&(this._attach_popup_handlers(n),u=_.to_name(t),a=function(t){return function(e){return t._popup_window=window.open("/profile_services/splash",u,"width=600,height=600,resizable=1,scrollbars=1"),e.target=u}}(this),r(s).submit(function(){return a(this)})),r("body").append(s),r(s).submit()},n.prototype._redirect_to_identity_provider=function(t,e,n,r,i,o,s){var a;return null==o&&(o=!0),null==s&&(s=null),a={user_id:n,service:t,is_popup:o,referrer:i,action:e,prompt_select:!0},s?s.is_desktop?(a.is_desktop=!0,a.host_nonce=s.host_nonce):(a.is_desktop=!1,a.remember_me=s.remember_me,a.cont=s.cont,a.pair_user=s.pair_user):a.is_desktop=!1,this._post_redirect_to_url(t,a,r,o)},n.prototype.auth_service_with_user=function(t,e,n,r){var i;return null==n&&(n=null),null==r&&(r=null),assert(t,"No service provided"),assert(e,"No user_id provided"),i=d.get_viewer().get_user_by_id(e),assert(i,"No user for user_id "+e),this._redirect_to_identity_provider(t,"link_contacts",e,n,r)},n.prototype.auth_service_with_specified_user=function(t,e,n,r){var i;return assert(t,"No service provided"),assert(e,"No user_id provided"),i=d.get_viewer().get_user_by_id(e),assert(i,"No user for user_id "+e),this._redirect_to_identity_provider(t,"link_target_user",e,n,r)},n.prototype.auth_service_create_user_if_needed=function(t,e,n,r){return null==e&&(e=null),null==n&&(n=null),null==r&&(r=!0),assert(t,"No service provided"),this._redirect_to_identity_provider(t,"create_user",null,e,n,r)},n.prototype.auth_service_login_desktop=function(t,e,n){var r;return assert(t,"No service provided"),r=new g(n),this._redirect_to_identity_provider(t,"login_user",null,e,null,!0,r)},n.prototype.auth_service_login_web=function(t,e,n,r,i,o){var s;return assert(t,"No service provided"),s=new b(r,i,o),this._redirect_to_identity_provider(t,"login_user",null,e,n,!0,s)},n.prototype.deauth_service=function(t,n,i,o){var s,a;return null==i&&(i=null),null==o&&(o=null),a=function(s){return function(s){return s.service_is_connected(t)?(null!=i&&assert(e.call(s.connected_accounts_for_service(t),i)>=0,"Service is not currently connected"),u.WebRequest({url:"/profile_services/unlink",subject_user:n,data:{service:t,source_id:i},success:function(t,e,i){return r(document).trigger(r.Event("db:profile_service:deauth_complete",{user_id:n})),"function"==typeof o?o(!0):void 0},error:function(t,e,n){return"function"==typeof o?o(!1):void 0}})):void("function"==typeof o&&o(!0))}}(this),assert(e.call(_.services(),t)>=0,"Not a valid profile service"),assert(n,"No user_id provided"),n=parseInt(n),s=v.get_linked_profile_services_for_user(n,a)},n}(),{LinkedProfileServices:v,ProfileServicesLinkingHandler:y}})}.call(this),define("modules/clean/profile_services/third_party_signup",["require","exports","jquery","modules/constants/env","modules/constants/request","modules/core/browser","modules/core/cookies","modules/core/i18n","modules/core/notify","modules/core/uri","external/rsvp"],function(t,e,n,r,i,o,s,a,l,u,c){"use strict";var _=function(){function t(){}return t.downloadPicture=function(t){return new c.Promise(function(e,n){if(!t)return void n("bad_url");var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(){if(200===r.status){var t=r.getResponseHeader("content-type")||"",i=new Blob([r.response],{type:t});e(i)}else n("bad_download_status")},r.onerror=function(){return n("xhr_error")},r.send()})},t.uploadAccountPhoto=function(t,e){return new c.Promise(function(n,o){var a=new u({authority:r.BLOCK_CLUSTER,path:"/upload_account_photo",query:{t:s.read(i.JS_CSRF_COOKIE),_subject_uid:t}}),l=new FormData;l.append("file",e);var c=new XMLHttpRequest;c.open("POST",a.toString(),!0),c.withCredentials=!0,c.onload=function(){return n(t)},c.onerror=function(){return o("upload_fail")},c.send(l)})},t}();e.PictureURLHandler=_;var h=function(){function t(){}return t.init=function(e,n){t.handlePictureUrl(e,n,!0)},t.handlePictureUrl=function(t,e,r){return new c.Promise(function(i){var s=null;_.downloadPicture(t).then(function(t){n("#profile-picture img").attr("src",URL.createObjectURL(t)),n("#profile-picture").show(),s=t},function(){}),n(document).on("db:register:success",function(t,n){var c=function(){if(r){l.success(a._("Registration successful! Your browser will be redirected in a few seconds."));var t=e?u.parse(e):u.parse(n.redirect_url||"/"),s={success:"true"};t.setQuery(s),o.redirect(t.toString())}i("register_success")};null!=s?_.uploadAccountPhoto(n.id,s).finally(c):c()})})},t}();e.ThirdPartySignup=h}),define("modules/clean/react/button",["require","exports","tslib","external/classnames","external/react","external/underscore"],function(t,e,n,r,i,o){"use strict";var s=function(t){function e(e){var n=t.call(this,e)||this;return n._buildDOMAttributes=n._buildDOMAttributes.bind(n),n}return n.__extends(e,t),e.prototype._buildDOMAttributes=function(t){var e={};e["button-"+t.importance]=!0,e["button-"+t.variant]=null!=t.variant&&"standard"!==t.variant,null!=t.className&&(e[t.className]=!0);var n=o.omit(t,"importance","variant");return n.className=r(e),n},e}(i.Component);s.defaultProps={importance:"primary"};var a=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),e.prototype.render=function(){return i.DOM.button(this._buildDOMAttributes(this.props),this.props.children)},e}(s);e.Button=a;var l=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),e.prototype.render=function(){var t=this._buildDOMAttributes(this.props);return delete t.disabled,i.DOM.a(t,this.props.children)},e}(s);e.LinkButton=l,e.button=a,e.link_button=l}),function(){define("modules/clean/react/css",["external/react","external/underscore","modules/clean/css","modules/clean/js_environment","external/hoist-non-react-statics"],function(t,e,n,r,i){var o,s,a;return s=t.createElement,o={LOADING:"loading",SUCCESS:"success",FAILED:"failed",FORCE_RENDERED:"force-rendered"},a=function(a,l,u){var c,_,h,d,p,f,m,g,v,w,y,b,E,x,S,k;for(null==u&&(u=[]),v=null!=(S=a.displayName)?S:"UnnamedComponent",k="Css("+v+")",f={},g=0,b=l.length;b>g;g++)m=l[g],f[m]=!0;for(w=0,E=u.length;E>w;w++)if(_=u[w],d="function"==typeof _.getCombinedCssPaths?_.getCombinedCssPaths():void 0,(null!=d?d.length:void 0)>0)for(y=0,x=d.length;x>y;y++)h=d[y],f[h]=!0;return p=Object.keys(f),c=t.createClass({displayName:k,statics:{getCombinedCssPaths:function(){return p},wrappedClass:a},propTypes:{cssPlaceholder:t.PropTypes.node,onCssFail:t.PropTypes.func,onCssLoad:t.PropTypes.func,skipCssInTest:t.PropTypes.bool},getDefaultProps:function(){return{cssPlaceholder:null,onCssFail:function(t){return t()},onCssLoad:null,skipCssInTest:!0}},getInitialState:function(){var t;return t=r.isTest()&&this.props.skipCssInTest||n.is_loaded(p)?o.FORCE_RENDERED:o.LOADING,{cssMode:t}},componentWillMount:function(){return this._isMounted=!0,this.state.cssMode===o.LOADING?n.require_css_multi(p,this._handleCssLoaded,this._handleCssFailed):void 0},componentWillUnmount:function(){return this._isMounted=!1},render:function(){var t;return(t=this.state.cssMode)===o.FORCE_RENDERED||t===o.SUCCESS?s(a,e.extend({ref:"wrapped"},this.props),this.props.children):this.props.cssPlaceholder},getWrappedComponent:function(){return this.refs.wrapped},_handleCssLoaded:function(){return this._isMounted?this.setState({cssMode:o.SUCCESS},function(t){return function(){var e;return"function"==typeof(e=t.props).onCssLoad?e.onCssLoad():void 0}}(this)):void 0},_handleCssFailed:function(){return this._isMounted?this.setState({cssMode:o.FAILED},function(t){return function(){var e;return"function"==typeof(e=t.props).onCssFail?e.onCssFail(t._forceRender):void 0}}(this)):void 0},_forceRender:function(){return this.setState({cssMode:o.FORCE_RENDERED})}}),i(c,a)}})}.call(this),function(){define("modules/clean/react/form_error_mixin",["external/react","external/underscore"],function(t,e){var n,r;return r=t.DOM,n={propTypes:{errorWrapperClassName:t.PropTypes.string,errorWrapperIdName:t.PropTypes.string,"disable-errors":t.PropTypes.bool,"error-after":t.PropTypes.bool,error:t.PropTypes.shape({message_text:t.PropTypes.string,message_html:t.PropTypes.string})},getInitialState:function(){return{errorWrapperIdName:this.props.errorWrapperIdName?this.props.errorWrapperIdName:e.uniqueId("error-message")}},renderErrorIfEnabled:function(){return this.props["disable-errors"]?void 0:this.renderError()},renderError:function(){var t,e;return null!=(null!=(t=this.props.error)?t.message_html:void 0)?r.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName,dangerouslySetInnerHTML:{__html:this.props.error.message_html}}):r.div({id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName},null!=(e=this.props.error)?e.message_text:void 0)}}})}.call(this),function(){define("modules/clean/react/input",["external/classnames","external/react","external/react-dom","external/underscore","jquery","modules/clean/keycode","modules/clean/react/form_error_mixin","modules/clean/react/sprite","modules/core/browser","modules/core/i18n","require"],function(t,e,n,r,i,o,s,a,l,u,c){var _,h,d,p;return _=u._,h=e.createElement,d=e.DOM,p=function(u,p){return e.createClass({displayName:u+"."+p,propTypes:{expandable:e.PropTypes.bool,expandedWidthOffset:e.PropTypes.number,animationCurve:e.PropTypes.string,animationDuration:e.PropTypes.number,onCloseClick:e.PropTypes.func,defaultValue:e.PropTypes.string,value:e.PropTypes.string,autofocus:e.PropTypes.bool,autoresize:e.PropTypes.bool,inline:e.PropTypes.bool,className:e.PropTypes.string,valueLink:e.PropTypes.object,variant:e.PropTypes.string,id:e.PropTypes.string,label:e.PropTypes.string,afterRender:e.PropTypes.func,onClick:e.PropTypes.func,onFocus:e.PropTypes.func,onBlur:e.PropTypes.func,onKeyDown:e.PropTypes.func,onChange:e.PropTypes.func,compatiblePlaceholder:e.PropTypes.bool,placeholder:e.PropTypes.string,measureStrength:e.PropTypes.bool,error:e.PropTypes.shape({message_text:e.PropTypes.string,message_html:e.PropTypes.string})},mixins:[s],getDefaultProps:function(){return{errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1}},getInitialState:function(){return{inputWidth:0,expanded:!1,value:this.props.defaultValue,compatiblePlaceholderVisible:this.supportsCompatiblePlaceholder()}},componentWillMount:function(){return this.props.measureStrength?c(["external/zxcvbn"],function(t){return function(e){return t.setState({zxcvbn:e})}}(this)):void 0},componentDidMount:function(){var t;return this._renderFinished(),t=n.findDOMNode(this.refs.inputComponent).offsetWidth,this.setState({inputWidth:t})},componentDidUpdate:function(){return this._renderFinished()},supportsCompatiblePlaceholder:function(){return this.props.compatiblePlaceholder&&this.props.placeholder&&l.msie_version_at_most(9)},render:function(){var e,n,i,o,s,l,c,f,m,g,v,w,y,b;if(o={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===p},s={"text-input":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===u},s[this.props.variant||"standard"]=!0,null!=this.props.className)for(g=this.props.className.split(/\s/),c=0,m=g.length;m>c;c++)i=g[c],s[i]=!0;return l=this.renderErrorIfEnabled(),e=void 0,((null!=(v=this.props.error)?v.message_text:void 0)||null!=(null!=(w=this.props.error)?w.message_html:void 0))&&(e=this.state.errorWrapperIdName),n=r.omit(this.props,"expandable","expandedWidthOffset","animationCurve","animationDuration","onCloseClick","defaultValue","value","autofocus","autoresize","inline","className","valueLink","variant","id","name","label","afterRender","onClick","onFocus","onBlur","onKeyDown","onChange","compatiblePlaceholder","placeholder","measureStrength","error","error-after","disable-errors","errorWrapperClassName"),
f=d[u](r.extend({id:this.props.id,name:this.props.name,"aria-describedby":e,className:t(o),type:p,value:this.props.value||(null!=(y=this.props.valueLink)?y.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:"inputComponent",placeholder:this.props.placeholder||""},n)),d.div({className:t(s)},this.props["error-after"]?void 0:l,d.div({className:"text-input-wrapper"},this._renderPasswordStrengthBar(),f,this.supportsCompatiblePlaceholder()?d.span({ref:"textInputPlaceholder",className:"text-input-placeholder",style:{display:this.state.compatiblePlaceholderVisible?"block":"none"}},this.props.placeholder):void 0,this.props.expandable?d.a({href:"#",onClick:this.onCloseClick,ref:"closeButton",className:"close-button u-mar-left-xs"},h(a,{group:"web",name:"xclose",alt:_("Close")})):void 0,this.props.label&&!(this.props.value||(null!=(b=this.props.valueLink)?b.value:void 0)||this.state.value)?d.label({htmlFor:this.props.id},this.props.label):void 0),this.props["error-after"]?l:void 0)},getValue:function(){return n.findDOMNode(this.refs.inputComponent).value},setValue:function(t){return n.findDOMNode(this.refs.inputComponent).value=t,this.setState({value:t})},resizeComponent:function(){var t,e;return e=n.findDOMNode(this.refs.inputComponent),t=i(e),t.css("height","1px"),t.css("height",e.scrollHeight+"px")},_renderPasswordStrengthBar:function(){var t;return this.props.measureStrength?(t=function(t){return function(e){return t.state.score>=e?"password-input-dot-selected":void 0}}(this),d.div({className:"password-input-meter",ref:"meter"},d.div({className:"password-input-dot "+t(4)}),d.div({className:"password-input-dot "+t(3)}),d.div({className:"password-input-dot "+t(2)}),d.div({className:"password-input-dot "+t(1)}))):null},_renderFinished:function(){var t,e,r;return this.props.autoresize&&this.resizeComponent(),"function"==typeof(t=this.props).afterRender&&t.afterRender(),this.state.compatiblePlaceholderVisible?(r=i(n.findDOMNode(this.refs.textInputPlaceholder)),e=i(n.findDOMNode(this.refs.inputComponent)),r.css({position:"absolute","font-size":e.css("font-size"),color:"#aaa",left:e.css("padding-left"),top:parseInt(e.css("margin-top"))+e.outerHeight()/2-r.outerHeight()/2}),r.click(function(){return e.focus()})):void 0},onCloseClick:function(t){var e,r,o,s;return null!=t&&t.preventDefault(),this.props.expandable?(o=i(n.findDOMNode(this.refs.closeButton)),s=i(n.findDOMNode(this.refs.inputComponent)),o.stop().animate({opacity:0},this.props.animationDuration),s.stop().animate({width:this.state.inputWidth},this.props.animationDuration,this.props.animationCurve),"function"==typeof(r=this.props).onCloseClick&&r.onCloseClick(t),this.setState({expanded:!1}),this.supportsCompatiblePlaceholder()?this.setState({compatiblePlaceholderVisible:!0}):void 0):void("function"==typeof(e=this.props).onCloseClick&&e.onCloseClick(t))},onChangeInternal:function(t){var e,n;return"function"==typeof(e=this.props).onChange&&e.onChange(t),this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(t.target.value):this.setState({value:t.target.value})),this.supportsCompatiblePlaceholder()&&this.setState({compatiblePlaceholderVisible:0===t.target.value.length}),this.props.measureStrength?(n=this.state.zxcvbn&&t.target.value?Math.max(1,this.state.zxcvbn(t.target.value).score):0,this.setState({score:n})):void 0},onFocusInternal:function(t){var e,r,o,s,a,l,u;return"function"==typeof(e=this.props).onFocus&&e.onFocus(t),this.props.expandable!==!1?(a=i(t.target),r=i(n.findDOMNode(this.refs.closeButton)),l=this.state.inputWidth,0===l&&(l=n.findDOMNode(this.refs.inputComponent).offsetWidth,this.setState({inputWidth:l})),s=l+this.props.expandedWidthOffset,u=parseInt(a.css("padding-right")),o=s-u+r.width()/2,r.css({left:o}),a.stop().animate({width:s},this.props.animationDuration,this.props.animationCurve,function(t){return function(){return r.stop().animate({opacity:1},t.props.animationDuration)}}(this)),this.setState({expanded:!0})):void 0},onBlurInternal:function(t){var e;return"function"==typeof(e=this.props).onBlur?e.onBlur(t):void 0},onKeyDownInternal:function(t){var e;if("function"==typeof(e=this.props).onKeyDown&&e.onKeyDown(t),null!=this.state.expanded!=!1)switch(t.keyCode){case o.ESC:return t.target.blur(),this.onCloseClick()}}})},{password:p("input","password"),text:p("input","text"),textarea:p("textarea","text")}})}.call(this),function(){define("modules/clean/react/locale_selector",["jquery","external/react","external/underscore","modules/core/i18n","modules/core/exception","modules/clean/ajax","modules/clean/react/css","modules/clean/react/modal","modules/clean/react/sprite","modules/constants/locales","modules/constants/page_load","modules/core/browser","modules/core/notify","modules/core/uri"],function(t,e,n,r,i,o,s,a,l,u,c,_,h,d){var p,f,m,g,v,w,y,b,E,x;return v=r._,g=a.Modal,x=e.DOM,b=e.createElement,y=function(t,e,n){var r;return null==n&&(n=!1),r=n?"/team/admin/set_locale":"/set_locale",h.success(v("Changing language...")),o.SilentBackgroundRequest({url:d({path:r}),data:{locale:t,locale_cont:e},success:function(){return _.redirect(e)}})},m=e.createClass({displayName:"LocaleTag",propTypes:{locale:e.PropTypes.shape({localeCode:e.PropTypes.string.isRequired,localeName:e.PropTypes.string.isRequired,decorator:e.PropTypes.string.isRequired}).isRequired},render:function(){var t;return t=this.props.locale.localeName,""!==this.props.locale.decorator&&(t+=" ["+this.props.locale.decorator+"]"),x.span({"data-locale":this.props.locale.localeCode},t)}}),w=e.createClass({displayName:"LocaleSelectorModal",propTypes:{isTeamAdminSettingsConsole:e.PropTypes.bool.isRequired,shouldAllowInternalLocales:e.PropTypes.bool.isRequired},handleCloseModal:function(t){return history.pushState("",document.title,_.get_href_no_hash())},handleLocaleSelected:function(t){return function(e){return function(n){return n.preventDefault(),history.pushState("",document.title,_.get_href_no_hash()),g.close(),y(t,_.get_href_no_hash(),e.props.isTeamAdminSettingsConsole)}}(this)},_renderLocaleList:function(){var t,e;return e=this.props.shouldAllowInternalLocales?u.LIST_OF_LOCALES_WITH_INTERNAL:u.LIST_OF_LOCALES_WITHOUT_INTERNAL,x.div({className:"react-locale-selector-modal"},x.ul({className:"react-locale-selector-modal__list u-unlist u-trim-padding"},function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(this._renderLocale(t));return i}.call(this)))},_renderLocale:function(t){return x.li({key:t.localeCode},x.button({className:"locale-option button-as-link react-locale-selector-modal__list-item-button",onClick:this.handleLocaleSelected(t.localeCode).bind(this)},b(m,{locale:t})))},render:function(){return b(g,{onDismissCompleted:this.handleCloseModal,ref:"modal",width:550,title:v("Choose a language"),acceptButtonText:null},this._renderLocaleList())}}),f=s(w,["/static/css/components/react_locale_selector-vflhGMsCx.css","/static/css/modal-vfl0JUqZj.css"]),p=e.createClass({displayName:"LocaleSelector",statics:{showModal:function(t,e){return null==t&&(t=!1),null==e&&(e=!0),g.showInstance(b(f,{isTeamAdminSettingsConsole:t,shouldAllowInternalLocales:e}))}},propTypes:{isTeamAdminSettingsConsole:e.PropTypes.bool,shouldAllowInternalLocales:e.PropTypes.bool},getDefaultProps:function(){return{isTeamAdminSettingsConsole:!1,shouldAllowInternalLocales:!0}},handleLocaleLinkClick:function(t){return t.preventDefault(),g.showInstance(b(f,{isTeamAdminSettingsConsole:this.props.isTeamAdminSettingsConsole,shouldAllowInternalLocales:this.props.shouldAllowInternalLocales}))},_renderLocaleLink:function(){return x.span({id:"locale-link"},b(l,{group:"web",name:"globe_gray_20x20",alt:""}),x.button({className:"button-as-link react-locale-selector-link",title:v("Choose a language"),onClick:this.handleLocaleLinkClick},b(m,{locale:n.find(u.LIST_OF_LOCALES_WITH_INTERNAL,function(t){return t.localeCode===c.USER_LOCALE})}),b(l,{class:"arrow",group:"web",name:"arrow-up-gray",alt:""})))},render:function(){return x.div({id:"locale-container"},this._renderLocaleLink())}}),E=s(p,["/static/css/components/locale_selector-vflRu24eh.css"]),{LocaleSelectorModal:f,LocaleSelector:E,initialize_module:function(e){return(null!=e?e.dom_id:void 0)?t(document).ready(function(){return t("#"+e.dom_id).click(function(){return E.wrappedClass.showModal()})}):void 0}}})}.call(this),function(){define("modules/clean/react/modal",["external/classnames","external/react","external/react-dom","external/purify","jquery","modules/core/i18n","modules/core/dom","modules/clean/react/button","modules/clean/keycode"],function(t,e,n,r,i,o,s,a,l){var u,c,_,h,d,p,f,m,g,v;return p=o._,m=a.button,v=e.DOM,g=e.createElement,u="react-modal-root",f=function(t){var e,n;return null==t&&(t=!0),e=u,n=i("#"+e),!n.length&&t&&(n=i("<div />").attr({id:e}).prependTo("body")),n[0]},c=e.createClass({displayName:"Modal",statics:{showInstance:function(t,e){var r;return null==e&&(e=!0),r=f(),e&&(n.unmountComponentAtNode(r),i(r).siblings().not("#accessible-announce").attr("aria-hidden",!0)),n.render(t,r)},close:function(t){var e;e=f(),e&&(n.unmountComponentAtNode(e),i(e).siblings().removeAttr("aria-hidden"),null!=t&&t.focus())},unhide:function(){var t;return t=f(),t?i(t).show():void 0},hide:function(){var t;return t=f(),t?i(t).hide():void 0}},propTypes:{width:e.PropTypes.number,submitting:e.PropTypes.bool,title:e.PropTypes.string,acceptButtonText:e.PropTypes.string,dismissButtonText:e.PropTypes.string,acceptButtonImportance:e.PropTypes.string,altAction:e.PropTypes.node,trackingIdPrefix:e.PropTypes.string,headerId:e.PropTypes.string,onAccept:e.PropTypes.func,onDismiss:e.PropTypes.func,onDismissCompleted:e.PropTypes.func,onShow:e.PropTypes.func,buttonComponent:e.PropTypes.element,autoClose:e.PropTypes.bool,clickOutToClose:e.PropTypes.bool,showX:e.PropTypes.bool,showButtonDivider:e.PropTypes.bool,acceptButtonDisabled:e.PropTypes.bool,dismissButtonDisabled:e.PropTypes.bool,autoFocusPrimaryInput:e.PropTypes.bool,style:e.PropTypes.oneOf(["default","clean","simple","lightbox","bare"]),setMaxHeight:e.PropTypes.bool,className:e.PropTypes.string},close:function(){return c.close(this.elementToFocusOnClose)},_invokeCallbackAndClose:function(t,e,n){return null!=t&&"function"==typeof t.call&&t.call(this,e),e.isDefaultPrevented()?void 0:this.props.autoClose||n?this.close():void 0},_dismiss:function(t){var e;this._invokeCallbackAndClose(this.props.onDismiss,t,!0),null!=(e=this.props.onDismissCompleted)&&"function"==typeof e.call&&e.call(this,t)},_accept:function(t){this._invokeCallbackAndClose(this.props.onAccept,t,!1)},_onClickOnOverlay:function(t){this.props.clickOutToClose&&this._dismiss(t)},getDefaultProps:function(){return{acceptButtonText:p("OK"),acceptButtonImportance:"primary",dismissButtonText:null,buttonComponent:null,headerId:"db-modal-title",onAccept:function(){},onDismiss:function(){},onShow:function(){},autoClose:!0,clickOutToClose:!0,style:"default",showX:!0,acceptButtonDisabled:!1,dismissButtonDisabled:!1,autoFocusPrimaryInput:!0}},_focus:function(){var t,e,r,o;return this.elementToFocusOnClose=document.activeElement,t=i(n.findDOMNode(this.refs.modal)),this.props.autoFocusPrimaryInput&&(e=t.find("input:not(:disabled)").first(),r=null!=this.refs.primaryButton&&i(n.findDOMNode(this.refs.primaryButton)),o=null!=this.refs.tertiaryButton&&i(n.findDOMNode(this.refs.tertiaryButton)),e.length?t=e:r.length&&!r.is(":disabled")?t=i(n.findDOMNode(this.refs.primaryButton)):o.length&&!o.is(":disabled")&&(t=i(n.findDOMNode(this.refs.tertiaryButton)))),t.focus()},_keyDown:function(t){return t.which===l.ESC&&(t.stopPropagation(),this._dismiss(t)),t.which!==l.BACKSPACE||s.focus_in_input()||(t.preventDefault(),this._dismiss(t)),null!=this.refs.modal?s.keepFocusIn(n.findDOMNode(this.refs.modal),t):void 0},_trackingId:function(t){return null!=this.props.trackingIdPrefix?this.props.trackingIdPrefix+"-"+t:null},_renderButtons:function(){var t;return this.props.buttonComponent?this.props.buttonComponent:(t=[],this.props.submitting&&t.push(v.span({className:"dbmodal-loading",key:"loading"},v.img({src:"/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif",alt:p("Loading")}))),this.props.acceptButtonText&&t.push(g(m,{ref:"primaryButton",key:"primary",className:"dbmodal-button","data-trackingid":this._trackingId("accept"),importance:this.props.acceptButtonImportance,disabled:this.props.acceptButtonDisabled,onClick:this._accept},this.props.acceptButtonText)),this.props.dismissButtonText&&t.push(g(m,{ref:"tertiaryButton",key:"tertiary-dismiss",className:"dbmodal-button","data-trackingid":this._trackingId("dismiss"),importance:"tertiary",disabled:this.props.dismissButtonDisabled,onClick:this._dismiss},this.props.dismissButtonText)),t.length?v.div({className:"db-modal-buttons"},this.props.showButtonDivider?v.hr({}):void 0,t):void 0)},_renderAltAction:function(){return this.props.altAction?v.div({className:"db-modal__alt-action"},this.props.altAction):void 0},componentDidMount:function(){var t;return i(document).trigger("modalOpened",this),s.scroll_lock_document(),i(n.findDOMNode(this.refs.modal)).on("keydown",this._keyDown),this._focus(),"function"==typeof(t=this.props).onShow?t.onShow():void 0},componentWillUnmount:function(){return i(document).trigger("modalClosed",this),s.scroll_unlock_document(),i(n.findDOMNode(this.refs.modal)).off("keydown",this._keyDown)},render:function(){var e,n,r,i;return n={"db-modal-wrapper":!0,"db-modal--clean-style":"clean"===this.props.style,"db-modal--simple-style":"simple"===this.props.style,"db-modal--lightbox-style":"lightbox"===this.props.style,"db-modal--bare-style":"bare"===this.props.style},null!=this.props.className&&(n[this.props.className]=!0),e=t(n),r=this.props.width?{width:this.props.width+"px"}:{},v.div({className:e},v.div({className:"db-modal-overlay",onClick:this._onClickOnOverlay}),v.div({ref:"modal",className:"db-modal",tabIndex:-1,style:r,role:"dialog","aria-labelledby":"lightbox"===this.props.style?"":this.props.headerId},v.div({className:"db-modal-box",ref:"modalBox"},"lightbox"===(i=this.props.style)||"bare"===i?v.div({className:"db-modal-"+this.props.style},this.props.children):v.div({},this.props.showX?v.button({className:"db-modal-x",onClick:this._dismiss,"aria-label":p("Close"),"data-trackingid":this._trackingId("dismiss")}):void 0,v.h2({id:"db-modal-title",className:"db-modal-title"},v.div({className:"db-modal-title-text",ref:"title"},this.props.title)),v.div({className:"db-modal-content clearfix",ref:"content"},this.props.children,this._renderButtons(),this._renderAltAction())))))}}),h=e.createClass({displayName:"ModalButtons",render:function(){var e,n,r,i;r={},n=this.props;for(e in n)i=n[e],r[e]=i;return r.className=t(this.props.className,"db-modal-buttons"),v.div(r)}}),_=e.createClass({displayName:"ModalButton",propTypes:{importance:e.PropTypes.oneOf(["primary","secondary","tertiary"])},getDefaultProps:function(){return{importance:"primary"}},render:function(){var e,n,r,i;r={},n=this.props;for(e in n)i=n[e],"importance"!==e&&(r[e]=i);return r.className=t(this.props.className,"dbmodal-button","button-"+this.props.importance),v.button(r)}}),d={show:function(t){var n,i;return i={acceptButtonText:t.confirm_text,trackingIdPrefix:t.trackingIdPrefix,onAccept:t.confirm_callback,dismissButtonText:t.cancel_text,onDismiss:t.cancel_callback,onDismissCompleted:t.cancel_completed_callback,title:t.title_text,width:t.width,className:"simple-modal",autoClose:t.autoclose,style:t.style,onShow:t.on_show},n=g(c,i,e.DOM.div({className:"simple-modal-content",dangerouslySetInnerHTML:{__html:r.sanitize(t.body_html)}})),c.showInstance(n)}},{Modal:c,SimpleModal:d,ModalButtons:h,ModalButton:_,ReactModal:c}})}.call(this),function(){define("modules/clean/react/recaptcha_challenge",["jquery","external/react","modules/clean/react/form_error_mixin","modules/clean/react/input","modules/core/i18n","modules/clean/static_urls"],function(t,e,n,r,i,o){var s,a,l,u,c,_;return l=i._,_=o.static_url,s=r.text,c=e.DOM,u=e.createElement,a=e.createClass({displayName:"RecaptchaChallenge",mixins:[n],getDefaultProps:function(){return{public_key:"",errorWrapperClassName:"text-input-error-wrapper",variant:"standard",onInputChange:null}},componentDidMount:function(){var e;return e=this.props.public_key,t.getScript("https://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){return Recaptcha.create(e,"recaptcha_widget",{theme:"custom"})})},handleReloadLinkClick:function(){return Recaptcha.reload()},handleSwitchTypeToAudioLinkClick:function(){return Recaptcha.switch_type("audio")},handleSwitchTypeToImageLinkClick:function(){return Recaptcha.switch_type("image")},handleHelpLinkClick:function(){return Recaptcha.showhelp()},_renderButtons:function(){return c.div({className:this.props.variant+" recaptcha-buttons"},c.a({className:"recaptcha-button recaptcha-reload",onClick:this.handleReloadLinkClick},c.img({src:_("/static/images/icons/captcha-reload-vflqH90Ce.png")})),c.a({className:"recaptcha-button recaptcha_only_if_image",onClick:this.handleSwitchTypeToAudioLinkClick},c.img({src:_("/static/images/icons/captcha-audio-vfl_VBPgQ.png")})),c.a({className:"recaptcha-button recaptcha_only_if_audio",onClick:this.handleSwitchTypeToImageLinkClick},c.img({src:_("/static/images/icons/captcha-words-vfl-bt9Xw.png")})),c.a({className:"recaptcha-button recaptcha-show-help",onClick:this.handleHelpLinkClick},c.img({src:_("/static/images/icons/captcha-help-vfleUYtSD.png")})))},_renderRecaptchaResponseInput:function(){return u(s,{id:"recaptcha_response",name:"recaptcha_response",className:"login-text-input","disable-errors":!0,placeholder:l("Type the text"),onChange:this.props.onInputChange})},_renderDummyInput:function(){return c.input({type:"hidden",id:"recaptcha_response_field"})},_renderStandard:function(){var t;return t=this.renderErrorIfEnabled(),c.div({id:"recaptcha_widget",className:"standard recaptcha-container"},t,c.div({id:"recaptcha_image",className:"standard login-recaptcha-challenge-container"}),this._renderRecaptchaResponseInput(),this._renderButtons(),this._renderDummyInput())},_renderSmall:function(){var t;return t=this.renderErrorIfEnabled(),c.div({id:"recaptcha_widget",className:"small recaptcha-container"},t,c.div({id:"recaptcha_image",className:"small login-recaptcha-challenge-container"}),this._renderButtons(),this._renderRecaptchaResponseInput(),this._renderDummyInput())},render:function(){return"standard"===this.props.variant?this._renderStandard():"small"===this.props.variant?this._renderSmall():void 0},reload:function(){return Recaptcha.reload()}})})}.call(this),function(){define("modules/clean/react/sprite",["external/classnames","external/react","modules/clean/static_urls"],function(t,e,n){var r,i,o,s;return s=n.static_url,o=e.DOM,r=e.PropTypes,i=e.createClass({displayName:"Sprite",propTypes:{group:r.string.isRequired,name:r.string.isRequired,alt:r.string.isRequired,className:r.string,onClick:r.func,onDragStart:r.func,onMouseDown:r.func,title:r.string,"data-src":r.string},getDefaultProps:function(){return{onClick:function(){},onDragStart:function(){},onMouseDown:function(){}}},render:function(){var e;return e=this.props.alt||"",o.img({className:t(["sprite","sprite_"+this.props.group,"s_"+this.props.group+"_"+this.props.name,this.props.className]),src:s("/static/images/icons/icon_spacer-vflN3BYt2.gif"),"data-src":this.props["data-src"],onClick:this.props.onClick,onDragStart:this.props.onDragStart,onMouseDown:this.props.onMouseDown,alt:e,title:this.props.title})}})})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/register_form",["jquery","external/cyfd","external/pixie","external/underscore","modules/clean/ajax","modules/clean/captcha","modules/clean/legacy_pyxl_controllers/ajax_form","modules/clean/em_string","modules/clean/form_util/name_parser","modules/clean/mailcheck","modules/clean/profile_services/auth_callback_handler","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/constants/login_and_register","modules/constants/pixie","modules/core/browser","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,n,r,i,o,s,a,l,u,c,_,h,d,p,f,m,g,v,w){var y,b,E,x,S,k,C;return k=_.handleRegisterResponse,y=d.ProfileServicesLinkingHandler,x=g._,p.SPECTER_TELEMETRY_COLLECTION&&(C=new r.Pixie(f).get_specter(),C.start()),S=function(){return n.cfsubmit()},E=function(){function t(t,n,r){var i,o,a;this.$form=e(n),(null!=(a=this.$form.find(".recaptcha_v2_challenge"))?a.length:void 0)?(i=e(this.$form.find(".recaptcha_v2_challenge")),this.$captcha_component=new s(this.$form,i.attr("id"),null,"/ajax_needs_business_signup_captcha","email",t,!0)):this.$captcha_component=new s(this.$form,"#react-signup-recaptcha-challenge-div","#react-login-recaptcha-challenge-div","/ajax_needs_business_signup_captcha","email",t),r&&(o={message_text:r}),this.$captcha_component.captcha_display_handler(o),this.$form.on("submit",function(t){return function(t){return S()}}(this))}return t}(),b=function(){function n(n,r,i,o,u,_,d,p){var f,m,g,v,w,b,E,x;this.$register_form_container=n,this.can_redirect=i,this.show_form=o,this.client_side_validation=u,this.custom_error_handler=_,this.combined_name=d,this.last_name_goes_first=p,this._combined_name_handler=t(this._combined_name_handler,this),this._index_error_handler=t(this._index_error_handler,this),this._animate_form=t(this._animate_form,this),this._on_register_error=t(this._on_register_error,this),this._on_register_success=t(this._on_register_success,this),this._before_submit=t(this._before_submit,this),this._handle_google_callback=t(this._handle_google_callback,this),this.$register_form=this.$register_form_container.find(".register-form"),w={client_side_validation:this.client_side_validation,error_handler:!1},"index"===this.custom_error_handler&&(w.error_handler=this._index_error_handler,this.$register_form.on("click change","input",this._index_clear_error_handler)),this.register_controller=new a(this.$register_form,this._before_submit,w),this.cont=this.$register_form.find("input[name='cont']").val(),this.$register_form.find(".login-button, .auth-google").prop("disabled",!1),this.$register_form.find(".login-button.disabled-button").prop("disabled",!0),(null!=(x=this.$register_form.find(".recaptcha_v2_challenge"))?x.length:void 0)?(g=e(this.$register_form.find(".recaptcha_v2_challenge")),this.$captcha_component=new s(this.$register_form,g.attr("id"),null,"/ajax_needs_signup_captcha","email",r,!0)):this.$captcha_component=new s(this.$register_form,"#react-signup-recaptcha-challenge-div","#react-login-recaptcha-challenge-div","/ajax_needs_signup_captcha","email",r),f=this.$register_form.find("label[for='tos_agree']"),v=parseInt(f.css("font-size")),E=200,new l(f.text()).length*v>E&&this.$register_form.find(".checkbox").removeClass("checkbox-inline"),this.$register_form.on(a.SUCCESS_EVENT,this._on_register_success),this.$register_form.on(a.ERROR_EVENT,this._on_register_error),this.show_form?(m=this.$register_form.find("input[type='hidden'][name='is_third_party_auth']").val(),m&&(b=function(t,n){return!e(n).val()},this.$register_form_container.find("input").filter(":visible").filter(b).first().focus()),this.$register_form.is(":visible")&&this.$captcha_component.captcha_display_handler()):this.$register_form.find(".login-button").on("click",function(t){return function(e){return t.$register_form_container.hasClass("form_shown")?void 0:(e.preventDefault(),t._animate_form())}}(this)),this.$register_form.find(".auth-google").click(function(t){return function(e){var n,r,i;return n=function(e){return t._handle_google_callback(e)},i="true"===e.target.getAttribute("data-third-party-no-popup"),r=new y,r.auth_service_create_user_if_needed(h.GOOGLE,n,"register_form",!i)}}(this)),"small"===r?(this.$register_form.find(".bubble-dropdown-container .bubble-dropdown").css({visibility:"hidden"}),this.$register_form.find(".password-input-meter").css({cursor:"default"})):new c(this.$register_form.find(".input-email"),this.$register_form.find(".email-suggestion"),{livecheck:!1})}return n.REGISTER_SUCCESS="db:register:success",n.NEW_ACCOUNT_FROM_3RD_PARTY="db:register:new_account_from_3rd_party",n.USER_EXISTS="db:register:user_exists",n.prototype._handle_google_callback=function(t){var e,r,i,o;return e=this.$register_form.find("input[type='hidden'][name='cont']").val()||"/home",o=this.$register_form.find("input[type='hidden'][name='signup_tag']").val(),i=this.$register_form.find("input[type='hidden'][name='k']").val(),r=this.$register_form.find("input[type='hidden'][name='eh']").val(),k(t,{cont:e,signupTag:o,canRedirect:this.can_redirect,k:i,eh:r},{form:this.$register_form,newAccount:n.NEW_ACCOUNT_FROM_3RD_PARTY,userExists:n.USER_EXISTS})},n.prototype._before_submit=function(){return this.combined_name===!0&&this._combined_name_handler(),S(),p.SPECTER_TELEMETRY_COLLECTION?this.register_controller.add_additional_data({specter_signup_tm:C.dump()}):void 0},n.prototype._on_register_success=function(t,e){if(this.$register_form.trigger(n.REGISTER_SUCCESS,e),this.can_redirect){if(this.cont)return m.redirect(this.cont);if(e.redirect_url)return m.redirect(e.redirect_url)}},n.prototype._on_register_error=function(t,e){return this.$captcha_component.captcha_display_handler(null!=e?e.recaptcha_response:void 0)},n.prototype._animate_form=function(){return this.$register_form_container.hasClass("form_shown")?void 0:e.when(this.$register_form_container.animate({height:this.$register_form.height()},{easing:"easeInOutCubic",duration:500})).done(function(t){return function(){return t.$register_form_container.addClass("form_shown"),t.$register_form_container.filter(":input").filter(":visible").first().focus(),t.$captcha_component.captcha_display_handler()}}(this))},n.prototype.fill=function(t){return i.each(t,function(t){return function(e,n){return t.$register_form.find("[name="+n+"]").val(e)}}(this))},n.prototype._index_error_handler=function(t){var n,r,i,o;this.$register_form_container.find(".register-form__errors").remove(),n=e("<ul />").addClass("register-form__errors");for(i in t)r=t[i],o=r.message_text||r.message_html,e("<li />").addClass("register-form__error").html(o).appendTo(n),this.$register_form.find(".input-"+i).addClass("text-input--error"),"tos_agree"===i&&this.$register_form.find(".checkbox-inline.agree").addClass("checkbox-inline--error"),this.combined_name&&"fname"===i&&(this.$register_form.find(".input-fullname").addClass("text-input--error"),this.$register_form.find("input[name='fullname']").addClass("input-error")),this.$register_form.find("input[name='"+i+"']").addClass("input-error");return this.$register_form_container.append(n)},n.prototype._index_clear_error_handler=function(t){var n;return n=e(t.target),n.removeClass("input-error"),"checkbox"===n.attr("type")?n.parents(".checkbox-inline--error").removeClass("checkbox-inline--error"):n.parents(".text-input--error").removeClass("text-input--error")},n.prototype._combined_name_handler=function(){var t,e,n,r,i,o;if(t=this.$register_form_container.find('input[name="fullname"]'),e=this.$register_form_container.find('input[name="fname"]'),n=this.$register_form_container.find('input[name="lname"]'),i=u.splitFullName(t.val()),r=i[0],o=i[1],this.last_name_goes_first!==!0){if(e.val(r),void 0!==o&&o!==r)return n.val(o)}else if(n.val(r),void 0!==o&&o!==r)return e.val(o)},n}(),{RegisterNamesAndCredentialsWithCaptcha:E,RegisterForm:b}})}.call(this),function(){define("modules/clean/shared_link_error",["jquery","modules/clean/ajax"],function(t,e){var n;return n=function(){function n(){t("#broken-share-article").on("click",function(){return e.WebRequest({url:"/shared_link_error_log",data:{evt:r}})})}var r;return r="click-sharing-article",n}()})}.call(this),function(){define("modules/clean/sprite",["jquery","modules/core/html"],function(t,e){var n;return n={SPACER:"/static/images/icons/icon_spacer-vflN3BYt2.gif",CLASS_PREFIX:"s_",_make_class:function(t,e){return this.CLASS_PREFIX+t+"_"+e},src:function(e,n,r){return this.clear(e),t(e).addClass(this._make_class(n,r))},replace:function(e,n,r,i){return t(e).removeClass(this._make_class(n,r)).addClass(this._make_class(n,i))},clear:function(e){var n;return n=e.className.split(" "),n=t.grep(n,function(t){return function(e){return e&&0!==e.indexOf(t.CLASS_PREFIX)}}(this)),e.className=n.join(" ")},make:function(e,n,r){var i;return r=this._prep_attrs(e,n,r),i=t("<img />",r),i[0]},html:function(t,n,r){var i,o;r=this._prep_attrs(t,n,r),i=["<img "];for(o in r)i.push(o,'="',e._raw_escape(r[o]),'" ');return i.push("/>"),new e(i.join(""))},_prep_attrs:function(t,e,n){var r;return null==n&&(n={}),n.src=n.src||this.SPACER,r=["sprite","sprite_"+t,this._make_class(t,e)],n.class&&r.push(n.class),n.class=r.join(" "),n},_get:function(t){return t.className},_set:function(t,e){return t.className=e,t.src=this.SPACER}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/sso_login_checks",["modules/clean/ajax"],function(e){var n;return n=function(){function n(e,n,r,i){this.$email_input=e,this.show_sso_fn=n,this.hide_sso_fn=r,this.should_trigger_check=null!=i?i:!0,this.check_sso_state=t(this.check_sso_state,this),this._trigger_check_sso_state=t(this._trigger_check_sso_state,this),this.should_trigger_check&&(this._trigger_check_sso_state(),this.$email_input.on("input keyup change",this._trigger_check_sso_state))}return n._sso_check_in_flight={},n._sso_check_cache={},n.prototype._trigger_check_sso_state=function(){var t;return t=this.$email_input.val(),this.check_sso_state(t)},n.prototype.check_sso_state=function(t){var r,i;return i=t.trim(),i.match(/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/)?(r=i.toLowerCase(),r in n._sso_check_cache?this._handle_sso_state(n._sso_check_cache[r]):n._sso_check_in_flight[r]?void 0:(n._sso_check_in_flight[r]=!0,e.WebRequest({url:"/sso_state",data:{email:i},success:function(e){return function(i){return i=JSON.parse(i),delete n._sso_check_in_flight[r],n._sso_check_cache[r]=i.user_sso_state,e.should_trigger_check&&e.$email_input.val()!==t?e._trigger_check_sso_state():e._handle_sso_state(i.user_sso_state)}}(this),error:function(t){return function(){return delete n._sso_check_in_flight[r],t.hide_sso_fn()}}(this)}))):this.hide_sso_fn()},n.prototype._handle_sso_state=function(t){return"required"===t?this.show_sso_fn(!1):"optional"===t?this.show_sso_fn(!0):this.hide_sso_fn()},n}()})}.call(this),function(){define("modules/clean/static_urls",["modules/clean/filepath","modules/constants/env","modules/constants/page_load","modules/core/exception","modules/core/uri"],function(t,e,n,r,i){var assert,o,s,a;return s=t.filename_without_extension,o=t.file_extension,assert=r.assert,a=function(t){var r,a;return assert(0===t.indexOf("/static/"),t+" is not a /static url"),n.IS_PROD||-1!==t.indexOf("-vfl")||(r=s(t),a=o(t,!0),t=a?r+"-vflDEVHASH."+a:r+"-vflDEVHASH"),i({scheme:"https",authority:e.STATIC_CONTENT_HOST,path:t}).toString()},{static_url:a,UrlConstants:{MOXIE_SWF_URL:a("/static/swf/Moxie-vflz978zN.swf")}}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("modules/clean/storage",[],function(){var e,n,r;return e=function(){function t(){}return t.storage=void 0,t.get=function(t){return this.storage&&window.JSON?JSON.parse(this.storage.getItem(t)):void 0},t.set=function(t,e){var n,r;if(this.storage&&window.JSON)try{return null===e?this.delete(t):this.storage.setItem(t,JSON.stringify(e))}catch(t){if(n=t,!(n instanceof DOMException&&22===n.code))throw n}},t.delete=function(t){var e;return null!=(e=this.storage)?e.removeItem(t):void 0},t.reset=function(){var t;return null!=(t=this.storage)?t.clear():void 0},t}(),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),
n.storage=function(){try{return window.sessionStorage}catch(t){}}(),n}(e),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.storage=function(){try{return window.localStorage}catch(t){}}(),n}(e),{SessionStorage:r,LocalStorage:n}})}.call(this),function(){define("modules/clean/stormcrow/stormcrow_panel_action_types",[],function(){var t;return t={},t.ActionTypes={STORMCROW_REQUEST_INFO_RETRIEVED:"STORMCROW_REQUEST_INFO_RETRIEVED"},t})}.call(this),function(){define("modules/clean/stormcrow/stormcrow_panel_actions",["modules/clean/flux/dispatcher","modules/clean/stormcrow/stormcrow_panel_action_types"],function(t,e){var n,r;return n=e.ActionTypes,new(r=function(){function e(){}return e.prototype.FEATURES_USED_URL="/stormcrow_features_used",e.prototype.add_request_info=function(e){return t.dispatch({type:n.STORMCROW_REQUEST_INFO_RETRIEVED,data:e})},e}())})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/uirequest",["jquery","external/underscore","modules/core/html","modules/core/notify","modules/clean/ajax","modules/clean/css","modules/clean/legacy_pyxl_controllers/ajax_form","modules/clean/dbmodal","modules/pagelet_config"],function(e,n,r,i,o,s,a,l,u){var c,_,h;return c=l.DBModal,_=u.REQUIREJS_CONFIG,h=function(){function l(e,r,i){return this.$node=e,this.url=r,this.options=null!=i?i:{},this.complete=t(this.complete,this),this.handle_errors=t(this.handle_errors,this),this.error=t(this.error,this),this.perform_actions=t(this.perform_actions,this),this.success=t(this.success,this),this.shouldDelayComplete=!1,this.$node.hasClass("ajax-loading")?!1:(this.$node.addClass("ajax-loading"),void o.FormWebRequest({url:this.url,type:null!=this.options.type?this.options.type:void 0,data:this.options.data||{},success:this.success,error:this.error,complete:this.complete,subject_user:this.options.subject_user,headers:n.extend({"X-RequireJS-Context":_.context,"X-UIRequest-Version":2},this.options.headers)}))}return l.prototype.success=function(t,e,n){var r,i,o;return(o=a.extract_errors(n.responseText))?(this.handle_errors(o),void("function"==typeof(r=this.options).error&&r.error(n,e))):(t=JSON.parse(n.responseText),t.redirect?void(window.location.href=t.redirect):t.reload?void window.location.reload():(this.shouldDelayComplete=t.js||t.css,this.shouldDelayComplete?s.require_css_multi(t.css,function(r){return function(){var i,o;return r.perform_actions(t.actions||[]),"function"==typeof(i=r.options).success&&i.success(t,e,n),r.$node.removeClass("ajax-loading"),"function"==typeof(o=r.options).complete?o.complete(n,e):void 0}}(this)):(this.perform_actions(t.actions||[]),void("function"==typeof(i=this.options).success&&i.success(t,e,n)))))},l.prototype.perform_actions=function(t){var n,o,s,a,l,u,_,h,d,p,f,m;for(p=[],l=0,u=t.length;u>l;l++)switch(o=t[l],a=o[0],s=o[1],m=o[2],n=this.$node,m&&"modal"!==a&&("^"===m.charAt(0)&&(h=m.split(" "),n=n.closest(h[0].substr(1)),m=h.slice(1).join(" ")),m&&(n=n.find(m).filter(":first"))),a){case"modal":d="db-modal-response-modal-placeholder",e("#"+d).remove(),f=e(s),f.attr("id",d),e("body").append(f),_=new c({element_id:"response-modal-placeholder"}),p.push(_.show());break;case"html":p.push(n.html(s));break;case"replaceWith":p.push(n.replaceWith(s));break;case"after":s?p.push(n.after(s)):p.push(void 0);break;case"before":s?p.push(n.before(s)):p.push(void 0);break;case"toggleClass":p.push(n.toggleClass(s));break;case"addClass":p.push(n.addClass(s));break;case"removeClass":p.push(n.removeClass(s));break;case"notify":p.push(i.success(s));break;case"notifyError":p.push(i.error(new r(s),this.options.errorDuration||void 0));break;default:p.push(void 0)}return p},l.prototype.error=function(t,e,n){var r,i;return i=a.extract_errors(t.responseText),"abort"!==e&&this.handle_errors(i),"function"==typeof(r=this.options).error?r.error(t,e,n):void 0},l.prototype.handle_errors=function(t){var e;return t===!1?i.error():"string"==typeof t?(e=this.options.html_in_error_msg?new r(t):t,i.error(e)):a.fill_errors(this.$node,t)},l.prototype.complete=function(t,e){var n;if(!this.shouldDelayComplete)return this.$node.removeClass("ajax-loading"),"function"==typeof(n=this.options).complete?n.complete(t,e):void 0},l}()})}.call(this),function(){define("modules/clean/undo",["jquery","modules/core/html","modules/core/i18n","modules/core/notify"],function(t,e,n,r){var i,o;return o=n._,i=function(){function e(){}return e.perform_undo=function(){return null!=this.undo_handler?(this.undo_handler(this.undo_info),this.undo_handler=this.undo_info=null):void 0},e.notifyWithUndo=function(n,i,s,a,l){var u,c;return a=a||30,l=l||o("Undo"),i&&Object.keys(i).length>0?(this.undo_info=i,this.undo_handler=s,u=t("<span />"),null!=n.toHTML?u.html(n.toHTML()):u.text(n),c=t('<button class="button-as-link"/>').text(l),c.on("click",function(t){return t.preventDefault(),e.perform_undo(),r.clear()}),u.append("&nbsp;").append(c),this.undo_notification=r.success(u,a)):r.success(n)},e}()})}.call(this),define("modules/clean/upsell/exception",["require","exports","modules/core/exception"],function(t,e,n){"use strict";function reportException(t){var r=t.err,i=t.tags,o=void 0===i?[]:i,s=t.severity,a=void 0===s?n.SEVERITY.CRITICAL:s,l=t.exc_extra,u=void 0===l?{}:l;o.push(e.TAGS.PROMPT),o.push(e.TAGS.MEGAPHONE),n.reportException({err:r,tags:o,severity:a,exc_extra:u})}function r(t){var r=t.err,i=t.js_controller_options,o=void 0===i?{}:i,s=t.severity,a=void 0===s?n.SEVERITY.CRITICAL:s,l=[],u={"campaign-name":"campaignName",location:"campaignLocationId"};for(var c in u)if(u.hasOwnProperty(c)){var _=u[c],h=o[_];h&&l.push("prompt-"+c+"-"+h)}e.reportException({err:r,tags:l,severity:a,exc_extra:o})}e.SEVERITY=n.SEVERITY,e.TAGS={MEGAPHONE:"megaphone",PROMPT:"prompt",PROMPT_ADMIN:"prompt-admin",PROMPT_HA_LOADER:"prompt-ha-loader",PROMPT_LOADER:"prompt-loader",PROMPT_MAIN_AND_ACCOUNT_HEADER_LOADER:"prompt-main-and-account-header-loader",PROMPT_MUTUALLY_EXCLUSIVE_LOADER:"prompt-mutually-exclusive-loader"},e.reportException=reportException,e.reportJsControllerException=r}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/upsell/ha",["jquery","modules/clean/upsell/prompt_event_emitter","modules/clean/upsell/exception","modules/clean/upsell/upsell_controller","modules/constants/viewer"],function(e,n,r,i,o){var s;return s=function(){function s(e,n){var i,o;this.$ha=e,this.options=n,this._show_if_possible=t(this._show_if_possible,this);try{this._attach_listeners(),this._maybe_show(),this.options.isMaestro&&this._init_maestro()}catch(t){i=t,r.reportJsControllerException({err:i,js_controller_options:this.options})}}return s.prototype._attach_listeners=function(){return this.$ha.data("ha-has-listeners")?void 0:(this.$ha.data("ha-has-listeners",!0),this.$ha.find(".dismiss-button").on("click",function(t){return function(){return t.$ha.hide()}}(this)),this.upsell_controller=new i(this.$ha.find(".confirm-button"),this.$ha.find(".dismiss-button"),this.options))},s.prototype._init_maestro=function(){var t;return t=function(t){return function(){return o.prompt_ha_hiding?t._show_if_possible():t._show()}}(this),n.Emitter.addListener(n.Events.REACT_HA_DID_UPDATE,t)},s.prototype._maybe_show=function(){var t;return this.has_been_shown=!1,this.$footer=e("#page-footer"),this.$window=e(window),o.prompt_ha_hiding?(this.$ha_clone=this.$ha.clone().addClass("clone"),this.$ha.parent().append(this.$ha_clone),this._show_if_possible(),e(window).resize(this._show_if_possible),t=this.$ha_clone.find("img"),t.load(function(t){return function(){return t._show_if_possible()}}(this))):this._show()},s.prototype._log_first_impression=function(){return this.has_been_shown?void 0:(this.upsell_controller.log_impression(),this.has_been_shown=!0)},s.prototype._element_or_parent_is_fixed=function(t){return t.add(t.parents()).is(function(){return"fixed"===e(this).css("position")})},s.prototype._can_fit=function(){return this.options.isMaestro?this._can_fit_maestro():this._can_fit_old()},s.prototype._can_fit_maestro=function(){var t,n,r,i,o,s,a,l;if(n=e(".maestro-secondary-sidebar, .appactions-menu").first(),!n.length)return!1;for(t=n.children(),a=n.offset().top,o=0,s=t.length;s>o;o++)r=t[o],a+=e(r).outerHeight(!0);return i=this.$ha_clone.outerHeight()+75,l=this.$window.height(),l>=a+i},s.prototype._can_fit_old=function(){var t,e,n,r;return n=this.$ha.offset().top+this.$ha_clone.outerHeight(),e=this.$footer.outerHeight(),r=this.$window.height(),t=r>n+5+e,t||!this._element_or_parent_is_fixed(this.$ha)},s.prototype._can_fit_without_image=function(){return this.$ha_clone.addClass("no-image"),this._can_fit()},s.prototype._show_without_image=function(){return this.$ha.addClass("no-image"),this._show()},s.prototype._can_fit_with_image=function(){return this.$ha_clone.removeClass("no-image"),this._can_fit()},s.prototype._show_with_image=function(){return this.$ha.removeClass("no-image"),this._show()},s.prototype._show=function(){return this.$ha.css("visibility","visible"),this._log_first_impression()},s.prototype._hide=function(){return this.$ha.css("visibility","hidden")},s.prototype._show_if_possible=function(){return this._can_fit_with_image()?this._show_with_image():this._can_fit_without_image()?this._show_without_image():this._hide()},s}()})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("modules/clean/upsell/header_bubble_or_link",["modules/clean/header_bubble","modules/clean/upsell/exception","modules/clean/upsell/upsell_controller"],function(e,n,r){var i;return i=function(e){function i(t,e){var o,s,a;this.$el=t,this.options=e;try{a=new r(this.$el.find(".confirm-button"),this.$el.find(".dismiss-button"),this.options),a.log_impression(),i.__super__.constructor.apply(this,arguments)}catch(t){o=t,n.reportJsControllerException({err:o,js_controller_options:this.options})}}return t(i,e),i}(e)})}.call(this),function(){define("modules/clean/upsell/prompt_event_emitter",["external/eventemitter3"],function(t){return{Events:{REACT_HA_DID_UPDATE:"REACT_HA_DID_UPDATE"},Emitter:new t}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/upsell/upsell_controller",["jquery","modules/clean/ajax","modules/clean/upsell/exception","modules/core/dom","modules/core/uri"],function(e,n,r,i,o){var s;return s=function(){function s(n,r,i){this.options=i,this.post_confirm=t(this.post_confirm,this),this.post_dismiss=t(this.post_dismiss,this),this.confirm=t(this.confirm,this),this.dismiss=t(this.dismiss,this),this._keydown=t(this._keydown,this),n.length>0&&n.one("click",function(t){return function(e){return t.confirm(e)}}(this)),r.length>0&&r.one("click",function(t){return function(n){var r;return r=e(n.target).hasClass("remind-me-later"),t.dismiss(n,r)}}(this)),this.options.dismissWithKeys&&e(document).on("keydown",this._keydown),s.add_tk_params(n,{addTkParams:this.options.addTkParams,campaignName:this.options.campaignName,campaignLocationTkId:this.options.campaignLocationTkId}),n.add(r).addClass("enabled")}return s.ON_SHOW_EVENT_NAME="db:prompt:show",s.ON_CONFIRM_EVENT_NAME="db:prompt:confirm",s.ON_DISMISS_EVENT_NAME="db:prompt:dismiss",s.PRE_CONFIRM_EVENT_NAME="db:prompt:pre-confirm",s.PRE_DISMISS_EVENT_NAME="db:prompt:pre-dismiss",s.CONFIRM="confirm",s.DISMISS="dismiss",s.LOG_IMPRESSION="log_impression",s.prototype._keydown=function(t){return 27===t.keyCode||8===t.keyCode&&!i.focus_in_input()?(t.preventDefault(),e(document).off("keydown",this._keydown),this.dismiss(t)):void 0},s.prototype._campaignUrl=function(t,e){var n,r;return n=t===s.CONFIRM?"/upsell/confirm":t===s.DISMISS?"/upsell/dismiss":t===s.LOG_IMPRESSION?"/upsell/log_impression":void 0,this.options&&this.options.campaignId?(r=o({path:n}).updateQuery({campaign_id:this.options.campaignId}),t===s.DISMISS&&e&&r.updateQuery({remind_me_later:!0}),r.toString()):void 0},s.prototype._confirmOrDismiss=function(t,r,i,o){return"keydown"===t.type||i||(t.stopImmediatePropagation(),t.preventDefault()),n.SilentBackgroundRequest({type:"POST",url:r,data:{prompt_queried_at_ms:this.options.promptQueriedAtMs},success:function(n){return function(r){return"keydown"===t.type||i||t.target.click(),e(document).trigger(o,{campaignName:n.options.campaignName})}}(this)})},s.prototype.dismiss=function(t,n){var r;return r=this._campaignUrl(s.DISMISS,n),r&&this._confirmOrDismiss(t,r,!1,s.ON_DISMISS_EVENT_NAME),e(document).trigger(s.PRE_DISMISS_EVENT_NAME,{campaignName:this.options.campaignName})},s.prototype.confirmUrl=function(t){var n,r;return n=e(t.currentTarget),r=n.is("button, input")&&"submit"===n.attr("type")?e(t.currentTarget).closest("form").attr("action"):n.is("a")?e(t.currentTarget).attr("href"):void 0,r||this.options.confirmUrl},s.prototype.confirmInNewTab=function(t){var n,r;return n=e(t.currentTarget),r=n.is("button, input")&&"submit"===n.attr("type")?e(t.currentTarget).closest("form").attr("target"):n.is("a")?e(t.currentTarget).attr("target"):void 0,r?"_blank"===r:this.options.confirmInNewTab},s.prototype.confirm=function(t){var n;return n=this._campaignUrl(s.CONFIRM),n&&this._confirmOrDismiss(t,n,this.confirmInNewTab(t),s.ON_CONFIRM_EVENT_NAME),e(document).trigger(s.PRE_CONFIRM_EVENT_NAME,{campaignName:this.options.campaignName})},s.prototype.log_impression=function(){var t;return t=this._campaignUrl(s.LOG_IMPRESSION),t?n.SilentBackgroundRequest({type:"POST",url:t,data:{prompt_queried_at_ms:this.options.promptQueriedAtMs}}):void 0},s.prototype.log_event=function(t){var e;return this.options&&this.options.campaignId?(e=o({path:"/upsell/log_event"}).updateQuery({event_name:t,campaign_id:this.options.campaignId}),n.SilentBackgroundRequest({type:"POST",url:e.toString(),data:{prompt_queried_at_ms:this.options.promptQueriedAtMs}})):void 0},s.prototype.post_dismiss=function(){var t;return t=this._dismissUrl(),t?n.SilentBackgroundRequest({type:"POST",url:t,data:{prompt_queried_at_ms:this.options.promptQueriedAtMs}}):void 0},s.prototype.post_confirm=function(){var t;return t=this._confirmUrl(),t?n.SilentBackgroundRequest({type:"POST",url:t,data:{prompt_queried_at_ms:this.options.promptQueriedAtMs}}):void 0},s.add_tk_params=function(t,n){var i;if(n.addTkParams)return n.campaignName&&n.campaignLocationTkId?t.each(function(t,r){var i,s,a,l;return i=e(r),i.is("a")?a="href":(i=i.closest("form"),a="action"),l=i.attr(a),i.length>0&&l?(s=o.parse(l),s.updateQuery({_tk:n.campaignLocationTkId,_camp:n.campaignName}),i.attr(a,s.toString())):void 0}):(i=new Error("Missing campaignName or campaignLocationTkId."),void r.reportJsControllerException({err:i,js_controller_options:n,severity:r.SEVERITY.NONCRITICAL}))},s.register_custom_controller=function(t,n,r,i,o){return e(document).on(s.ON_SHOW_EVENT_NAME,t),e(document).on(s.ON_CONFIRM_EVENT_NAME,n),e(document).on(s.ON_DISMISS_EVENT_NAME,r),e(document).on(s.PRE_CONFIRM_EVENT_NAME,i),e(document).on(s.PRE_DISMISS_EVENT_NAME,o)},s}()})}.call(this),define("modules/clean/user",["require","exports","external/underscore"],function(t,e,n){"use strict";var r=function(){function t(t){n.extend(this,t)}return t.prototype.toString=function(){return String(this.id)},t}();return r}),function(){define("modules/clean/uuid",["modules/clean/crypto"],function(t){var e,n,r,i,o,s,a,l,u;return n=/generator isn't seeded/,i={},e=function(){var t,e;for(e=[],a=t=0;255>=t;a=++t)e.push((a+256).toString(16).substr(1));return e}(),r=function(t){var n,r;return r=function(){var r,i,o;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],o.push(e[n]);return o}(),r.join("")},l=function(t){return 255&t},u=function(t){var e,n,i;return e=[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)],n=function(){var n,i,o;for(o=[],n=0,i=e.length;i>n;n++)t=e[n],o.push(r(t));return o}(),i=n.join("-")},s=function(e){var r,i,s,a,u;null==e&&(e={}),u=new Array(16);try{t.getRandomValues(u)}catch(t){if(i=t,!i.message.match(n)||!e.allowInsecure)throw i;o(u)}return r=function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)a=u[t],n.push(l(a));return n}()},o=function(t){var e,n,r;for(r=Math.pow(2,8),a=e=0,n=t.length;n>=0?n>e:e>n;a=n>=0?++e:--e)t[a]=Math.floor(Math.random()*r);return t},i.v4=function(t){var e;return null==t&&(t={}),e=s({allowInsecure:t.allowInsecure}),e[6]=15&e[6]|64,e[8]=63&e[8]|128,u(e)},i})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/clean/ux_analytics_v2",[],function(){var n,r,i,o,s,a,l,u,c,_,h,d,p;return h=function(){return(new Date).getTime()},p=function(t,e,n){var r,i,o;return null==n&&(n={}),o=null,i=0,r=function(){var e,r,s;return i=n.leading===!1?0:h(),o=null,s=t.apply(r,e),o?void 0:r=e=null},function(){var s,a,l,u,c;return l=h(),i||n.leading!==!1||(i=l),u=e-(l-i),a=this,s=arguments,0>=u||u>e?(o&&(clearTimeout(o),o=null),i=l,c=t.apply(a,s),o||(a=s=null)):o||n.trailing===!1||(o=setTimeout(r,u)),c}},l=function(){var t;return t=document.documentElement,(window.pageYOffset||t.scrollTop)-(t.clientTop||0)},a=function(t){return null==t&&(t=window),t.location.href},d=function(){var t,e,n,r,i,o,s,a,l;if(o={},a=window.location.search,a.length)for(i=a.substring(1).replace(/&amp;/g,"&").split("&"),t=0,n=i.length;n>t;t++)r=i[t],s=r.split("="),e=s[0],l=s[1],e&&l&&(e=e.trim(),l=l.trim(),e.length&&l.length&&(o[e]=decodeURIComponent(l.replace(/\+/g," "))));return o},_=function(t){var e;return t&&"A"===(e=t.nodeName)},u=function(t){return t&&t.getAttribute("data-trackingid")},c=function(t){var e;return t&&"BODY"===(e=t.nodeName)},o=function(t){var e;for(e=0;5>e&&(!_(t)&&!u(t))&&!c(t);e++)t=t.parentNode;return t},s=function(t,e){return null==t?e:(Object.keys(e).forEach(function(n){return t.hasOwnProperty(n)?void 0:t[n]=e[n]}),t)},r=function(){function t(t,e){this.name=t,this.data=e}return t}(),i=function(){function t(){}var e,n,r;return e="uxa",r=function(t){return e+"."+t},n=window.JSON,t.storage=function(t){var e,n,i,o;try{o=r("onedoesnotsimplyusesessionstorage"),e=t.sessionStorage,e.setItem(o,o),e.removeItem(o)}catch(t){n=t,e=null}return e}(window),t.isEnabled=function(){return!!this.storage},t.get=function(t){var e,i,o;if(!this.storage||!n)return null;try{return o=this.storage.getItem(r(t)),null===o?null:n.parse(o)}catch(t){return e=t,null}},t.set=function(t,e){var i,o;if(!this.storage||!n)return null;try{return null===e?this.remove(t):this.storage.setItem(r(t),n.stringify(e))}catch(t){return i=t,null}},t.remove=function(t){return this.storage?this.storage.removeItem(r(t)):null},t.clear=function(t){return this.storage?this.storage.clear():null},t}(),n=function(){function n(e,n,r,i){this.requestId=e,this.orgReferrer=n,this.logger=r,null==i&&(i={}),this._trackModalHide=t(this._trackModalHide,this),this._trackModalShow=t(this._trackModalShow,this),this._onScroll=t(this._onScroll,this),this._trackScrolling=t(this._trackScrolling,this),this._storeDelayedLinkClick=t(this._storeDelayedLinkClick,this),this._handleLinkClick=t(this._handleLinkClick,this),this._handleLinkKeyboardEnter=t(this._handleLinkKeyboardEnter,this),this._delayedInit=t(this._delayedInit,this),this.currentModalId=null,this.initTime=h(),this.lastScrollOffset=0,this.scrollTimer=null,this.options=s(i,{delayed_link_click_logging:!0,modal_class:".ui-modal"}),this.modalClass=this.options.modal_class,this.delayedLinkClickLogging=this.options.delayed_link_click_logging,y.call(this),setTimeout(this._delayedInit,200)}var c,f,m,g,v,w,y;return w=2.1,g=500,c=600,f={heartbeat:"heartbeat",linkClick:"link_click",linkNoSessionStorage:"link_no_session_storage",modalClose:"modal_close",modalOpen:"modal_open",pageView:"page_view",scroll:"scroll_event"},m=Object.keys(f).map(function(t){return f[t]}),v={linkClick:"clicked_link",trackingParams:"tracking_params"},n.resetStorage=function(){var t,e,n,r,o;for(r=Object.keys(v),o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(i.remove(v[e]));return o},n.prototype._delayedInit=function(){return this._saveTrackingParams(),this.logPageView(),this.logDelayedClickEvent(),this._setupListeners()},n.prototype._setupListeners=function(){return window.addEventListener("scroll",p(this._trackScrolling,2e3,{leading:!0})),document.body.addEventListener("mousedown",this._handleLinkClick),document.body.addEventListener("keydown",this._handleLinkKeyboardEnter),document.addEventListener("modalOpened",this._trackModalShow),document.addEventListener("modalClosed",this._trackModalHide)},y=function(){var t;t=this.logOnPage.bind(this,f.heartbeat),[2,5,10,15,30].forEach(function(e){return setTimeout(t,1e3*e)}),[1,2,4,9].forEach(function(e){return setTimeout(t,60*e*1e3)})},n.prototype._getTrackingParams=function(){var t,e,n,r,o,s;for(s=i.get(v.trackingParams)||{},r=["gclid","oqa","trigger","_tk","_camp","_ad","_net","_kw","utm_source","utm_medium"],o=d(),t=0,e=r.length;e>t;t++)n=r[t],o.hasOwnProperty(n)&&(s[n]=o[n]);return s},n.prototype._saveTrackingParams=function(){var t;return t=this._getTrackingParams(),Object.keys(t).length?(i.set(v.trackingParams,t),this.trackingParams=t):this.trackingParams=null},n.prototype._handleLinkKeyboardEnter=function(t){13===t.keyCode&&this._handleLinkClick(t)},n.prototype._handleLinkClick=function(t){var e,n,r;e=o(t.target),(_(e)||u(e))&&(n=e.getBoundingClientRect(),r=this.createEvent(f.linkClick,{left:Math.round(n.left),link_id:e.getAttribute("data-trackingid"),link_rank:this.getLinkRank(e,n),origin_href:e.href,time_on_page:this.getTimeOnPage(),top:Math.round(n.top),vertical_offset:l(),tag_name:e.tagName.toLowerCase()}),this.delayedLinkClickLogging&&_(e)?this._storeDelayedLinkClick(r):this.logEvent(r))},n.prototype._storeDelayedLinkClick=function(t){var e,n;if(!i.isEnabled)return this.logOnPage(f.linkNoSessionStorage),!1;try{i.set(v.linkClick,t.data)}catch(t){return e=t,!1}return!0},n.prototype._trackScrolling=function(){return clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this._onScroll,g)},n.prototype._onScroll=function(){var t;return t=l(),this.lastScrollOffset!==t?(this.lastScrollOffset=t,this.logOnPage(f.scroll,{vertical_offset:t})):void 0},n.prototype._trackModalShow=function(t){var e;return e=document.querySelector(this.modalClass),e&&e.offsetWidth>0||e.offsetHeight>0?(this.currentModalId=e.id,this.logModal(f.modalOpen,this.currentModalId)):void 0},n.prototype._trackModalHide=function(t){return this.currentModalId?(this.logModal(f.modalClose,this.currentModalId),this.currentModalId=null):void 0},n.prototype.getTimeOnPage=function(){var t;return t=h(),Math.round((t-this.initTime)/1e3)},n.prototype.getLinkRank=function(t,e){var n,r,i,o,s,a;if(s=t.getAttribute("href"),a=document.querySelectorAll('a[href="'+s+'"]'),a.length<2)return 1;for(r=i=0,o=a.length;o>i;r=++i)if(n=a[r],n===t)return r+1;return-1},n.prototype.createEvent=function(t,e){var n,i,o,s,l,u;if(null==e&&(e={}),null!=this.orgReferrer&&(e.org_referrer=this.orgReferrer),e.request_id||(e.request_id=this.requestId),e.url||(e.url=a()),e.uxa_v=w,this.trackingParams)for(u=Object.keys(this.trackingParams),n=0,i=u.length;i>n;n++)o=u[n],s=o.replace(/^_/,""),l=this.trackingParams[o],e["param_"+s]=l;return new r(t,e)},n.prototype.logDelayedClickEvent=function(){var t,e,n;if(i.isEnabled&&(n=i.get(v.linkClick)))try{return n.destination_url=a(),this.logEvent(new r(f.linkClick,n)),i.remove(v.linkClick)}catch(e){t=e}},n.prototype.logPageView=function(){return this.logEvent(this.createEvent(f.pageView))},n.prototype.logModal=function(t,e){var n;return n={modal:e},this.logOnPage(t,n)},n.prototype.logOnPage=function(t,e){return null==e&&(e={}),e.vertical_offset||(e.vertical_offset=l()),e.time_on_page||(e.time_on_page=this.getTimeOnPage()),this.getTimeOnPage()<c?this.logEvent(this.createEvent(t,e)):void 0},n.prototype.logEvent=function(t){var n,i,o;try{if(!(t instanceof r))throw new Error("UXAnalytics.log: argument is not an instance of UXEvent");if(o=t.name,e.call(m,o)<0)throw new Error("UXAnalytics.log: trying to log an invalid event ("+t.name+")");return this.logger.log(t.name,t.data)}catch(t){throw n=t}},n}()})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=[].slice;define("modules/clean/validators/validators",["jquery","external/underscore","modules/core/i18n"],function(e,r,i){var o,s,a,l,u,c,_,h,d,p,f,m,g,v;return d=i._,p={},g=function(t,e){return p[t]=e},m=function(t){var e,n,r;if(r=t[0],n=t.slice(1),!p[r])throw new Error("Cannot find validator of type "+r);return e=p[r],function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(e,n,function(){})},h=function(){function t(t){this.messages=r.extend({},this.constructor.messages,null!=t?t.messages:void 0)}return t}(),s=function(e){function i(){var t,e,o;o=1<=arguments.length?n.call(arguments,0):[],e=null,r.isArray(r.last(o))||(e=r.last(o),o=r.initial(o)),this.validators=function(){var e,n,r;for(r=[],e=0,n=o.length;n>e;e++)t=o[e],null!==t&&r.push(m(t));return r}(),i.__super__.constructor.call(this,e)}return t(i,e),i.prototype.validate=function(t,e){var n,r,i,o,s;for(i=this.validators,o=[],n=0,r=i.length;r>n;n++)s=i[n],o.push(s.validate(t,e));return o},i}(h),g("AllValidator",s),o=/^[\x00-\x7f]*$/,a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.messages={asciiOnly:d("Only basic ASCII characters allowed")},n.prototype.validate=function(t){if(!o.test(t))throw new Error(this.messages.asciiOnly)},n}(h),g("AsciiOnlyValidator",a),c=function(n){function r(t){r.__super__.constructor.call(this,t),this.not_empty=t.not_empty,this.strip=t.strip}return t(r,n),r.messages={empty:d("Please enter a value for %(field)s")},r.prototype.validate=function(t,n){if(this.strip&&(t=e.trim(t)),this.not_empty&&!t)throw new Error(this.messages.empty.format({field:null!=n?n.field:void 0}))},r}(h),g("StringValidator",c),u=function(e){function n(t){n.__super__.constructor.call(this,t),this.lastname_goes_first=null!=t?t.lastname_goes_first:void 0}return t(n,e),n.messages={empty:d("Please enter your name")},n.prototype.validate=function(t,e){var n;if(!e.data.lname&&!e.data.fname)if(this.lastname_goes_first){if("lname"===e.field)throw new Error(this.messages.empty)}else if("fname"===e.field)throw new Error(this.messages.empty);return"fname"===e.field?(n=m(["StringValidator",{not_empty:!0,strip:!0,messages:{empty:d("Please enter your first name")}}]),n.validate(t,e)):void 0},n}(h),g("NameValidator",u),l=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.messages={empty:d("Please enter an email address"),noAt:d("An email address must contain a single @"),badUsername:d("The username portion of the email address is invalid (the portion before the @: %(username)s)"),badDomain:d("The domain portion of the email address is invalid (the portion after the @: %(domain)s)")},r.username_re=/^[\w!#$%&'*+\-\/=?^`{|}~.]+$/,r.domain_re=new RegExp("^([a-z0-9][a-z0-9\\-]*\\.)+([a-z]+|xn--[a-z0-9\\-]+)$","i"),r.prototype.validate=function(t){var n,i,s;if(t=e.trim(t),!t)throw new Error(this.messages.empty);if(i=t.split("@"),2!==i.length)throw new Error(this.messages.noAt);if(s=i[0],n=i[1],!r.username_re.test(s))throw new Error(this.messages.badUsername.format({username:s}));if(o.test(n)&&!r.domain_re.test(n))throw new Error(this.messages.badDomain.format({domain:n}))},r}(h),g("EmailValidator",l),_=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.messages={nonValidAddress:d("Please enter a valid website address")},r.prototype.validate=function(t){var n,r,i;if(t=e.trim(t),!t)throw new Error(this.messages.nonValidAddress);if(i=t.split("."),i.length<2)throw new Error(this.messages.nonValidAddress);if(r=i[0],n=i[1],!r)throw new Error(this.messages.nonValidAddress);if(!n)throw new Error(this.messages.nonValidAddress)},r}(h),g("UrlValidator",_),f=function(t){return function(e,n){var r;r=!0;try{t.validate(e,n)}catch(t){r=!1}return r}},v={create:m,register:g,check:f}})}.call(this),define("modules/clean/viewer",["require","exports","external/underscore","modules/constants/viewer","modules/core/exception","modules/core/i18n","modules/clean/user","modules/clean/ajax"],function(t,e,n,r,i,o,s,a){"use strict";var l=function(){function t(t){void 0===t&&(t={}),this.build(t)}return t.get_viewer=function(){return u},t.get_role_title=function(t){return this.get_viewer().get_title_by_role(t.role)},t.get_root_name=function(t){return this.get_viewer().get_root_name_by_role(t.role)},t.prototype.build=function(t){void 0===t&&(t={}),this._authed_users={},this._all_users={};for(var e=t._user_data||[],n=0;n<e.length;n++){var r=e[n],i=new s(r);this._all_users[i.id]=i,r._authed&&(this._authed_users[i.id]=i)}this.display_name=t.display_name,this.team_id=t.team_id,this.team_name=t.team_name,this.team_is_limited=t.team_is_limited||!1,this.is_assume_user_session=t.is_assume_user_session||!1,this.is_team_assume_user_session=t.is_team_assume_user_session||!1,this.can_moderate_comments=t.can_moderate_comments||!1,this.is_signed_in=e.length>0,this.is_paired=e.length>1,t.deprecated_first_user_in_the_cookie_id&&(this.deprecated_first_user_in_the_cookie=this.get_user_by_id(t.deprecated_first_user_in_the_cookie_id)),this._load_cached_users()},t.prototype.reload=function(t){var e=this;a.WebRequest({url:"/get_viewer",success:function(n){try{e.build(JSON.parse(n)),t&&t()}catch(t){}}})},t.prototype.get_user_by_role=function(t,e){var n=this.get_uid_by_role(t);return null!=n?this.get_user_by_id(n,e):void 0},t.prototype.role_exists=function(t){return null!=this.get_uid_by_role(t)},t.prototype.get_user_by_id=function(t,e){i.assert(this.is_uid_associated(t),"User "+t+" is not associated with this viewer");var n=e?this._all_users:this._authed_users,r=n[t];return i.assert(!!r,"User "+t+" is not signed in"),r},t.prototype.is_role_signed_in=function(t){var e=this.get_uid_by_role(t);return null!=e?e in this._authed_users:!1},t.prototype.is_uid_signed_in=function(t){return t in this._authed_users},t.prototype.is_user_signed_in=function(t){return null!=t?this.is_uid_signed_in(t.id):!1},t.prototype.is_uid_associated=function(t){return t in this._all_users},t.prototype.get_users=function(t){var e=t?this._all_users:this._authed_users,i=n.values(e);return i.sort(function(t,e){return t.role===r.ROLE_PERSONAL?-1:1}),i},t.prototype.get_user_ids=function(t){return this.get_users(t).map(function(t){return t.id})},t.prototype.get_roles=function(t){return this.get_users(t).map(function(t){return t.role})},t.prototype.get_account_ids=function(t){return this.get_users(t).map(function(t){return t.account_id})},t.prototype.get_email_by_role=function(t){var e=this.get_user_by_role(t,!0);return e&&e.email},t.prototype.get_uid_by_role=function(t){t===r.ROLE_PHOTOS&&(t=this.is_paired||!this.is_signed_in?r.ROLE_PERSONAL:n.values(this._all_users)[0].role);for(var e in this._all_users){var i=this._all_users[e];if(i.role===t)return i.id}},t.prototype.get_title_by_role=function(t){return this.is_paired?t===r.ROLE_PERSONAL?o._("Personal"):this.team_name:""},t.prototype.get_root_name_by_role=function(t){return this.get_title_by_role(t)||o._("Dropbox")},t.prototype._sign_in_all_users=function(){this._authed_users=n.clone(this._all_users),this._load_cached_users()},t.prototype._sign_out_user_by_id=function(t){delete this._authed_users[t],this._load_cached_users()},t.prototype.sign_in_user_by_id=function(t){i.assert(this.is_uid_associated(t),"User "+t+" is not associated with this viewer"),this._authed_users[t]=this._all_users[t],this._load_cached_users()},t.prototype._load_cached_users=function(){this.personal_user=this._authed_users[this.get_uid_by_role(r.ROLE_PERSONAL)],
this.photos_user=this._authed_users[this.get_uid_by_role(r.ROLE_PHOTOS)],this.work_user=this._authed_users[this.get_uid_by_role(r.ROLE_WORK)],this.personal_email=this.get_email_by_role(r.ROLE_PERSONAL),this.work_email=this.get_email_by_role(r.ROLE_WORK),this.is_personal_user_signed_in=this.is_role_signed_in(r.ROLE_PERSONAL),this.is_photos_user_signed_in=this.is_role_signed_in(r.ROLE_PHOTOS),this.is_work_user_signed_in=this.is_role_signed_in(r.ROLE_WORK)},t}(),u=new l(r._viewer_properties);return l}),function(){define("modules/clean/web_module_timing",[],function(){var t;return t={module_times:[],reset:function(){return this.module_times=[]},get_module_times:function(){return this.module_times},add_module:function(t,e,n){var r,i;return r={load_time:e,callback_duration:n},null!=(null!=t?t.url:void 0)&&(r.url=t.url),null!=(null!=t?t.name:void 0)&&(r.name=t.name),null!=(null!=t&&null!=(i=t.parentMap)?i.url:void 0)&&(r.parent=t.parentMap.url),this.module_times.push(r)}}})}.call(this),function(){define("modules/clean/web_timing_logger",["jquery","external/react","modules/clean/ajax","modules/clean/devtools/perf_hub_actions","modules/clean/event_load","modules/constants/request","modules/constants/webtiming","modules/constants/page_load","modules/core/browser","modules/core/exception","modules/clean/web_module_timing","modules/clean/js_client_stopwatch","modules/clean/loggers/cache_logger"],function(t,e,n,r,i,o,s,a,l,u,c,_,h){var d,p,f;return f=h.logSWCacheData,p=h.logEnsembleCacheData,d={initialize_module:function(t){var e,n,r,o,a,u,c,h,p,f;return n=null!=t?t:{},this.is_pagelet=null!=(r=n.is_pagelet)?r:!1,this.log_time_to_view=null!=(o=n.log_time_to_view)?o:!1,this.log_time_to_interactive=null!=(a=n.log_time_to_interactive)?a:!1,this.ttv_at_dom_interactive=null!=(u=n.ttv_at_dom_interactive)?u:!1,this.tti_at_dom_interactive=null!=(c=n.tti_at_dom_interactive)?c:!1,this.source_type=null!=(h=n.source_type)?h:"web",this.subtypes=null!=(p=n.subtypes)?p:{},l.performance()?("setResourceTimingBufferSize"in l.performance()&&l.performance().setResourceTimingBufferSize(300),this.initialized=!0,this.have_logged_web_timing=!1,e=0,s.LOG_JS_MODULE_TIMING&&s.LOG_TIMING_DELAY&&(e=600),_.create_stopwatch_if_not_exist("web_timing_logger"),i.window_load(function(){return setTimeout(d._log_navigation,e)}),null!=(null!=(f=window._timingData)?f.ttv:void 0)?this.time_to_view=window._timingData.ttv.getTime():void 0):void 0},reset:function(){return this.is_pagelet=!1,this.log_time_to_view=!1,this.log_time_to_interactive=!1,this.ttv_at_dom_interactive=!1,this.tti_at_dom_interactive=!1,this.source_type="web",this.initialized=!1,this.have_logged_web_timing=!1,this.time_to_view=null,this.time_to_interactive=null,this.subtypes={}},start_time:function(){var t,e;return(e=null!=(t=l.performance())?t.timing:void 0)?e.navigationStart||e.fetchStart:void 0},time_since_start:function(){var t;return+(null!=(t=l.performance())&&"function"==typeof t.now?t.now():void 0)},_log_navigation:function(){var t,e,n,r,i,u,c,h,m;if(d.initialized&&!d.have_logged_web_timing&&(c=null!=(i=l.performance())?i.timing:void 0)&&(u=d.start_time(),t=c.loadEventEnd,u&&t&&(s.LOG_ENSEMBLE_CACHE&&p(),f(),d.ttv_at_dom_interactive&&(d.is_pagelet?d.time_to_view=ensemble.getEmbeddedAppDOMInteractive():d.time_to_view=c.domInteractive),!(d.log_time_to_view&&null==d.time_to_view||(d.tti_at_dom_interactive&&(d.time_to_interactive=c.domInteractive),d.log_time_to_interactive&&null==d.time_to_interactive)))))return _.start_span("process_nav_timing",{stopwatch_name:"web_timing_logger"}),n=!d.have_logged_web_timing,d.have_logged_web_timing=!0,e={},o.IS_HTTP2&&(e.is_spdy=!0),d.is_pagelet&&(e.is_pagelet=!0),navigator.serviceWorker&&(e.service_worker_supported=!0,navigator.serviceWorker.controller&&(e.service_worker_active=!0)),d.is_pagelet&&null!=ensemble.serviceWorkerActiveOnInitialLoad&&(e.service_worker_active_initial=ensemble.serviceWorkerActiveOnInitialLoad),d.is_pagelet&&ensemble.isEmbeddedAppCacheHit&&(e.embedded_app_cache_hit=ensemble.isEmbeddedAppCacheHit()),m=d.log_time_to_view?d.time_to_view-u:null,h=d.log_time_to_interactive?d.time_to_interactive-u:null,r={navigation_type:d._get_navigation_type(),server_request_start_time:o.REQUEST_START_TIME,browser_time:(c.redirectStart||c.fetchStart)-u,redirect_time:c.fetchStart-u,dns_time:c.domainLookupEnd-u,tcp_connect_time:(c.secureConnectionStart||c.requestStart)-u,ssl_connect_time:c.requestStart-u,time_to_first_byte:c.responseStart-u,time_to_last_byte:c.responseEnd-u,dom_load_time:c.domContentLoadedEventEnd-u,page_load_time:t-u,extra_columns:JSON.stringify(e),subtypes:JSON.stringify(d.subtypes)},s.LOG_RESOURCE_TIMING&&"getEntriesByType"in l.performance()&&(d._add_resources_to_params(r),_.add_span_annotation("process_nav_timing","logged_resources","1",{stopwatch_name:"web_timing_logger"})),s.LOG_JS_MODULE_TIMING&&(d._add_js_module_times_to_params(r),_.add_span_annotation("process_nav_timing","logged_modules","1",{stopwatch_name:"web_timing_logger"})),_.end_span("process_nav_timing",{stopwatch_name:"web_timing_logger"}),d.is_pagelet&&d.log_ensemble_stopwatch(),s.LOG_BROWSER_PERFORMANCE_INFO&&d.log_browser_performance_info(),s.LOG_JS_STOPWATCH&&_.log_stored_results(),r.repo_rev=a.REPO_REV,d.log_time_to_view&&(r.time_to_view=m),d.log_time_to_interactive&&(r.time_to_interactive=h),d._log(r,null,n)},log_ensemble_stopwatch:function(){var t,e,n,r;if(ensemble.getJSStopwatchData){_.create_stopwatch("ensemble"),r=ensemble.getJSStopwatchData(),t=[];for(n in r)e=r[n],_.start_span(n,{stopwatch_name:"ensemble",start_time:e.start}),t.push(_.end_span(n,{stopwatch_name:"ensemble",end_time:e.end}));return t}},set_subtypes_value:function(t,e){return t in this.subtypes?this.subtypes[t]=e:void 0},log_browser_performance_info:function(){var t,e,r;if(r=null!=(e=l.performance())?e.timing:void 0)return t={request_id:o.REQUEST_ID,navigation_start:r.navigationStart,unload_event_start:r.unloadEventStart,unload_event_end:r.unloadEventEnd,redirect_start:r.redirectStart,redirect_end:r.redirectEnd,fetch_start:r.fetchStart,domain_lookup_start:r.domainLookupStart,domain_lookup_end:r.domainLookupEnd,connect_start:r.connectStart,connect_end:r.connectEnd,request_start:r.requestStart,response_start:r.responseStart,response_end:r.responseEnd,dom_loading:r.domLoading,dom_interactive:r.domInteractive,dom_content_loaded_event_start:r.domContentLoadedEventStart,dom_content_loded_event_end:r.domContentLoadedEventEnd,dom_complete:r.domComplete,load_event_start:r.loadEventStart,load_event_end:r.loadEventEnd},n.SilentBackgroundRequest({url:"/alternate_wtl_browser_performance_info",type:"POST",data:t})},mark_time_to_view:function(){return this.time_to_view||this.ttv_at_dom_interactive?void 0:(this.time_to_view=(new Date).getTime(),null!=console.timeStamp&&console.timeStamp("TTV"),this._log_navigation())},mark_time_to_interactive:function(t){var e,n;return null==t&&(t=!1),this.time_to_interactive||this.tti_at_dom_interactive?void 0:(e=function(t){return function(){return t.time_to_interactive?void 0:(t.time_to_interactive=(new Date).getTime(),null!=console.timeStamp&&console.timeStamp("TTI"),t._log_navigation())}}(this),t?window.requestAnimationFrame?(n=function(){return setTimeout(e,0)},window.requestAnimationFrame(n)):setTimeout(e,0):e())},log_ajax_transition:function(t,e,n,r,i,o){var s;return s={navigation_type:"ajax",page_load_time:t,url:o},null!=i&&(s.server_response_time=i),null!=n&&(s.extra_columns=JSON.stringify(n)),null!=r&&(s.stopwatch_suffix=r),d._log(s,e)},_log:function(e,i,s){var a;return null==s&&(s=!1),a=_.start_span("wtl_endpoint",{stopwatch_name:"web_timing_logger"}),_.add_span_annotation("wtl_endpoint","navigation_type",e.navigation_type,{stopwatch_name:"web_timing_logger",span_id:a}),e.url=e.url||l.get_href(),e.request_id=o.REQUEST_ID,e.source_type=this.source_type,e.request_tracing_enabled=o.REQUEST_TRACING_ENABLED,i&&(e.url_info=i),n.SilentBackgroundRequest({url:"/alternate_wtl",type:"POST",data:e,success:function(e){var n,i;return _.end_span("wtl_endpoint",{stopwatch_name:"web_timing_logger",span_id:a}),n=t(".perf-hub-link-container"),s&&n.length&&(i=JSON.parse(e),"status"in i)?r.add_web_timing_details({details:i}):void 0}})},_add_resources_to_params:function(t){var e,n,r,i,o,s,a,u,c;if(o=[],s={},a=l.performance().getEntriesByType("resource"),a instanceof Array)for(n=0,r=a.length;r>n;n++)i=a[n],c=d._get_resource_type(i),c in s||(s[c]={count:0,total_time:0}),s[c].count++,s[c].total_time+=i.duration,o.push({type:c,name:i.name.substr(0,2e3),start:i.startTime,end:i.responseEnd,connectStart:i.connectStart,connectEnd:i.connectEnd,domainLookupStart:i.domainLookupStart,domainLookupEnd:i.domainLookupEnd});u=[];for(e in s)t["resource_"+e+"_count"]=s[e].count,t["resource_"+e+"_avg_time"]=s[e].total_time/s[e].count,u.push(t.resource_details=JSON.stringify(o));return u},_add_js_module_times_to_params:function(t){var e,n,r,i,o,s;if(null!=l.performance()&&"getEntriesByName"in l.performance()){for(s=c.get_module_times(),n=[],e=0,r=s.length;r>e;e++)o=s[e],!1 in o?u.raiseAndReport("Module with invalid map object fetched by requirejs",{severity:u.SEVERITY.NONCRITICAL,tags:["log_js_module_timing"]}):(i=l.performance().getEntriesByName(o.url,"resource"),0!==i.length&&(o.start_time=i[0].responseEnd,n.push(o)));return t.js_module_times=JSON.stringify(n)}},_get_resource_type:function(t){var e,n,r,i;if(i=t.name,r=i.lastIndexOf("."),r>0){if(e=i.substring(r),".png"===e||".gif"===e||".jpg"===e||".svg"===e)return"img";if(".js"===e)return"script";if(".css"===e)return"css"}return n=t.initiatorType,"css"!==n&&"img"!==n&&"script"!==n&&"link"!==n?"xmlhttprequest"===n?"ajax":"other":n},_get_navigation_type:function(){var t;switch(t=l.performance().navigation,t.type){case t.TYPE_NAVIGATE:return"navigate";case t.TYPE_RELOAD:return"reload";case t.TYPE_BACK_FORWARD:return"back_forward"}}}})}.call(this),function(){define("modules/core/accessible_announce",["jquery","external/purify","modules/clean/css"],function(t,e,n){var r,i;return i=n.require_css,r=function(){function n(){}return n.timeoutLength=50,n.polite=function(t,e){return null==e&&(e=10),this._announce("polite",t,e)},n.assertive=function(t,e){return null==e&&(e=10),this._announce("assertive",t,e)},n.clear=function(){return n._lastTimeout&&clearTimeout(n._lastTimeout),t("#accessible-announce").html("").attr("aria-live","off")},n._announce=function(e,n,r){return null==r&&(r=10),i("/static/css/accessibility-vflRPMGHg.css",function(i){return function(){return t("#accessible-announce").length?(i._setMessage(n,e),i._scheduleClear(r)):(t("body").append("<div id='accessible-announce' aria-live='assertive' class='ax-visually-hidden'></div>"),setTimeout(function(){return i._setMessage(n,e),i._scheduleClear(r)},i.timeoutLength))}}(this))},n._setMessage=function(n,r){var i;return this.clear(),i=t("#accessible-announce"),i.attr("aria-live",r),null!=n.toHTML?i.html(e.sanitize(n.toHTML())):n instanceof t?i.html(e.sanitize(n.html())):i.text(n)},n._scheduleClear=function(t){return this._lastTimeout=setTimeout(this.clear,1e3*t)},n}()})}.call(this),define("modules/core/browser",["require","exports","modules/constants/env","modules/core/exception","modules/core/uri"],function(t,e,n,r,i){"use strict";function o(t){t=t.toLowerCase();var e=/(ipad)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||/(trident).*? rv:([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=t.match(/version\/([\d.]+)/i),r=null!=n?e[1]:null;return{browser:e[1]||"",version:r||e[2]||"0"}}function s(t){return Boolean(e.msie)&&parseInt(e.version,10)<=t}function a(t){return Boolean(e.safari)&&parseInt(e.version,10)<=t}function l(t){return void 0===t&&(t=window),i.parse(u(t))}function u(t){return void 0===t&&(t=window),t.location.href}function c(){return window.location.hash.split("#")[1]}function _(){return u().split("#")[0]}function h(t){window.location.hash=t}function d(t){var n=e.mockableInternalMethods._parse_target(t);window.open(n,"_blank")}function p(t){t=e.mockableInternalMethods._parse_target(t,{checkDomainWhitelist:!1,httpsOnly:!1}),window.open(t,"_blank")}function f(t,n){void 0===n&&(n=window);var r=e.mockableInternalMethods._parse_target(t,{target_window:n});e.mockableInternalMethods._navigate(r,n)}function m(t){var n=e.mockableInternalMethods._parse_target(t);window.location.replace(n)}function g(t){void 0===t&&(t=!1),window.location.reload(t)}function v(){return window.performance||null}function w(t){t=e.mockableInternalMethods._parse_target(t,{checkDomainWhitelist:!1,httpsOnly:!1}),e.mockableInternalMethods._navigate(t)}function y(){if(window.matchMedia){var t="(-webkit-min-device-pixel-ratio: 1.1), (min-resolution: 192dpx), (min-resolution: 1.1dppx)";return Boolean(window.matchMedia(t).matches)}return window.devicePixelRatio?window.devicePixelRatio>1.1:!1}function b(){return window.navigator.onLine}function E(t){window.addEventListener("online",t),window.addEventListener("offline",t)}function x(t){window.removeEventListener("online",t),window.removeEventListener("offline",t)}var S=o(navigator.userAgent);"trident"===S.browser&&(S.browser="msie");var k=n.REDIRECT_SAFE_ORIGINS;e.ipad="ipad"===S.browser?!0:void 0,e.chrome="chrome"===S.browser?!0:void 0,e.safari="webkit"===S.browser||Boolean(e.ipad)?!0:void 0,e.opera="opera"===S.browser?!0:void 0,e.msie="msie"===S.browser?!0:void 0,e.edge="edge"===S.browser?!0:void 0,e.mozilla="mozilla"===S.browser?!0:void 0,e.webkit="webkit"===S.browser||Boolean(e.ipad)||Boolean(e.chrome)?!0:void 0,e.mac=Boolean(/(macintosh)/.exec(navigator.userAgent.toLowerCase())),e.iphone=Boolean(/(iphone)/.exec(navigator.userAgent.toLowerCase())),e.ipod=Boolean(/(ipod)/.exec(navigator.userAgent.toLowerCase())),e.iOS=e.ipad||e.ipod||e.iphone,e.browser_name=S.browser,e.version=S.version,e.msie_version_at_most=s,e.safari_version_at_most=a,e.get_uri=l,e.get_href=u,e.get_hash=c,e.get_href_no_hash=_,e.set_hash=h,e.mockableInternalMethods={_navigate:function(t,e){void 0===e&&(e=window),e.location.href=t},_parse_target:function(t,e){var n=void 0===e?{}:e,i=n.target_window,o=void 0===i?window:i,s=n.checkDomainWhitelist,a=void 0===s?!0:s,l=n.httpsOnly,u=void 0===l?!0:l,c=o.document.createElement("a");c.href=t;var _=c.protocol||o.location.protocol;":"===c.protocol&&(_=o.location.protocol);var h=c.hostname||o.location.hostname,d=c.port||o.location.port;"443"===d&&"https:"===_&&(d=""),a&&r.assert(!d,"Non-default port not legal when checking the whitelist.");var p=0===c.pathname.indexOf("/")?c.pathname:"/"+c.pathname;u?r.assert("https:"===_,"Target URI must be secure"):r.assert("data:"!==_&&"javascript:"!==_&&"vbscript:"!==_,"Target URI can't use the data or javascript scheme"),a&&r.assert(k.indexOf(h)>-1,"Target URI must be in the domain whitelist");var f=h;return d&&(f=f+":"+d),t=_+"//"+f+p+c.search+c.hash}},e.open_tab=d,e.unsafe_open_tab=p,e.redirect=f,e.replace_location=m,e.reload=g,e.performance=v,e.unsafeRedirect=w,e.is_high_density_display=y,e.isOnline=b,e.subscribeConnectivityStatusChange=E,e.unsubscribeConnectivityStatusChange=x}),function(){define("modules/core/controller_helpers",["jquery","modules/core/controller_registry","modules/core/exception"],function(t,e,n){var assert,r,i,o,s;return assert=n.assert,o=function(t,e){return t.data("jscontroller",e)},s=function(t){return t.data("jscontroller")},r=function(n){var i,o,a,l;for(l=n.children(),o=0,a=l.length;a>o;o++)i=l[o],r(t(i));return!s(n)&&n.data("js-component-id")?e.bind_controller(n):void 0},i=function(t){var e;return assert(t,"Trying to clone nonexistent element"),e=t.clone(),r(e),e},{deprecated_set_controller:o,get_controller:s,clone_element:i,bind_controllers:r}})}.call(this),function(){define("modules/core/controller_registry",["jquery","modules/core/exception"],function(t,e){var n,r,raiseAndReport;return raiseAndReport=e.raiseAndReport,r=function(e,n,r){var i,o,s,a;for(i=[e].concat(r),s=0,a=e.length;a>s;s++)o=e[s],t(o).data("jscontroller",function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(n,i,function(){}));return e},n=function(){function e(){}return e.controllers={},e.register_controller=function(t,e,n){return this.controllers[t]={constructor:e,args:n},this.find_and_bind_controller(t)},e.bind_controller=function(t){var e,n;return e=t.data("js-component-id"),this.controllers[e]?(n=this.controllers[e],r(t,n.constructor,n.args)):void raiseAndReport("No controller for "+e)},e.find_and_bind_controller=function(e){var n,i;return this.controllers[e]?(i=this.controllers[e],n=t("[data-js-component-id='"+e+"']"),r(n,i.constructor,i.args)):void raiseAndReport("No controller for "+e)},e}()})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/core/cookies",["modules/core/exception"],function(e){var n,r,i,o,s,a,l,u,c,_,h,d,p;return i=/^([0-9]{1,3}\.){3}[0-9]{1,3}$/,o=function(t){var e,n,r,o,s;if(t.match(i))return[t];for(e=t.split("."),s=[],n=r=0,o=e.length;o>=0?o>r:r>o;n=o>=0?++r:--r)s.push(e.slice(n).join("."));return s},s=function(t){var e,n,r,i,o,s;for(e=t.split("/"),s=[],n=r=0,i=e.length;i>=0?i>r:r>i;n=i>=0?++r:--r)o=e.slice(0,e.length-n).join("/"),""!==o&&s.push(o),s.push(o+"/");return s},a=function(e){var n,r,i,o;if(null==e)return!1;for(o=["=",";"],r=0,i=o.length;i>r;r++)if(n=o[r],t.call(e,n)>=0)return!0;return!1},p=function(t,n,r){null==r&&(r=!1),e.assert("string"==typeof t,n+" must be a string, but was "+typeof t),e.assert(r||(null!=t?t.length:void 0)>0,n+" must not be empty"),e.assert(!a(t),n+" contains illegal characters")},_=function(t){return p(t,"Cookie name",!1)},d=function(t){return p(t,"Cookie value",!0)},c=function(t){return p(t,"Cookie expiration date",!1)},u=function(t){return p(t,"Cookie domain",!1)},h=function(t){return p(t,"Cookie path",!1)},l=function(t,e,n){null==n&&(n={}),_(t),d(e),null!=n.expires&&c(n.expires),null!=n.domain&&u(n.domain),null!=n.path&&h(n.path),document.cookie=[t+"="+e,null!=n.expires?"expires="+n.expires:void 0,null!=n.domain?"domain="+n.domain:void 0,null!=n.path?"path="+n.path:void 0].join("; ")},r=new Date(1).toUTCString(),n={create:function(t,n,r){var i,o;null!=r&&(e.assert("number"==typeof r,"Cookie expiration must be a number"),i=new Date,i.setTime(i.getTime()+24*r*60*60*1e3),o=i.toUTCString()),l(t,n,{expires:o,path:"/"})},read:function(t){var e,n,r,i,o,s,a,l,u,c,h,d;for(_(t),d=[],c=document.cookie.split(";"),i=0,a=c.length;a>i;i++)e=c[i],s=e.split("=",1)[0],s.trim()===t&&d.push(e.substring(s.length+1,e.length).trim());for(n=!1,u=[],r=o=0,l=d.length;l>o;r=++o)h=d[r],""===h?n=!0:u.push(h);return 1===u.length?u[0]:u.length>1?(this.delete(t),null):n?"":null},delete:function(t){var e,n,i,a,u,c,_,h;for(n=[null].concat(o(window.location.hostname)),h=[null].concat(s(window.location.pathname)),i=0,u=n.length;u>i;i++)for(e=n[i],a=0,c=h.length;c>a;a++)_=h[a],l(t,"",{expires:r,domain:e,path:_})},are_enabled:function(){return null!=navigator.cookieEnabled?navigator.cookieEnabled:(document.cookie="this_is_a_test_cookie",-1!==document.cookie.indexOf("this_is_a_test_cookie"))}}})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/core/dom",["jquery","modules/clean/keycode"],function(e,n){var r,i,o,s,a,l,u,c,_,h,d,p,f,m,g,v,w,y,b,E,x,S,k,C,T;return r="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",m=function(t){return t?1===t.nodeType?!0:t.length>=1&&1===t[0].nodeType:!1},h=function(){return g(document.activeElement)},g=function(t){var e,n;return("INPUT"===(e=null!=t?t.tagName:void 0)||"TEXTAREA"===e||"SELECT"===e)&&"submit"!==(n=null!=t?t.type:void 0)&&"button"!==n||f(t)},f=function(t){return(null!=t?t.hasAttribute:void 0)&&(null!=t?t.hasAttribute("contenteditable"):void 0)&&"false"!==(null!=t?t.getAttribute("contenteditable").toLowerCase():void 0)},T=function(t){var n,r,i;return n=e(t),i=n.offset(),r=e(window),{left:i.left-r.scrollLeft(),top:i.top-r.scrollTop()}},o=null,s=null,C=function(){return o||(o={height:e(window).height(),width:e(window).width()}),s||(s=e(window).on("resize",function(){return o=null})),o},c=function(){return Math.max(e(document).height(),e(window).height(),document.documentElement.clientHeight)},a=null,i=null,x=function(){var t,n;return a||(a=e(window).scroll(function(){return i=null})),v()?i||(n=e(window).scrollTop(),t=e(window).scrollLeft(),i={0:t,1:n,left:t,top:n}):(n=l.top,t=l.left,i={0:t,1:n,left:t,top:n}),i},y=function(){return i=null},v=function(){return!e(document.documentElement).hasClass("no-scroll")},E=0,l=null,b=function(){var t,n,r;return E++,t=e(document.documentElement),t.hasClass("no-scroll")?void 0:(l=x(),r=-1*l.top+"px",n=-1*l.left+"px",t.css({top:r,left:n}),t.addClass("no-scroll"))},k=function(){var t,n,r;return E>0&&E--,t=e(document.documentElement),0===E&&t.hasClass("no-scroll")?(r=l.top,n=l.left,t.css({top:"",left:""}),t.removeClass("no-scroll"),S(n,r+1),S(n,r-1),S(n,r)):void 0},S=function(t,n){var r,o,s;return t=Math.max(t,0),n=Math.max(n,0),n>x().top&&(n=Math.min(n,c()-_.viewport_dimensions().height)),v()?(window.scrollTo(t,n),i={0:t,1:n,left:t,top:n}):(l={0:t,1:n,left:t,top:n},s=-1*n+"px",o=-1*t+"px",r=e(document.documentElement),r.css({top:s,left:o}))},u=function(t,n,r){var i,o,s,a,l,u,c,_;return o=e(n),s=e(t),u={setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},r=e.extend({},u,r),_=T(o),c={top:0,left:0},i=null,"absolute"===s.css("position")&&(i=s.offsetParent(),c=T(i)),i&&i[0]===document.body&&(c.left-=document.body.offsetLeft,c.top-=document.body.offsetTop),r.setLeft&&(a=_.left-c.left+r.offsetLeft+"px",s.css("left",a)),r.setTop&&(l=_.top-c.top+r.offsetTop+"px",s.css("top",l)),r.setWidth&&s.width(o[0].offsetWidth),r.setHeight&&s.height(o[0].offsetHeight),s},T=function(t){var n,r,i;return n=e(t),i=n.offset(),r=e(window),{left:i.left-r.scrollLeft(),top:i.top-r.scrollTop()}},d=function(t,n){var i;return i=e(t).find(r).filter(function(){return!!(this.offsetWidth&&this.offsetHeight||this.getClientRects().length)}),n?i.not('*[tabindex="-1"]'):i},p=function(t){var e,n,r,i;return i=d(t,!0),e=i.filter('*:not([tabindex]), *[tabindex="0"]'),r=i.not(e).toArray(),r.length?(n=function(t,e){var n,r;return n=parseInt(t.getAttribute("tabindex"),10),r=parseInt(e.getAttribute("tabindex"),10),n-r},r.sort(n),r.concat(e.toArray())):e.toArray()},w=function(e,r){var i,o,s,a,l,u,c,h,d;if(r.which===n.TAB&&(h=_.getTabbableElementsIn(e),h.length)){if(d=h.indexOf(r.target),-1===d){if(r.preventDefault(),s=_.getFocusableElementsIn(e).toArray(),r.shiftKey&&s.reverse(),a=s.indexOf(r.target),-1===a)return h[0].focus();for(o=null,c=s.slice(a),l=0,u=c.length;u>l;l++)if(i=c[l],t.call(h,i)>=0){o=i;break}return o?o.focus():r.shiftKey?h[h.length-1].focus():h[0].focus()}if(r.shiftKey){if(0===d)return r.preventDefault(),h[h.length-1].focus()}else if(d===h.length-1)return r.preventDefault(),h[0].focus()}},_={clone_position:u,document_height:c,focus_in_input:h,is_input:g,is_content_editable:f,is_page_scrollable:v,scroll_clear_cache:y,scroll_lock_document:b,scroll_offsets:x,scroll_to:S,scroll_unlock_document:k,is_element:m,viewport_offset:T,viewport_dimensions:C,getFocusableElementsIn:d,getTabbableElementsIn:p,keepFocusIn:w}})}.call(this),define("modules/core/exception",["require","exports","tslib","external/tracekit","modules/constants/page_load","modules/pagelet_config","modules/core/exception_tag_registry"],function(t,e,n,r,i,o,s){"use strict";function a(t){c.push(t)}function reportException(t){var n=t.err,i=t.force,o=t.tags,s=t.severity,a=t.exc_extra;if(!n.reported){var l=r.computeStackTrace(n),u=null!=(l&&l.stack)?l.stack:[];e._reportException({msg:n.message,stack:u,force:i,tags:o,severity:s,exc_extra:a}),n.reported=!0}}function _reportException(t){var e=t.msg,a=t.stack,c=t.force,h=t.tags,d=t.severity,p=t.exc_extra;if(!_||c){var f=["\\b_reportException\\b","\\breportException\\b","\\bassert\\b","\\braiseAndReport\\b"],m=a,g=a,v=[];a=l(a,f);try{throw new Error}catch(t){var w=r.computeStackTrace(t);null!=w&&null!=w.stack&&(v=w.stack),g=v,v=l(v,f)}var y=a.length-v.length;0>=y&&(y=1);var b=a.slice(0,y),E=a.slice(y);if(h||(h=[]),h=h.concat(s.get_registered_tags()),p=p?n.__assign({},p):{},p.client_time=(new Date).toString(),p.client_utc_time=(new Date).toUTCString(),u+=1,p.exception_number=u,p.page_repo_rev=i.REPO_REV,p.page_load_timestamp=i.PAGE_LOAD_TIME,p.metaserver_mdb_tags=i.METASERVER_MDB_TAGS,p.user_locale=i.USER_LOCALE,null!=window.ensemble&&null!=window.ensemble.getPageletInfoForExceptionReporting){var x=window.ensemble.getPageletInfoForExceptionReporting();p.pagelet_info=x,p.current_pagelet=o.REQUIREJS_CONFIG.context,p.page_load_timestamp=Math.floor(Math.max.apply(Math,x.map(function(t){return t.pagelet_client_load_time}))),h=h.concat(["maestro-website"])}p.jsexclog_debug_stack_length=a.length,p.jsexclog_debug_context_length=v.length,p.jsexclog_debug_tracekit_stack1=m.reverse(),p.jsexclog_debug_tracekit_stack2=g.reverse();var S={e:e,loc:window.location.href,ref:document.referrer,stack:JSON.stringify(b.reverse()),context_tb:JSON.stringify(E.reverse()),tags:JSON.stringify(h),sev:d||"",exc_extra:JSON.stringify(p||{})},k=new XMLHttpRequest;k.open("POST","/jse");var C=[];for(var T in S)if(S.hasOwnProperty(T)){var R=S[T];null!=R&&""!==R&&C.push(encodeURIComponent(T)+"="+encodeURIComponent(R))}var O=C.join("&");k.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),k.send(O),_=e}}function l(t,e){for(var n=function(t){if(!t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(-1!==t.search(i))return!0}return!1};t.length>0&&n(t[0].func);)t=t.slice(1);return t}function assert(t,n,o){if(void 0===n&&(n="An assertion failed but no message was provided"),void 0===o&&(o={}),!t){var s=o.tags,a=void 0===s?[]:s,l=o.exc_extra,u=void 0===l?null:l;n="Assertion Error: "+n,i.IS_PROD||alert(n);try{throw new Error(n)}catch(t){var _=r.computeStackTrace(t);throw e._reportException({msg:n,stack:_&&null!=_.stack?_.stack:[],force:!0,tags:a.concat("module:exception","assert"),exc_extra:u}),t.reported=!0,c.forEach(function(t){return t(_)}),t}}}function raiseAndReport(t,n){void 0===t&&(t="Raise and report was called without a message"),void 0===n&&(n={}),n={severity:n.severity||e.SEVERITY.NONCRITICAL,tags:n.tags||[],exc_extra:n.exc_extra||{}};var r=new Error(t);e.reportException({err:r,force:!0,tags:(n.tags||[]).concat("module:exception","raiseAndReport"),severity:n.severity,exc_extra:n.exc_extra}),i.IS_PROD||(n.severity===e.SEVERITY.CRITICAL?(alert(t),console&&console.error&&console.error(r)):console&&console.warn&&console.warn(r))}var u=0,c=[],_=void 0;e.SEVERITY={CRITICAL:"critical",NONCRITICAL:"non-critical"},e.registerOnFailedAssert=a,e.reportException=reportException,e._reportException=_reportException,e.cleanup_stack_trace=l,e.assert=assert,e.raiseAndReport=raiseAndReport}),define("modules/core/exception_tag_registry",["require","exports"],function(t,e){"use strict";function n(){var t=[];for(var e in s)s.hasOwnProperty(e)&&t.push(e);return t}function r(t){s[t]=!0}function i(t){delete s[t]}function o(){s={}}var s={};e.get_registered_tags=n,e.register_tag=r,e.unregister_tag=i,e.clear_all_tags=o}),function(){define("modules/core/html",["jquery","external/underscore","modules/constants/page_load"],function(t,e,n){var r;return r=function(){function t(t){this._str_DONT_TOUCH=t}return t.prototype.toHTML=function(){return this._str_DONT_TOUCH},t.prototype.toString=function(){return"[object HTML]"},t}(),function(){var i,o,s,a;return r.tmpl=function(i,o){var s,a,l,u;return/[^\w:.-]/.test(i)||(a=document.getElementById(i),i=a.innerHTML,null!=n.CSP_SCRIPT_NONCE&&n.CSP_SCRIPT_NONCE!==a.getAttribute("nonce")&&(i="")),u=i.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.*?)%>/g,"',__no_conflict_HTML__._raw_escape($1),'").split("<%").join("');").split("%>").join("p.push('"),s=new Function("__no_conflict_HTML__","__no_conflict_jQuery__","TEMPLATE_DATA","var p=[],print=function(){p.push.apply(p,arguments);}; p.push('"+u+"'); return new __no_conflict_HTML__(__no_conflict_jQuery__.trim(p.join('')));"),l=e.partial(s,r,t),o?l(o):l},o=/[^\w@\.\ \-\(\)\,\$~%#\[\]\{\}\!\^]/g,a=function(t){return"&#"+t.charCodeAt(0)+";"},s=function(t){return(""+t).replace(o,a)},r.escape=function(t){return t instanceof r?t:new r(s(t))},r._raw_escape=i=function(t){return t instanceof r?t.toHTML():"number"==typeof t?t:s(t)}}(),r})}.call(this),define("modules/core/i18n",["require","exports","jquery","external/underscore","langpack","modules/core/exception","modules/constants/page_load","external/sha1"],function(t,e,n,r,i,o,s,a){"use strict";function l(t,n,r,i){n=n.strip_tags().friendly_format(),r=r.strip_tags(),e.messages[n]=t,e.emessages[n]=r,i&&(delete e.messages[i],delete e.emessages[i])}function u(t,e,n){void 0===n&&(n="web");var i,o;return i="string"==typeof t?{project:t}:t?t:{},o="string"==typeof e?{comment:e}:e?e:{},r.defaults({},i,o,{project:n,comment:null})}function c(t,e,r){var o,a=u(e,r),c=a.project,d=a.comment;if(h(s.USER_LOCALE))o=_(t,s.USER_LOCALE);else{var p=k.get_string_key(t,c,d),f=i[p]||i[t];f?o=f instanceof String||"string"==typeof f?f:f[0]||t:(0===C&&"en"!==s.USER_LOCALE&&(C=Math.floor(20*Math.random()+1)),1===C&&4>T&&(T+=1,n.ajax({url:"/missed_translation_log",type:"POST",data:{message:t,commentStr:d,projectStr:c}})),o=t)}return l(t,o,t),o}function _(t,e){if("xx_LS"===e)t+="SSSSSSSSSSSSSSSSSSSSSSSSS";else if("xx_AC"!==e||/</.test(t))if("xx_HA"===e)t="[javascript]"+t;else if("xx_RL"!==e||/</.test(t)||/%/.test(t))"xx_AE"!==e||/</.test(t)||/%/.test(t)||(t=t.split("").map(function(t){return null!=S[t]?S[t]:t}).join(""));else{var n=97,r=1488,i="";t=t.toLowerCase();for(var o=0;o<t.length;o++){var s=t.charCodeAt(o)-n;i+=s>=0&&26>s?String.fromCharCode(r+s):t[o]}t=i}else t=t.toUpperCase();return t}function h(t){return-1!==t.indexOf("xx_")}function d(t,n,r,a,c){var d=u(a,c),p=d.project,f=d.comment,m=null;o.assert(null!=r,"missing number parameter for ungettext");var g=s.USER_LOCALE;if(g)if(h(g))t=_(t,g),n=_(n,g);else{var v=k.get_string_key(t,p,f),w=i[v]||i[t];if(w){if(w instanceof String||"string"==typeof w)return w;var y=e.PLURAL_RULES_BY_LOCALE[g](r);null!=w[y]&&(m=w[y])}}var b=1===r?t:n;null==m&&(m=b);var E=m;return l(t,E,b),E}function p(t,e,n){var r=u(e,n),i=r.project,o=r.comment;return new R(t,i,o)}function f(t){return c(t.msg,t.project||"web",t.comment)}function m(t){var e=t.length;switch(e){case 1:return t[0];case 2:return c("%s %s",{comment:"Two sentences"}).format(t);case 3:return c("%s %s %s",{comment:"Three sentences"}).format(t);case 4:return c("%s %s %s %s",{comment:"Four sentences"}).format(t);default:for(var n="",r=0,i=0,o=t;i<o.length;i++){var s=o[i];n+=s,r!==e-1&&(n+=c(" ",{comment:"Sentence separator character"})),r+=1}return n}}function g(t){var n=s.USER_LOCALE;return n?e.PERCENT_FORMAT_BY_LOCALE[n](t):e.PERCENT_FORMAT.SUFFIX(t)}function v(t){return{_:function(e,n,r){return i=u(n,r,t),n=i.project,r=i.comment,c(e,n,r);var i},ungettext:function(e,n,r,i,o){return s=u(i,o,t),i=s.project,o=s.comment,d(e,n,r,i,o);var s},N_:function(e,n,r){return i=u(n,r,t),n=i.project,r=i.comment,p(e,n,r);var i},E_:f}}function w(){if(window.Intl&&window.Intl.Collator){var t=s.USER_LOCALE.replace("_","-")||"en";return new window.Intl.Collator(t).compare}return function(t,e){var n=t.toLowerCase(),r=e.toLowerCase();return r>n?-1:n>r?1:e>t?-1:t>e?1:0}}var y="abcdefghijklmnopqrstuvwxyz",b="âḃćḋèḟĝḫíĵǩĺṁńŏṗɋŕśṭůṿẘẋẏẓ",E="ABCDEFGHIJKLMNOPQRSTUVWXYZ",x="ḀḂḈḊḔḞḠḢḬĴḴĻḾŊÕṔɊŔṠṮŨṼẄẌŸƵ",S=function(){for(var t={},e=0;26>e;e++)t[y.charAt(e)]=b.charAt(e),t[E.charAt(e)]=x.charAt(e);return t}(),k={CONTEXT_DELIMITER:"",
get_message_context:function(t,e){var n="";if("web"!==t&&(n="project:"+t),null!=e){var r=new a("SHA-1","TEXT");r.update(e);var i=r.getHash("HEX");n?n+=" "+i:n=i}return n},get_string_key:function(t,e,n){var r=k.get_message_context(e,n);return null!=r?r+k.CONTEXT_DELIMITER+t:t}};e.messages={},e.emessages={};var C=0,T=0;e.add_i18n_message=l,e.PLURAL_RULES={SINGULAR_1:function(t){return 1===t?0:1},SINGULAR_01:function(t){return 1>=t?0:1},SINGULAR_ALL:function(t){return 0},RUSSIA_UKRAINE:function(t){return t%10===1&&t%100!==11?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2},POLAND:function(t){return 1===t?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2}},e.PLURAL_RULES_BY_LOCALE={en:e.PLURAL_RULES.SINGULAR_1,en_GB:e.PLURAL_RULES.SINGULAR_1,da_DK:e.PLURAL_RULES.SINGULAR_1,de:e.PLURAL_RULES.SINGULAR_1,es_ES:e.PLURAL_RULES.SINGULAR_1,es:e.PLURAL_RULES.SINGULAR_1,fr:e.PLURAL_RULES.SINGULAR_01,id:e.PLURAL_RULES.SINGULAR_ALL,it:e.PLURAL_RULES.SINGULAR_1,ja:e.PLURAL_RULES.SINGULAR_ALL,ko:e.PLURAL_RULES.SINGULAR_ALL,ms:e.PLURAL_RULES.SINGULAR_ALL,nb_NO:e.PLURAL_RULES.SINGULAR_1,nl_NL:e.PLURAL_RULES.SINGULAR_1,pl:e.PLURAL_RULES.POLAND,pt_BR:e.PLURAL_RULES.SINGULAR_01,ru:e.PLURAL_RULES.RUSSIA_UKRAINE,sv_SE:e.PLURAL_RULES.SINGULAR_1,th_TH:e.PLURAL_RULES.SINGULAR_ALL,tr:e.PLURAL_RULES.SINGULAR_ALL,uk_UA:e.PLURAL_RULES.RUSSIA_UKRAINE,xx_AC:e.PLURAL_RULES.SINGULAR_1,xx_LS:e.PLURAL_RULES.SINGULAR_1,xx_HA:e.PLURAL_RULES.SINGULAR_1,xx_RL:e.PLURAL_RULES.SINGULAR_1,xx_AE:e.PLURAL_RULES.SINGULAR_1,xx_SL:e.PLURAL_RULES.SINGULAR_1,zh_CN:e.PLURAL_RULES.SINGULAR_ALL,zh_TW:e.PLURAL_RULES.SINGULAR_ALL},e.PERCENT_FORMAT={SUFFIX:function(t){return"%(percent)s%".format({percent:t})},PREFIX:function(t){return"%"+"%(percent)s".format({percent:t})},SUFFIX_SPACE:function(t){return"%(percent)s %".format({percent:t})}},e.PERCENT_FORMAT_BY_LOCALE={en:e.PERCENT_FORMAT.SUFFIX,en_GB:e.PERCENT_FORMAT.SUFFIX,da_DK:e.PERCENT_FORMAT.SUFFIX_SPACE,de:e.PERCENT_FORMAT.SUFFIX_SPACE,es_ES:e.PERCENT_FORMAT.SUFFIX,es:e.PERCENT_FORMAT.SUFFIX,fr:e.PERCENT_FORMAT.SUFFIX_SPACE,id:e.PERCENT_FORMAT.SUFFIX,it:e.PERCENT_FORMAT.SUFFIX,ja:e.PERCENT_FORMAT.SUFFIX,ko:e.PERCENT_FORMAT.SUFFIX,ms:e.PERCENT_FORMAT.SUFFIX,nb_NO:e.PERCENT_FORMAT.SUFFIX_SPACE,nl_NL:e.PERCENT_FORMAT.SUFFIX,pl:e.PERCENT_FORMAT.SUFFIX,pt_BR:e.PERCENT_FORMAT.SUFFIX,ru:e.PERCENT_FORMAT.SUFFIX_SPACE,sv_SE:e.PERCENT_FORMAT.SUFFIX_SPACE,th_TH:e.PERCENT_FORMAT.SUFFIX,tr:e.PERCENT_FORMAT.PREFIX,uk_UA:e.PERCENT_FORMAT.SUFFIX,xx_AC:e.PERCENT_FORMAT.SUFFIX,xx_LS:e.PERCENT_FORMAT.SUFFIX,xx_HA:e.PERCENT_FORMAT.SUFFIX,xx_RL:e.PERCENT_FORMAT.SUFFIX,xx_AE:e.PERCENT_FORMAT.SUFFIX,zh_CN:e.PERCENT_FORMAT.SUFFIX,zh_TW:e.PERCENT_FORMAT.SUFFIX},e._=c,e.fake_translate=_,e.locale_is_fake=h,e.ungettext=d,e.N_=p,e.E_=f,e.render_sentences=m,e.format_percent=g,e.i18n_default_project=v,e.case_insensitive_comparator=w;var R=function(){function t(t,e,n){this.msg=t,this.project=e,this.comment=n}return t}();e.NoOpTranslated=R,String.prototype.format_sub=function(t){return this.replace(/%(\([a-zA-Z0-9_\-]+\))?(\.\d+)?(.)/g,t.bind(this))},String.prototype.format=function(){if(0===arguments.length)return this.toString();var t=function(t,e){t||o.raiseAndReport(e,{tags:["String.format"],severity:o.SEVERITY.CRITICAL})},n=void 0,r=0;n=1===arguments.length&&arguments[0]instanceof Object?arguments[0]:Array.prototype.slice.call(arguments,0);var i,a=function(e,o,a,l){if(o){o=o.slice(1,-1),t(0>=r,"Cannot mix named and positional indices in string formatting for string '"+this+"'."),r=-1;var u="xx_AC"===s.USER_LOCALE;t(o in n||u&&o.toLowerCase()in n,"Key '"+o+"' not present during string substitution for string '"+this+"'"),i=n[o],u&&(i=n[o.toLowerCase()])}else Array.isArray(n)||(n=[n]),t(r>-1,"Cannot mix named and positional indices in string formatting for string '"+this+"'."),t(r<n.length,"Insufficient number of items in format for string '"+this+"'"),i=n[r],r++;t("undefined"!=typeof i,"value for key '"+(o||"")+"' is undefined"),null==i&&(i="");var c=i.toString();if("s"===l||"S"===l);else if("d"===l||"D"===l)c=parseInt(i,10).toString();else if("f"===l||"F"===l)c=Number(i).toString();else{if("%"===l)return"%";t(!1,"Unexpected format character '"+l+"' for string '"+this+"'.")}if(a){var _=parseInt(a.slice(1),10);if("f"===l||"F"===l){-1===c.indexOf(".")&&(c+=".0");var h=c.split(".");return h[0]+"."+h[1].slice(0,_)}return c.slice(0,_)}return c},u=this.format_sub(a);if(e.messages&&this in e.messages){r=0;var c=e.emessages[this],_=String.prototype.format_sub.call(c,a);l(c,u,_,this)}return u},String.prototype.friendly_format=function(){var t=1,e=1,n=function(n,r,i,o){return r?"["+r.slice(1,1).replace("-","_")+"]":"s"===o||"S"===o?"[word"+e++ +"]":"[number"+t++ +"]"};return this.format_sub(n)},String.prototype.blank_format=function(){var t=function(){return""};return this.format_sub(t)},String.prototype.strip_tags=function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}}),define("modules/core/notify",["require","exports","tslib","modules/core/i18n","modules/core/notify_base"],function(t,e,n,r,i){"use strict";var o=function(t){function e(){return t.apply(this,arguments)||this}return n.__extends(e,t),e.success=function(e,n){return void 0===e&&(e=this.DEFAULT_SUCCESS),void 0===n&&(n=10),e=e||this.DEFAULT_SUCCESS,t.success.call(this,e,n)},e.error=function(e,n){return void 0===e&&(e=this.DEFAULT_ERROR),void 0===n&&(n=10),t.error.call(this,e,n)},e.warning=function(e,n){return void 0===n&&(n=10),t.warning.call(this,e,n)},e.info=function(e,n){return void 0===n&&(n=10),t.info.call(this,e,n)},e}(i.NotifyBase);return o.DEFAULT_ERROR=r._("There was a problem completing this request."),o.DEFAULT_SUCCESS=r._("Your request completed successfully."),INLINE_JS.Notify=o,o}),define("modules/core/notify_base",["require","exports","jquery","modules/core/accessible_announce"],function(t,e,n,r){"use strict";var i=function(){function t(){}return t.success=function(t,e){return void 0===e&&(e=10),r.polite(t,e+1),this._show(t,e,"server-success"),this.current()},t.error=function(t,e){return void 0===e&&(e=10),r.assertive(t,e+1),this._show(t,e,"server-error"),this.current()},t.warning=function(t,e){return void 0===e&&(e=10),r.polite(t,e+1),this._show(t,e,"server-warning"),this.current()},t.info=function(t,e){return void 0===e&&(e=10),r.polite(t,e+1),this._show(t,e,"server-info"),this.current()},t.clear=function(){this._last_timeout&&clearTimeout(this._last_timeout),this._last_animation&&this._last_animation.stop(),this._last_timeout=null,this._last_animation=null,n("#notify").removeClass("server-error server-info server-success server-warning").hide()},t.isShown=function(){return n("#notify").is(":visible")},t.current=function(){return this._last_timeout},t._show=function(t,e,n){return this._buildElement(),this.clear(),this._setMessage(t),this._showElement(n),this._scheduleHide(e),this.current()},t._buildElement=function(){if(!n("#notify").length){var t='<div id="notify-wrapper"> <span id="notify"> <span id="notify-msg" class="notify-msg" /> </span> </div>';n("body").append(t),n(".maestro .has-top-notification").length&&n("#notify-wrapper").addClass("with-top-notification")}},t._setMessage=function(t){var e=n("#notify-msg");null!=t.toHTML?e.html(t.toHTML()):"string"==typeof t?e.text(t):t instanceof n&&e.html(t)},t._showElement=function(t){var e=n("#notify");e.addClass(t),this._last_animation=e.fadeIn(500)},t._scheduleHide=function(t){this._last_timeout=setTimeout(this._hide,1e3*t)},t._hide=function(){var t=n("#notify");return this._last_animation=t.fadeOut(1e3),this._last_timeout=null},t}();e.NotifyBase=i}),function(){define("modules/core/ordered_dictionary",[],function(){var t;return t=function(){function t(t,e){this.list=t,this.dict=e}return t.list=[],t.dict={},t.prototype.push=function(t,e){this.list.push(t),this.dict[t]=e},t.prototype.remove=function(t){this.list.removeItem(t),delete this.dict[t]},t.prototype.indexOfKey=function(t){return this.list.indexOf(t)},t.prototype.keyAtIndex=function(t){return this.list[t]},t.prototype.valueFromKey=function(t){return this.dict[t]},t.prototype.valueAtIndex=function(t){return this.dict[this.list[t]]},t.prototype.getValues=function(){var t;return function(){var e,n,r,i;for(r=this.list,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(this.dict[t]);return i}.call(this)},t.prototype.length=function(){return this.list.length},t.prototype.insertAtIndex=function(t,e,n){return this.list.splice(t,0,e),this.dict[e]=n},t}()})}.call(this),define("modules/core/uri",["require","exports","modules/constants/page_load","modules/core/exception"],function(t,e,n,r){"use strict";var i=/^(?:([^:\/\\?#]+):)?(?:[\/\\]{2}([^\/\\?#]*))?([^?#]*)(?:\?([^#]*))?(?:[#](.*))?$/,o=/^[a-zA-Z][a-zA-Z0-9+.\-]*$/,s=function(){function t(e){if(void 0===e&&(e={}),!(this instanceof t))return new t(e);if(("string"==typeof e||e instanceof t)&&!n.IS_PROD)throw new Error("URI/uri string passed into URI constructor.  Use URI.parse instead.");this.query=new a,this.initFromObject(e)}return t.prototype.initFromObject=function(t){this.setScheme(t.scheme),this.authority=t.authority||"",this.path=t.path||"",this.setQuery(t.query),this.fragment=t.fragment||""},t.prototype.getScheme=function(){return this.scheme},t.prototype.getAuthority=function(){return this.authority},t.prototype.getPath=function(){return this.path},t.prototype.getQuery=function(){return this.query.dict},t.prototype.getFragment=function(){return this.fragment},t.prototype.setScheme=function(t){return void 0===t&&(t=""),r.assert(!t||Boolean(t.match(o)),"Invalid scheme",{exc_extra:{scheme_param:t}}),this.scheme=t,this},t.prototype.setAuthority=function(t){return void 0===t&&(t=""),this.authority=t,this},t.prototype.setPath=function(t){return void 0===t&&(t=""),this.path=t,this},t.prototype.setQuery=function(t){return void 0===t&&(t={}),this.query=new a(t),this},t.prototype.setFragment=function(t){return void 0===t&&(t=""),this.fragment=t,this},t.prototype.updateQuery=function(t,e){return this.query.add(t,e),this},t.prototype.removeQuery=function(t){return this.query.remove(t),this},t.prototype.clone=function(){return new t(this.toObject())},t.prototype.toObject=function(){return{scheme:this.getScheme(),authority:this.getAuthority(),path:this.getPath(),query:this.getQuery(),fragment:this.getFragment()}},t.prototype.toString=function(){var e="";this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+t.encode(this.authority,":@[]")),this.path&&(r.assert(!this.authority||!this.path.length||"/"===this.path[0],'Path must start with a "/" if URI is not relative'),e+=t.encode(this.path,"/"));var n=this.query.toString();return n&&(e+="?"+n),this.fragment&&(e+="#"+t.encode(this.fragment,":@[]/&=+?#!")),e},t.parse=function(e){r.assert(null!=e,"must pass in a valid url-encoded string",{exc_extra:{uri_string_param:e}});var n=String(e).match(i)||[],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],_=new t;return _.setScheme(o),_.setAuthority(t.decode(s)),_.setPath(t.decode(l)),_.setQuery(a.parseString(u)),_.setFragment(t.decode(c)),_},t.decode=function(t){return t?decodeURIComponent(t):""},t.encode=function(t,e){if(void 0===e&&(e=""),!t)return"";t=encodeURIComponent(t),e+="~";for(var n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(r);t=t.replace(new RegExp(i,"g"),r)}return t},t.encode_parts=function(e,n){return void 0===n&&(n="/"),e.split(n).map(function(e){return t.encode(e)}).join(n)},t}(),a=function(){function t(t){void 0===t&&(t={}),this.dict={},this.add(t)}return t.parseString=function(e){if(!e)return{};var n={},r=e.split("&");return r.forEach(function(e){if(""!==e){var r=e.split("="),i=t.decode(r[0]),o=t.decode(r.slice(1).join("="));if(n.hasOwnProperty(i)){var s=n[i];"string"==typeof s&&(n[i]=[s]),n[i].push(o)}else n[i]=o}}),n},t.prototype.add=function(t,e){if("string"==typeof t)e&&(Array.isArray(e)?this.dict[t]=e.map(String):this.dict[t]=String(e));else for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(Array.isArray(r)?this.dict[n]=r.map(String):this.dict[n]=String(r))}return this},t.prototype.remove=function(t){return delete this.dict[t],this},t.prototype.replace=function(t){return this.dict=t,this},t.prototype.toString=function(){var e=[],n=function(n){if(r.dict.hasOwnProperty(n)){var i=r.dict[n];Array.isArray(i)?i.forEach(function(r){e.push(t.encode(n)+"="+t.encode(r))}):e.push(t.encode(n)+"="+t.encode(i))}},r=this;for(var i in this.dict)n(i);return e.length?e.join("&"):""},t.decode=function(t){return null==t?"":s.decode(t.replace(/\+/g,"%20"))},t.encode=function(t){return null==t?"":s.encode(t).replace(/%20/g,"+")},t}();return s}),define("modules/pagelet_config",["require","exports","module"],function(t,e,n){"use strict";e.REQUIREJS_CONFIG=n.config().REQUIREJS_CONFIG}),function(){define("modules/shims/react",["external/react","modules/core/exception","modules/core/exception_tag_registry"],function(t,e,n){var r,raiseAndReport,i;return raiseAndReport=e.raiseAndReport,i=n.register_tag,r=0,"function"==typeof t.registerWarningHandler&&t.registerWarningHandler(function(t){return 10>r&&Math.random()<.1?(raiseAndReport(t,{tags:["react-warning"]}),r+=1):void 0}),i("react-version-"+t.version),t})}.call(this),function(){define("modules/shims/rsvp",["external/rsvp","modules/core/exception"],function(t,e){return t.on("error",function(t){var n;return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error(null!=(n=null!=t?t.stack:void 0)?n:t),t instanceof Error?e.reportException({err:t}):void 0}),t})}.call(this),function(){define("modules/shims/tracekit",["external/tracekit"],function(t){return t.linesOfContext=1,t.remoteFetching=!1,t.noConflict()})}.call(this);
//# sourceMappingURL=pkg-ab.min.js-vfls6FcJW.map