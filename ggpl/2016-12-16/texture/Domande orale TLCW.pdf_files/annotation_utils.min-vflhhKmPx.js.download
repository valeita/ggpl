(function(){define(["modules/clean/annotations/annotation","modules/core/exception"],function(t,o){var n,e,l,i,u,r,a,d,p,assert,b,c,f;return a=t.Annotation,assert=o.assert,l=120,u=10,i=75,r=320,e=10,n=28,d=38,p=2,f=function(t,o){var n,e,l,i;return n=t.getBoundingBox(),e=window.getComputedStyle(o),i=e.width,l=e.height,n.top>=l||n.left>=i||n.right<0||n.bottom<0},b=function(t,o){var d,b,c,f,g,s,m,h,x,w,y,B,k,v,C,A,P,M,O,S,E,F;S=o.getBoundingClientRect(),F=S.width,E=S.height,w=function(t,o,n){return null==o&&(o=null),null==n&&(n=null),assert(null!==o||null!==n,"doesBubbleFitOnScreen needs a top or bottom value"),n&&(o=-n-l),t>=0&&F-r>t&&o>=0&&E-l>o},y=function(t,o){return"down"===o?E-t-i:-t-u},v=0,k=0,t.isImageAnnotation()&&(v=S.top+document.body.scrollTop,k=S.left+document.body.scrollLeft),d=t.getClampedBoundingBox(F,E,k,v),b=a.getCenterPosition(d),c=d.bottom-d.top,x={up:d.top*p,down:E-d.bottom,left:d.left,right:F-d.right},B=0,C="up";for(h in x)A=x[h],A>B&&(C=h,B=A);return"up"===C&&(g=b.x-r/2,m=-d.bottom+c+e,f="bottom",w(g,null,m))?[f,{x:g,y:m},y(m,"up")]:"down"===C&&(g=b.x-r/2,s=d.bottom+e,f="top",w(g,s))?[f,{x:g,y:s},y(s,"down")]:(x.left>x.right?(f="right",g=d.left-r-e):(f="left",g=d.right+e),O="down",P=E-d.top,M=d.bottom,M>P&&(O="up"),"down"===O&&r>P&&M>P&&(O="up"),"down"===O&&(f+="-top",s=b.y-n,s=Math.max(0,s),w(g,s))?[f,{x:g,y:s},y(s,"down")]:(f+="-bottom",m=-b.y-n,m=Math.max(-E+1,m),w(g,null,m)?[f,{x:g,y:m},y(m,"up")]:(g=b.x-r/2,s=b.y+e,w(g,s)?["top",{x:g,y:s},y(s,"down")]:(s=e,w(g,s)?["top",{x:g,y:s},y(s,"down")]:(g=0,s=e,w(g,s)?["top",{x:g,y:s},y(s,"down")]:[null,{x:null,y:null},null])))))},c=function(t,o,n){var e,i,u;switch(e=0,i=0,u=t,t){case"top":e=(r-d)/2;break;case"left-top":u="left",i=l/8;break;case"right-top":e=r-d,i=l/8,u="right";break;case"left-bottom":u="left",i=l/8;break;case"right-bottom":e=r-d,i=l/8,u="right";break;case"bottom":e=(r-d)/2}return[u,{x:o+e,y:n+i}]},{isAnnotationOffscreen:f,getBubblePosition:b,getExpandBubblePosition:c}})}).call(this);
//# sourceMappingURL=annotation_utils.min.js-vflSWsJvN.map